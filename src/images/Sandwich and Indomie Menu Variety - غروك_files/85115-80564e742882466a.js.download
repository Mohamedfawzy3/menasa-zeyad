!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="32af6595-a641-4fcf-8a03-be90fed833b9",e._sentryDebugIdIdentifier="sentry-dbid-32af6595-a641-4fcf-8a03-be90fed833b9")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[85115],{3209:(e,t,a)=>{a.d(t,{I:()=>m,O:()=>u});var s=a(3547),n=a(23232);function r(e){return e[Math.floor(Math.random()*e.length)]}var i=a(3683),l=a(39116),o=a(88382),c=a(65146),d=a(31651);function u(){let{t:e}=(0,c.Bd)("workspace"),t=(0,n._)(),a=(0,l.useRouter)(),[s,r]=(0,o.useState)(!1),d=(0,i.M)(e=>e.createWorkspace);return{isPending:s,add:async()=>{r(!0);try{let s=await d({name:e("workspace-default-name","New Project"),icon:m()});return t("ws_create",s.workspaceId,{location:"workspace:useAddWorkspace"}),a.push("/workspace/".concat(s.workspaceId))}finally{r(!1)}}}}function m(){let e=r(Object.keys(s.Pt)),t=r(s.Tj);return(0,d.K)({icon:e,color:t})}},3547:(e,t,a)=>{a.d(t,{ar:()=>eG,Ln:()=>eU,Tj:()=>ez,Pt:()=>eE});var s=a(79342),n=a(77215),r=a(56751),i=a(34765),l=a(20075),o=a(49942),c=a(92269),d=a(52871),u=a(77660),m=a(83076),p=a(46162),x=a(29531),h=a(30590),g=a(58746),f=a(40075),v=a(8757),b=a(63241),j=a(56297),y=a(53868),w=a(57577),k=a(37929),N=a(85413),C=a(32910),S=a(8541),I=a(4347),A=a(12174),P=a(28919),_=a(70352),M=a(81361),E=a(70913),z=a(87289),T=a(46368),D=a(69580),R=a(19818),K=a(78392),L=a(49592),B=a(68926),O=a(85853),F=a(31905),H=a(57799),$=a(92684),U=a(30452),W=a(55689),G=a(2947),V=a(27841),X=a(69783),Y=a(55804),Q=a(53165),q=a(95233),Z=a(15507),J=a(651),ee=a(20948),et=a(30472),ea=a(47288),es=a(70650),en=a(85368),er=a(11875),ei=a(27707),el=a(34352),eo=a(44397),ec=a(98567),ed=a(48823),eu=a(86508),em=a(47047),ep=a(84155),ex=a(16862),eh=a(3628),eg=a(15748),ef=a(17779),ev=a(89369),eb=a(97259),ej=a(64619),ey=a(12397),ew=a(9227),ek=a(44394),eN=a(48728),eC=a(53708),eS=a(7036),eI=a(22483),eA=a(36512),eP=a(99241),e_=a(68746),eM=a(65146);let eE={flag:n.A,home:r.A,star:i.A,heart:l.A,globe:o.A,unlock:c.A,smile:d.A,shield:u.A,bell:m.A,mail:p.A,phone:x.A,user:h.A,stethoscope:g.A,calendar:f.A,clock:v.A,hourglass:b.A,sun:j.A,moon:y.A,monitor:w.A,umbrella:k.A,leaf:N.A,utensils:C.A,bug:S.A,fish:I.A,bird:A.A,cat:P.A,"flask-conical":_.A,rocket:M.A,plane:E.A,car:z.A,truck:T.A,train:D.A,camera:R.A,video:K.A,music:L.A,headphones:B.A,microscope:O.A,archive:F.A,"book-open":H.A,zap:$.A,wrench:U.A,"sticky-note":W.A,"cup-soda":G.A,scale:V.A,film:X.A,palette:Y.A,cpu:Q.A,calculator:q.A,laptop:Z.A,briefcase:J.A,highlighter:ee.A,"clipboard-list":et.A,component:ea.A,building:es.A,flame:en.A,play:er.A,diamond:ei.A,database:el.A,aperture:eo.A,glasses:ec.A,shirt:ed.A,banana:eu.A,beer:em.A,apple:ep.A,carrot:ex.A,cherry:eh.A,gem:eg.A,gamepad:ef.A,"chef-hat":ev.A,music2:eb.A,"dollar-sign":ej.A,coffee:ey.A,tag:ew.A,sailboat:ek.A,"graduation-cap":eN.A,anchor:eC.A,pin:eS.A,compass:eI.A,code:eA.A,droplet:eP.A,box:e_.A},ez=["gray","red","orange","yellow","lime","teal","green","blue","purple","pink"],eT={flag:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.flag.name",defaults:"Flag"}),home:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.home.name",defaults:"Home"}),star:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.star.name",defaults:"Star"}),heart:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.heart.name",defaults:"Heart"}),globe:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.globe.name",defaults:"Globe"}),unlock:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.unlock.name",defaults:"Unlock"}),smile:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.smile.name",defaults:"Smile"}),shield:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.shield.name",defaults:"Shield"}),bell:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.bell.name",defaults:"Bell"}),mail:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.mail.name",defaults:"Mail"}),phone:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.phone.name",defaults:"Phone"}),user:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.user.name",defaults:"User"}),stethoscope:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.stethoscope.name",defaults:"Stethoscope"}),calendar:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.calendar.name",defaults:"Calendar"}),clock:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.clock.name",defaults:"Clock"}),hourglass:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.hourglass.name",defaults:"Hourglass"}),sun:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.sun.name",defaults:"Sun"}),moon:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.moon.name",defaults:"Moon"}),monitor:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.monitor.name",defaults:"Monitor"}),umbrella:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.umbrella.name",defaults:"Umbrella"}),leaf:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.leaf.name",defaults:"Leaf"}),utensils:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.utensils.name",defaults:"Utensils"}),bug:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.bug.name",defaults:"Bug"}),fish:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.fish.name",defaults:"Fish"}),bird:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.bird.name",defaults:"Bird"}),cat:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.cat.name",defaults:"Cat"}),"flask-conical":(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.flask-conical.name",defaults:"Flask Conical"}),rocket:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.rocket.name",defaults:"Rocket"}),plane:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.plane.name",defaults:"Plane"}),car:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.car.name",defaults:"Car"}),truck:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.truck.name",defaults:"Truck"}),train:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.train.name",defaults:"Train"}),camera:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.camera.name",defaults:"Camera"}),video:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.video.name",defaults:"Video"}),music:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.music.name",defaults:"Music"}),headphones:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.headphones.name",defaults:"Headphones"}),microscope:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.microscope.name",defaults:"Microscope"}),archive:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.archive.name",defaults:"Archive"}),"book-open":(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.book-open.name",defaults:"Book Open"}),zap:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.zap.name",defaults:"Zap"}),wrench:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.wrench.name",defaults:"Wrench"}),"sticky-note":(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.sticky-note.name",defaults:"Sticky Note"}),"cup-soda":(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.cup-soda.name",defaults:"Cup Soda"}),scale:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.scale.name",defaults:"Scale"}),film:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.film.name",defaults:"Film"}),palette:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.palette.name",defaults:"Palette"}),cpu:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.cpu.name",defaults:"CPU"}),calculator:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.calculator.name",defaults:"Calculator"}),laptop:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.laptop-2.name",defaults:"Laptop"}),briefcase:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.briefcase.name",defaults:"Briefcase"}),highlighter:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.highlighter.name",defaults:"Highlighter"}),"clipboard-list":(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.clipboard-list.name",defaults:"Clipboard List"}),component:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.component.name",defaults:"Component"}),building:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.building-2.name",defaults:"Building"}),flame:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.flame.name",defaults:"Flame"}),play:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.play.name",defaults:"Play"}),diamond:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.diamond.name",defaults:"Diamond"}),database:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.database.name",defaults:"Database"}),aperture:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.aperture.name",defaults:"Aperture"}),glasses:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.glasses.name",defaults:"Glasses"}),shirt:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.shirt.name",defaults:"Shirt"}),banana:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.banana.name",defaults:"Banana"}),beer:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.beer.name",defaults:"Beer"}),apple:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.apple.name",defaults:"Apple"}),carrot:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.carrot.name",defaults:"Carrot"}),cherry:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.cherry.name",defaults:"Cherry"}),gem:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.gem.name",defaults:"Gem"}),gamepad:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.gamepad-2.name",defaults:"Gamepad"}),"chef-hat":(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.chef-hat.name",defaults:"Chef Hat"}),music2:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.music-2.name",defaults:"Music Note"}),"dollar-sign":(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.dollar-sign.name",defaults:"Dollar Sign"}),coffee:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.coffee.name",defaults:"Coffee"}),tag:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.tag.name",defaults:"Tag"}),sailboat:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.sailboat.name",defaults:"Sailboat"}),"graduation-cap":(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.graduation-cap.name",defaults:"Graduation Cap"}),anchor:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.anchor.name",defaults:"Anchor"}),pin:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.pin.name",defaults:"Pin"}),compass:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.compass.name",defaults:"Compass"}),code:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.code-2.name",defaults:"Code"}),droplet:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.droplet.name",defaults:"Droplet"}),box:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"icon.box.name",defaults:"Box"})},eD={gray:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.gray.name",defaults:"Gray"}),red:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.red.name",defaults:"Red"}),orange:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.orange.name",defaults:"Orange"}),yellow:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.yellow.name",defaults:"Yellow"}),lime:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.lime.name",defaults:"Lime"}),teal:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.teal.name",defaults:"Teal"}),green:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.green.name",defaults:"Green"}),blue:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.blue.name",defaults:"Blue"}),purple:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.purple.name",defaults:"Purple"}),pink:(0,s.jsx)(eM.x6,{ns:"base",i18nKey:"color.pink.name",defaults:"Pink"})};var eR=a(61312),eK=a(88382),eL=a(56691),eB=a(1826),eO=a(41320),eF=a(16506);let eH={gray:"text-gray-400",red:"text-red-400",orange:"text-orange-400",yellow:"text-yellow-400",lime:"text-lime-400",teal:"text-teal-400",green:"text-green-400",blue:"text-blue-400",purple:"text-purple-400",pink:"text-pink-400"},e$={gray:"text-gray-300",red:"text-red-300",orange:"text-orange-300",yellow:"text-yellow-300",lime:"text-lime-300",teal:"text-teal-300",green:"text-green-300",blue:"text-blue-300",purple:"text-purple-300",pink:"text-pink-300"},eU=(0,eK.memo)(e=>{let{value:t,className:a,size:n}=e,{resolvedTheme:r}=(0,eF.D)(),i="dark"===r,l=eE[t.icon],o=(0,eR.cn)("size-4",i&&e$[t.color],i||eH[t.color],a);return(0,s.jsx)(l,{className:o,size:n})}),eW=(0,eK.memo)(e=>{let{icon:t,onSelect:a}=e,n=(0,eO.Di)(),[r,i]=(0,eK.useState)(!1),l=eE[t],o=n?"iconMd":"iconSm",c=e=>{i(!1),a({icon:t,color:e})};return(0,s.jsxs)(eB.AM,{modal:!0,open:r,onOpenChange:i,children:[(0,s.jsx)(eB.Wv,{asChild:!0,children:(0,s.jsxs)(eL.$n,{variant:"ghost",size:"iconSm",children:[(0,s.jsx)("label",{className:"sr-only",children:eT[t]}),(0,s.jsx)(l,{className:"size-4"})]})}),(0,s.jsx)(eB.hl,{className:"grid grid-cols-5 p-2",align:"start",alignOffset:-9,children:ez.map(e=>(0,s.jsxs)(eL.$n,{size:o,variant:"ghost",overideIconStyle:!0,onClick:()=>c(e),children:[(0,s.jsx)("label",{className:"sr-only",children:eD[e]}),(0,s.jsx)(eU,{value:{icon:t,color:e}})]},e))})]},t)}),eG=(0,eK.memo)(e=>{let{onSelect:t,className:a}=e,n=(0,eK.useMemo)(()=>Object.keys(eE).sort(),[]),r=(0,eR.cn)("grid grid-cols-9 items-center justify-items-stretch p-2 ",a);return(0,s.jsx)("div",{className:r,children:n.map(e=>(0,s.jsx)("div",{className:"aspect-square flex items-center justify-center",children:(0,s.jsx)(eW,{icon:e,onSelect:t})},e))})})},3683:(e,t,a)=>{a.d(t,{M:()=>h,_:()=>g});var s=a(79342),n=a(36653),r=a(17703),i=a(40873),l=a(65258),o=a(56173),c=a(81858),d=a(85423),u=a(65146),m=a(14908),p=a(51182);class x{constructor(e,t){this.set=e,this.get=t,this.byId={},this.list=[],this.listStatus="initial",this.listPageToken="",this.loadFirstPage=async()=>{let e=null===n.sessionStoreState||void 0===n.sessionStoreState?void 0:n.sessionStoreState.getState();if((null==e?void 0:e.user)&&"loading"!==this.get().listStatus){this.set(e=>{e.list=[],e.listStatus="loading",e.listPageToken=""});try{var t;let e=await o.Em.workspaceRepositoryListWorkspaces({pageSize:30,orderBy:"ORDER_BY_LAST_USE_TIME"}),a=null!=(t=e.workspaces)?t:[],s=e.nextPageToken||"";this.set(e=>{e.listStatus="ready",e.listPageToken=s,e.list=a.map(t=>{let a=f(t);return e.byId[a.workspaceId]=(0,l.ok)(a),a.workspaceId})})}catch(e){(0,r.vV)("workspace-store.loadFirstPage",e),this.set(e=>{e.listStatus="error"})}}},this.loadNextPage=async()=>{let{listStatus:e,listPageToken:t}=this.get();if("loading"!==e&&t){this.set(e=>{e.listStatus="loading"});try{var a;let e=await o.Em.workspaceRepositoryListWorkspaces({pageSize:30,orderBy:"ORDER_BY_LAST_USE_TIME",pageToken:t}),s=null!=(a=e.workspaces)?a:[],n=e.nextPageToken||"";this.set(e=>{for(let t of(e.listStatus="ready",e.listPageToken=n,s)){let a=f(t);e.byId[a.workspaceId]=(0,l.ok)(a),e.list.includes(a.workspaceId)||e.list.push(a.workspaceId)}})}catch(e){(0,r.vV)("workspace-store.loadNextPage",e),this.set(e=>{e.listStatus="error"})}}},this.loadWorkspace=async e=>{this.set(t=>{t.byId[e]?t.byId[e].status:t.byId[e]={status:"loading",data:null,error:null}});try{let t=await o.Em.workspaceRepositoryGetWorkspace({workspaceId:e}),a=f(t);this.set(t=>{t.byId[e]=(0,l.ok)(a)})}catch(t){(0,r.vV)("workspace-store.loadWorkspace",t),this.set(a=>{a.byId[e]=(0,l._q)(t)})}},this.deleteWorkspace=async e=>{let{list:t}=this.get(),a=t.indexOf(e);this.set(t=>{t.list=c.A([e],t.list)});try{await o.Em.workspaceRepositoryDeleteWorkspace({workspaceId:e}),this.set(t=>{delete t.byId[e]})}catch(t){(0,r.vV)("workspace-store.deleteWorkspace",t),this.set(t=>({list:d.A(a,e,t.list)})),m.oR.error((0,s.jsx)(u.x6,{ns:"workspace",i18nKey:"workspace-store-delete.error",defaults:"Error when deleting workspace"}))}},this.createWorkspace=async e=>{try{let t=await o.Em.workspaceRepositoryCreateWorkspace({body:{name:e.name,icon:e.icon}}),a=f(t);return this.set(e=>{e.byId[a.workspaceId]=(0,l.ok)(a),e.list.unshift(a.workspaceId)}),a}catch(e){throw(0,r.vV)("workspace-store.createWorkspace",e),m.oR.error((0,s.jsx)(u.x6,{ns:"workspace",i18nKey:"workspace-store-delete.error",defaults:"Error when creating workspace"})),e}},this.updateWorkspace=async(e,t)=>{var a;let n=null==(a=this.get().byId[e])?void 0:a.data;this.set(a=>{var s;(null==(s=a.byId[e])?void 0:s.data)&&n&&(a.byId[e].data={...n,...t})});try{let a=await o.Em.workspaceRepositoryUpdateWorkspace({workspaceId:e,body:t}),s=f(a);this.set(t=>{t.byId[e]=(0,l.ok)(s)})}catch(t){(0,r.vV)("workspace-store.updateWorkspace",t),n&&this.set(t=>{t.byId[e]=(0,l.ok)(n)}),m.oR.error((0,s.jsx)(u.x6,{ns:"workspace",i18nKey:"workspace-store-delete.error",defaults:"Error when updating workspace"}))}}}}let h=(0,l.MQ)(x,"useWorkspaceStore"),g=()=>h((0,p.k)(e=>e.list.map(t=>{var a;return null==(a=e.byId[t])?void 0:a.data}).filter(i.O)));function f(e){if(!e.workspaceId)throw Error("Workspace ID is required but was not provided");return e}},5443:(e,t,a)=>{a.d(t,{Yp:()=>E,Oh:()=>p.O,w8:()=>eK,TP:()=>eV});var s=a(72359),n=a(88382),r=a(79342),i=a(56691),l=a(39729),o=a(23232),c=a(84499),d=a(61312),u=a(22406),m=a(65146),p=a(47095),x=a(73772),h=a(75500),g=a(67383),f=a(23032),v=a(74445),b=a(24994),j=a(3683),y=a(42283),w=a(82263),k=a(69973),N=a(33846),C=a(14908);let S={initial:{opacity:1,scale:1},copied:{opacity:0,scale:.8,transition:{duration:.2}}};function I(e){let{t}=(0,m.Bd)("workspace"),[a,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(a){let e=setTimeout(()=>{s(!1)},2e3);return()=>clearTimeout(e)}},[a]),(0,r.jsxs)(i.$n,{size:"md",variant:"outline",onClick:()=>{navigator.clipboard.writeText(e.text).then(()=>{s(!0)}).catch(e=>{C.oR.error(t("workspace-copy-link-button.error","Failed to copy link")),console.error("Failed to copy: ",e)})},className:"flex items-center gap-2",children:[(0,r.jsx)(N.P.div,{variants:S,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1,transition:{duration:.2,delay:0}},className:"flex items-center",children:a?(0,r.jsx)(w.A,{className:"size-4 text-fg-positive"}):(0,r.jsx)(k.A,{className:"size-4 text-fg-secondary"})},a?"check":"link"),(0,r.jsx)("span",{children:a?t("workspace-copy-link-button.copied","Copied!"):t("workspace-copy-link-button.label","Copy Link")})]})}function A(e){var t;let{open:a,onOpenChange:s,workspace:n}=e,{t:l}=(0,m.Bd)("workspace"),o=(0,j.M)(e=>e.updateWorkspace),u=(0,c.KQ)({page:"workspace",workspaceId:null!=(t=n.workspaceId)?t:"",tab:"attachments"},window.location.origin);return(0,r.jsx)(b.R,{open:a,setOpen:s,contentClassName:(0,d.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","sm:min-w-[340px]","flex flex-col","md:overflow-hidden","px-6 py-6"),titleClassName:"flex justify-between items-center",title:(0,r.jsxs)(r.Fragment,{children:[n.isPublic?l("share-form-title-shared","Project is public"):l("workspace-share.title","Share Project"),(0,r.jsx)(i.$n,{className:"-mt-2 -mr-2",variant:"ghost",size:"icon","aria-label":l("workspace-instructions-close.label","Close"),onClick:()=>s(!1),tabIndex:-1,children:(0,r.jsx)(y.A,{size:18,className:"text-secondary"})})]}),footerClassName:"sm:justify-start pt-1",children:n.isPublic?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-secondary mb-4",children:l("project-share.shared.subtitle","This project is accessible to everyone in read-only mode.")}),(0,r.jsx)(I,{text:u})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex flex-col mb-4",children:(0,r.jsx)("span",{className:"text-secondary",children:l("project-share.not-shared.subtitle","This project is only accessible to you. Share it to make it available to everyone in read-only mode.")})}),(0,r.jsx)(i.$n,{variant:"primary",onClick:()=>{var e;o(null!=(e=n.workspaceId)?e:"",{isPublic:!0})},children:l("project-share.share-button.label","Share Project")})]})})}var P=a(39945);let _=(0,n.memo)(e=>{let{workspaceId:t,open:a,onOpenChange:s,onDeleteStarted:n}=e,l=(0,j.M)(e=>e.deleteWorkspace),{t:o}=(0,m.Bd)("workspace");return a?(0,r.jsx)(b.R,{open:a,setOpen:s,contentClassName:(0,d.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-3xl","flex flex-col","md:overflow-hidden","px-6 py-6"),titleClassName:"flex justify-between",title:(0,r.jsxs)(r.Fragment,{children:[o("workspace-detetion.title","Are you sure?"),(0,r.jsx)(i.$n,{className:"-mt-2 -mr-2",variant:"ghost",size:"icon","aria-label":o("workspace-instructions-close.label","Close"),onClick:()=>s(!1),tabIndex:-1,children:(0,r.jsx)(P.uv,{size:18,className:"text-secondary"})})]}),description:o("workspace-deletion.description","This action cannot be undone. Project will be lost forever."),footerClassName:"sm:justify-end pt-1 flex flex-col-reverse md:flex-row",footer:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.$n,{onClick:()=>{s(!1)},variant:"ghost",size:"md",className:"text-secondary",children:o("workspace-deletion-cancel.label","Cancel")}),(0,r.jsxs)(i.$n,{onClick:()=>{null==n||n(),t&&l(t)},variant:"outline",size:"md",className:"shadow-none text-primary",children:[(0,r.jsx)(v.A,{className:"size-4 text-fg-danger"}),o("workspace-deletion-confirm.label","Delete project")]})]})}):null});function M(e){let{workspace:t,className:a,iconSize:s,onDeleteStarted:l,onEditStarted:o,children:c}=e,{ENABLE_WORKSPACE_SHARING:p}=(0,h.h)(),{t:b}=(0,m.Bd)("workspace"),{workspaceId:j}=t,[y,w]=(0,n.useState)(!1),[k,N]=(0,n.useState)(!1),C=(0,n.useCallback)(()=>{setTimeout(()=>{w(!0)},1)},[]),S=(0,n.useCallback)(()=>{setTimeout(()=>{N(!0)},1)},[]),I=(0,d.cn)(a);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(x.rI,{children:[(0,r.jsx)(x.ty,{asChild:!0,children:c||(0,r.jsx)(i.$n,{variant:"ghostSecondary",rounded:!0,size:"iconMd",className:I,"aria-label":b("workspace-menu.label","Open menu"),children:(0,r.jsx)(u.A,{size:null!=s?s:14})})}),(0,r.jsxs)(x.SQ,{onCloseAutoFocus:e=>e.preventDefault(),side:"bottom",align:"end",sideOffset:6,alignOffset:-5,className:"flex flex-col shadow-sm shadow-black/5 border-border-l1 min-w-40",children:[p&&(0,r.jsxs)(x._2,{onClick:S,children:[(0,r.jsx)(g.A,{size:16,className:"me-2"}),b("share-workspace-button.label","Share")]}),o&&(0,r.jsxs)(x._2,{onClick:o,children:[(0,r.jsx)(f.A,{size:16,className:"me-2"}),b("workspace-menu.rename.label","Rename")]}),(0,r.jsxs)(x._2,{onClick:C,children:[(0,r.jsx)(v.A,{size:16,className:"text-fg-danger me-2"}),b("remove-workspace-button.label","Remove")]})]})]}),(0,r.jsx)(_,{workspaceId:j,open:y,onOpenChange:w,onDeleteStarted:l}),(0,r.jsx)(A,{open:k,onOpenChange:N,workspace:t})]})}function E(e){let{workspace:t,onClick:a,className:s}=e,{name:n,icon:x,workspaceId:h}=t,g=(0,o._)(),{t:f}=(0,m.Bd)("workspace"),v=(0,d.cn)("group relative",s);return(0,r.jsxs)("div",{className:v,children:[(0,r.jsx)(c.N_,{route:{page:"workspace",workspaceId:null!=h?h:"",tab:"attachments"},onClick:a,children:(0,r.jsxs)(l.Zp,{className:"flex flex-row items-center @sm:flex-col @sm:items-stretch gap-2 px-5 py-4 pe-12 @sm:pe-5 max-w-4/5 rounded-3xl hover:bg-surface-l1 shadow-none h-full overflow-hidden bg-none bg-transparent",children:[(0,r.jsx)(p.O,{icon:x,className:"size-4"}),(0,r.jsx)("div",{className:"text-sm font-medium truncate",children:n})]})}),(0,r.jsx)(M,{workspace:t,onDeleteStarted:()=>{g("ws_delete_click",void 0,{location:"workspaces"})},children:(0,r.jsx)(i.$n,{variant:"ghostSecondary",className:"visible @sm:invisible @sm:group-hover:visible absolute right-3 top-2 @sm:top-3",rounded:!0,size:"iconXs","aria-label":f("workspace-menu.label","Open menu"),children:(0,r.jsx)(u.A,{size:12})})})]})}var z=a(69358),T=a(82591),D=a(28503),R=a(80226),K=a(46748),L=a(63209),B=a(81745);function O(e){let{children:t,className:a}=e;return(0,r.jsxs)("div",{className:(0,d.cn)("h-dvh w-full relative selection:bg-highlight",a),children:[(0,r.jsx)(L.hx,{hideIncognito:!0}),(0,r.jsx)("div",{className:"max-w-[50rem] px-2 pt-16 @sm:pt-18 mx-auto w-full flex-col h-full relative items-center",children:t}),(0,r.jsx)(B.CommandMenu,{})]})}var F=a(31265),H=a(52371),$=a(68332),U=a(24734),W=a(7658),G=a(17703),V=a(44347),X=a(74995),Y=a(38614),Q=a(54344),q=a(91623),Z=a(37469);function J(e){let{icon:t,title:a,subtitle:s,className:n}=e,i=(0,d.cn)("flex-1 flex flex-col items-center justify-center p-4 gap-4 mb-4",n);return(0,r.jsxs)(l.Zp,{variant:"ghost",className:i,children:[(0,r.jsx)("div",{className:"bg-surface-l1 flex flex-col items-center rounded-full p-4",children:(0,r.jsx)("span",{className:"text-fg-tertiary",children:t})}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 items-center text-center",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:a}),(0,r.jsx)("span",{className:"text-secondary max-w-md",children:s})]})]})}function ee(e){let{assets:t,uploadingFiles:a,onRemoveAsset:s,workspaceId:n,isReadonly:i}=e,l=(0,W.P9)(n);return t.length+a.length+l.length===0?(0,r.jsx)(et,{}):(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-1 @sm:grid @sm:grid-cols-2 @sm:auto-rows-max",children:[a.map((e,t)=>(0,r.jsx)(N.P.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},children:(0,r.jsx)(q.t,{file:e,onRemoveFile:()=>{},metadata:void 0})},"file"+t)),l.map((e,t)=>(0,r.jsx)(N.P.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},children:(0,r.jsx)(q.t,{file:new File([e.thirdPartyFileId],e.name),onRemoveFile:()=>{},metadata:{fileMimeType:e.mimeType,fileName:e.name,thirdPartyFileId:e.thirdPartyFileId}})},"file"+t)),t.map((e,t)=>{var a;return(0,r.jsx)(N.P.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},children:(0,r.jsx)(Z.u,{asset:e,onRemoveAsset:i?void 0:s,labelClassName:"sm:max-w-full flex-1",hideEdit:!0})},null!=(a=e.assetId)?a:t)})]})}function et(){let{t:e}=(0,m.Bd)("workspace");return(0,r.jsx)("div",{children:(0,r.jsx)(J,{icon:(0,r.jsx)(P.XR,{size:24,strokeWidth:1.5}),title:e("workspace-assets-empty.title","Welcome"),subtitle:e("workspace-assets-empty.text","Start by attaching files to your project. They will be used in all chats in this project.")})})}function ea(e){var t,a;let{workspace:s}=e,n=null!=(t=s.workspaceId)?t:"",{data:i,isPending:l,isError:o,refetch:c}=(0,W.UL)(n),d=(0,W.Ch)(n),{mutate:u,error:m}=(0,W.Ep)(n);if((0,U.Y)("assets-section:removeAsset",m),l)return(0,r.jsx)(es,{});if(o)return(0,r.jsx)(er,{onRefetch:c});let p=null!=(a=i.assets)?a:[];return(0,r.jsx)("section",{className:"flex-1 w-full h-full flex flex-col gap-2 relative",children:(0,r.jsx)(Q.D,{fadeSize:"md",className:"py-2",children:(0,r.jsx)(ee,{workspaceId:n,uploadingFiles:d,assets:p,onRemoveAsset:e=>{e.assetId&&u(e.assetId)},isReadonly:s.isReadonly})})})}function es(){return(0,r.jsx)(z.P,{children:(0,r.jsxs)("div",{"aria-busy":"true",className:"flex flex-col gap-2 @sm:grid @sm:grid-cols-2 @sm:auto-rows-max",children:[(0,r.jsx)(en,{}),(0,r.jsx)(en,{}),(0,r.jsx)(en,{}),(0,r.jsx)(en,{})]})})}function en(){return(0,r.jsx)(R.E,{className:"bg-warm-gray-100 dark:bg-gray-900 h-10"})}function er(e){let{onRefetch:t}=e,{t:a}=(0,m.Bd)("workspace");return(0,r.jsxs)(l.Zp,{className:"flex flex-col items-center px-8 py-4",variant:"ghost",children:[a("assets-loading-error.title","Unable to load assets"),(0,r.jsx)(i.$n,{variant:"outline",size:"md",onClick:t,children:a("assets-loading-error.cta","Retry")})]})}var ei=a(82451),el=a(70526),eo=a(44566);function ec(e){var t;let{workspaceId:a,onFileAddStarted:s,isReadonly:i}=e,{t:l}=(0,m.Bd)("workspace"),c=(0,o._)(),{data:d}=(0,W.UL)(a),u=(0,n.useMemo)(()=>{var e;return null!=(e=null==d?void 0:d.assets)?e:[]},[null==d?void 0:d.assets]),p=(0,n.useRef)(null),x=(0,n.useCallback)(()=>{var e;null==(e=p.current)||e.click()},[]),h=(0,eo.x)(a),{mutate:g,error:f}=(0,W.Iv)(a);(0,U.Y)("attach-dropdown:upload",f);let{mutate:v,error:b}=(0,W.PQ)(a);(0,U.Y)("attach-dropdown:uploadThirdParty",b);let{mutate:j,error:y}=(0,W.mT)(a);(0,U.Y)("attach-dropdown:attachAsset",y);let w=(0,n.useCallback)(e=>{if(null==s||s(),u.length+e.length>el.aD){h(),c("ws_max_files_alert",void 0,{location:"file-upload"});return}e.forEach(e=>g(e))},[s,u.length,h,c,g]),k=(0,n.useCallback)(e=>{e.target.files&&(null==s||s(),w(Array.from(e.target.files)))},[s,w]),N=(0,n.useCallback)(()=>(0,r.jsx)("input",{ref:p,className:"hidden",type:"file",onChange:k,multiple:!0,"data-testid":"file-input"}),[k]),{data:C}=(0,W.qN)(),S=null!=(t=null==C?void 0:C.assets)?t:[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ei.z,{label:l("workspace-assets.attach","Attach"),inlineLabel:!0,handleClickUpload:x,onAttachAsset:e=>{if(e&&(null==s||s(),!u.some(t=>t.assetId===e.assetId))){if(u.length+1>el.aD){h(),c("ws_max_files_alert",void 0,{location:"attach-asset"});return}j(e)}},assets:S,handleUploadThirdParty:(e,t,a,s)=>{if(!u.some(e=>e.thirdPartyFileId===s)){if(u.length+1>el.aD){h(),c("ws_max_files_alert",void 0,{location:"attach-3rd-party"});return}v({name:e,mimeType:t,fileSource:a,thirdPartyFileId:s})}},className:"w-auto me-[1px]",attachFiles:w,disabled:i,tooltipContent:i&&l("project-asset-button.readonly-tooltip","You don't have permissions to attach files")}),N()]})}var ed=a(83638),eu=a(98868),em=a(19841);function ep(e){var t,a;let s=(0,o._)(),{conversation:i,action:l,onActionRequest:c}=e,d=null!=(t=i.conversationId)?t:"",[u,m]=(0,n.useState)(!1),[p,x]=(0,n.useState)(null!=(a=i.title)?a:""),[h,g]=(0,n.useState)(!1),[f,v]=(0,n.useState)(""),{routeToConversation:b}=(0,$.o)();(0,n.useEffect)(()=>{var e;x(null!=(e=i.title)?e:"")},[l]);let{mutate:j,error:y}=(0,W.Fx)(d);(0,U.Y)("list-item:delete",y),(0,n.useEffect)(()=>{y&&g(!1)},[y]);let{mutate:w,error:k}=(0,W.jT)(d);(0,U.Y)("list-item:update",k),(0,n.useEffect)(()=>{k&&v("")},[k]);let N=(0,n.useCallback)(e=>{b(e)},[b]);if(h)return null;let C=f?{...i,title:f}:i;return(0,r.jsx)("div",{className:"h-[48px] rounded-2xl grid grid-cols-1 grid-rows-1 hover:bg-button-ghost-hover",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,r.jsx)(em.w,{isCurrent:!1,isSelected:u,isHovered:u,isDeleting:"delete"===l,isEditing:"edit"===l,newTitle:p,onNewTitleChange:x,conversation:C,className:"p-4 rounded-2xl ",onDeleteStart:()=>c(d,"delete"),onEditStart:()=>c(d,"edit"),onDeleteConfirm:()=>{s("delete_conversation",d,{location:"workspace"}),c(d,null),g(!0),j()},onCancel:()=>c(d,null),onEditSave:()=>{s("update_conversation",d,{location:"workspace"}),c(d,null);let e=p.trim();v(e),w({title:e})},onSelect:N})})}function ex(e){let{conversations:t}=e,{t:a}=(0,m.Bd)("workspace"),[s,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(null),c=(0,n.useCallback)((e,t)=>{i(t),o(e)},[]);return 0===t.length?(0,r.jsx)(J,{icon:(0,r.jsx)(eu.A,{size:24,strokeWidth:1.5}),title:a("workspace-conversations-list.empty.label","No conversations yet"),subtitle:a("workspace-conversations-list.empty.cta","Start a new conversation in this project by typing in the input box at the top.")}):(0,r.jsx)("div",{children:t.map(e=>{let t=e.conversationId;return(0,r.jsx)(ep,{conversation:e,action:l===t?s:null,onActionRequest:c},t)})})}function eh(e){var t;let{t:a}=(0,m.Bd)("workspace"),{workspace:s}=e,{workspaceId:i}=s,{data:l,isPending:o,isError:c,fetchNextPage:d,hasNextPage:u,isFetchingNextPage:p,refetch:x}=(0,W.fY)(null!=i?i:""),h=(0,n.useCallback)(()=>{u&&!p&&d()},[u,p,d]),g=(0,ed.B)(h);if(o)return(0,r.jsx)(ef,{});let f=null!=(t=null==l?void 0:l.pages.flatMap(e=>{var t;return null!=(t=e.conversations)?t:[]}))?t:[];return(0,r.jsxs)(Q.D,{fadeSize:"md",className:"py-2",children:[(0,r.jsx)(ex,{conversations:f}),u&&!c&&(0,r.jsx)("div",{ref:g,className:"h-10 flex items-center justify-center",children:p?a("workspace-conversations-loading-more","Loading more…"):a("workspace-conversations-scroll-to-load","Scroll to load more")}),c&&(0,r.jsx)(eg,{onRefetch:x})]})}function eg(e){let{onRefetch:t}=e,{t:a}=(0,m.Bd)("workspace");return(0,r.jsxs)(l.Zp,{className:"flex flex-col items-center px-8 py-4",variant:"ghost",children:[a("conversations-loading-error.title","Unable to load conversations"),(0,r.jsx)(i.$n,{variant:"outline",onClick:t,children:a("conversations-loading-error.cta","Retry")})]})}function ef(){return(0,r.jsx)(z.P,{children:(0,r.jsxs)("div",{role:"status","aria-busy":"true",className:"flex flex-col gap-1",children:[(0,r.jsx)(R.E,{className:"w-full h-10"}),(0,r.jsx)(R.E,{className:"w-full h-10"}),(0,r.jsx)(R.E,{className:"w-full h-10"})]})})}var ev=a(99667),eb=a(10986),ej=a(34500),ey=a(41320),ew=a(14267);function ek(e){var t,a;let{workspace:s,className:l}=e,{t:c}=(0,m.Bd)("workspace"),u=(0,o._)(),[p,x]=(0,n.useState)(!1),h=null!=(t=s.isReadonly)&&t,g=(0,d.cn)("group flex flex-col h-auto items-start rounded-2xl text-start p-4 bg-surface-l1 border-l1 dark:hover:bg-surface-l2 hover:bg-surface-l4-hover",l),f=null!=(a=s.customPersonality)?a:"",[v,b]=(0,n.useState)(f);(0,n.useEffect)(()=>{b(f)},[f]);let y=(0,n.useId)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.$n,{variant:"outline",className:g,onClick:()=>{x(e=>!e),u("ws_instructions_click",void 0,{location:"section"})},children:[(0,r.jsxs)("div",{className:"flex gap-2 font-bold items-center",children:[(0,r.jsx)(ew.A,{size:16,className:"text-fg-secondary group-hover:text-fg-primary transition-colors duration-100"}),c("workspace-intruction-button.label","Instructions")]}),(0,r.jsx)("div",{className:"text-fg-secondary w-full truncate",children:s.customPersonality||(0,r.jsx)("span",{className:"italic",children:c("workspace-intruction-button.empty","Set up instructions for Grok in this project")})})]}),(0,r.jsxs)(eN,{open:p,onOpenChange:x,children:[(0,r.jsx)("label",{className:"sr-only",htmlFor:y,children:c("workspace-instruction.title","Custom instructions")}),(0,r.jsx)(ev.q,{value:v,onChange:b,isDirty:f!==v,onSave:e=>{var t;b(e);let{updateWorkspace:a}=j.M.getState();a(null!=(t=s.workspaceId)?t:"",{customPersonality:e}),x(!1)},onReset:()=>{b(f),x(!1)},disabled:h,textareaId:y,minRows:8,maxRows:16,autoFocus:!1})]})]})}function eN(e){let{open:t,onOpenChange:a,children:s}=e,n=(0,ey.Di)(),{t:l}=(0,m.Bd)("workspace");return n?(0,r.jsx)(ej._s,{open:t,onOpenChange:a,children:(0,r.jsxs)(ej.zj,{className:(0,d.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-3xl","flex flex-col","md:overflow-hidden","px-6 py-6"),"aria-describedby":void 0,children:[(0,r.jsx)(ej.BE,{children:(0,r.jsxs)(ej.gk,{className:"flex h-10 items-center justify-between",children:[l("workspace-instructions-modal.title","Project Instructions"),(0,r.jsx)(i.$n,{variant:"ghost",size:"icon","aria-label":l("workspace-instructions-close.label","Close"),onClick:()=>a(!1),tabIndex:-1,children:(0,r.jsx)(y.A,{size:18,className:"text-secondary"})})]})}),s]})}):(0,r.jsxs)(eb.wv,{open:t,onOpenChange:a,children:[(0,r.jsxs)(eb.ps,{children:[(0,r.jsx)(eb.ex,{children:l("workspace-instructions-modal.title","Project Instructions")}),(0,r.jsx)(eb.UT,{})]}),(0,r.jsx)(eb.Ry,{children:s})]})}function eC(e){var t,a;let{open:s,onOpenChange:l,workspace:o}=e,{t:c}=(0,m.Bd)("workspace"),u=null!=(t=o.customPersonality)?t:"",p=null!=(a=o.isReadonly)&&a,[x,h]=(0,n.useState)(u);(0,n.useEffect)(()=>{h(u)},[u,s]);let g=(0,n.useId)();return(0,r.jsxs)(b.R,{open:s,setOpen:l,contentClassName:(0,d.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-3xl","flex flex-col","md:overflow-hidden","px-6 py-6"),titleClassName:"flex justify-between text-lg",title:(0,r.jsxs)(r.Fragment,{children:[c("workspace-instructions-modal.title","Project Instructions"),(0,r.jsx)(i.$n,{className:"-mt-2 -mr-2",variant:"ghost",size:"icon","aria-label":c("workspace-instructions-close.label","Close"),onClick:()=>l(!1),tabIndex:-1,children:(0,r.jsx)(P.uv,{size:18,className:"text-secondary"})})]}),description:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{children:c("workspace-instruction.description","Grok will follow the instructions for all conversations in this project.")}),p&&(0,r.jsx)("span",{children:c("workspace-instruction.description-readonly-note","You don't have permissions to change instructions")})]}),children:[(0,r.jsx)("label",{className:"sr-only",htmlFor:g,children:c("workspace-instruction.title","Custom instructions")}),(0,r.jsx)(ev.q,{value:x,onChange:h,isDirty:u!==x,onSave:e=>{var t;h(e);let{updateWorkspace:a}=j.M.getState();a(null!=(t=o.workspaceId)?t:"",{customPersonality:e}),l(!1)},onReset:()=>{h(u),l(!1)},disabled:p,textareaId:g})]})}function eS(e){let{workspace:t,className:a}=e,{t:s}=(0,m.Bd)("workspace"),l=(0,o._)(),[c,u]=(0,n.useState)(!1),p=(0,d.cn)("group flex flex-col h-auto items-start rounded-2xl text-start p-4 bg-surface-l1 border-l1 dark:hover:bg-surface-l2 hover:bg-surface-l4-hover",a);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.$n,{variant:"outline",className:p,onClick:()=>{u(!0),l("ws_instructions_click",void 0,{location:"section"})},children:[(0,r.jsxs)("div",{className:"flex gap-2 font-bold items-center",children:[(0,r.jsx)(ew.A,{size:16,className:"text-fg-secondary group-hover:text-fg-primary transition-colors duration-100"}),s("workspace-intruction-button.label","Instructions")]}),(0,r.jsx)("div",{className:"text-fg-secondary w-full truncate",children:t.customPersonality||(0,r.jsx)("span",{className:"italic",children:s("workspace-intruction-button.empty","Set up instructions for Grok in this project")})})]}),(0,r.jsx)(eC,{workspace:t,open:c,onOpenChange:u})]})}var eI=a(52553),eA=a(92437);function eP(e){let{onDrop:t,className:a}=e,{t:s}=(0,m.Bd)("workspace"),i=(0,o._)(),{attachFiles:l}=(0,eI.S)(),c=(0,n.useRef)(null),d=(0,n.useCallback)(e=>{null==t||t(),l(e),e.forEach(e=>{i("upload_file",e.name,{location:"workspace-query-file-drop",mimeType:e.type})})},[l,t,i]),u=(0,eA.t)({ref:c,onDrop:d});return(0,r.jsx)(eA.u,{ref:c,dragState:u,title:s("workspace-query-dropzone.title","Attach to message"),subtitle:s("workspace-query-dropzone.description","Drop here to add files to your message"),className:a})}let e_=(0,a(17338).F)("inline-flex items-center rounded-full border border-input-border px-2 py-0.5 text-[10px] font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-secondary"}},defaultVariants:{variant:"default"}});function eM(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,d.cn)(e_({variant:a}),t),...s})}var eE=a(26676);let ez=(0,n.memo)(e=>{var t;let{workspace:a,editing:s,onEditingChange:l,disabled:o}=e,{t:c}=(0,m.Bd)("workspace"),d=(0,n.useRef)(null);!function(e,t){(0,n.useEffect)(()=>{if(!e||!t.current)return;if("none"!==document.body.style.pointerEvents){var a;null==(a=t.current)||a.select();return}let s=setTimeout(()=>{var e;null==(e=t.current)||e.select()},200);return()=>clearTimeout(s)},[e,t])}(s,d);let[u,p]=(0,n.useState)(null!=(t=a.name)?t:"");(0,n.useEffect)(()=>{a.name&&p(a.name)},[a.name]);let x=(0,n.useCallback)(e=>{var t;let{updateWorkspace:s}=j.M.getState();s(null!=(t=a.workspaceId)?t:"",{name:e})},[a.workspaceId]),h=()=>{x(u),l(!1)},g=(0,n.useId)();return o?(0,r.jsx)("h1",{className:"ms-1 @sm:ms-2 flex-1 bg-transparent text-2xl focus-visible:outline-none border-b-secondary min-w-0 truncate group",children:u}):s?(0,r.jsxs)("form",{className:"flex-1 flex gap-2 justify-between items-center min-w-0",onSubmit:e=>{e.preventDefault(),h()},children:[(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:c("workspace-name-save.announce","Editing project name")}),(0,r.jsx)("input",{"aria-label":c("workspace-name-input.label","Project name"),type:"text",value:u,onChange:e=>{p(e.target.value)},onKeyDown:e=>{if("Escape"===e.key){var t;l(!1),p(null!=(t=a.name)?t:"")}},onBlur:()=>{},className:"flex-1 px-1 @sm:px-2 text-2xl focus-visible:outline-none bg-input-background py-1 rounded-xl",id:g,ref:d,autoFocus:!0}),(0,r.jsx)(i.$n,{variant:"ghostSecondary",size:"iconMd",rounded:!0,"aria-label":c("workspace-name-save.label","Save"),type:"submit",disabled:!u,children:(0,r.jsx)(w.A,{size:16})})]}):(0,r.jsxs)("h1",{role:"button",tabIndex:0,"aria-expanded":"false",onClick:()=>{l(!0)},className:"ms-1 @sm:ms-2 flex-1 bg-transparent text-2xl focus-visible:outline-none border-b-secondary min-w-0 truncate group",children:[u,(0,r.jsx)(f.A,{size:16,className:"hidden @sm:inline ms-1 @sm:ms-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-fg-secondary"})]})}),eT=(0,n.memo)(function(e){let{workspace:t}=e,{t:a}=(0,m.Bd)("workspace"),{push:s}=(0,c.wK)(),[i,l]=(0,n.useState)(!1),o=(0,n.useCallback)(e=>{var a;let{updateWorkspace:s}=j.M.getState();s(null!=(a=t.workspaceId)?a:"",{icon:e})},[t.workspaceId]);return(0,r.jsx)("div",{className:"flex flex-col @sm:flex-row items-start @sm:items-center gap-6 @sm:gap-2 w-full",children:(0,r.jsxs)("div",{className:"flex-1 flex items-center justify-start min-w-0 w-full",children:[(0,r.jsx)(eE.n,{icon:t.icon,onChange:o,disabled:t.isReadonly}),(0,r.jsx)(ez,{workspace:t,editing:i,onEditingChange:l,disabled:t.isReadonly}),t.isReadonly?(0,r.jsx)(eM,{variant:"outline",children:a("workspace.readOnly","Read-only")}):(0,r.jsx)(M,{workspace:t,className:"m-[1px] ms-1 @sm:ms-2",iconSize:16,onDeleteStarted:()=>{s({page:"workspaces"})},onEditStarted:()=>{l(!0)}})]})})});function eD(e){var t;let{onDrop:a,className:s,workspaceId:i,disabled:l}=e,{t:c}=(0,m.Bd)("workspace"),d=(0,o._)(),{mutate:u,error:p}=(0,W.Iv)(i);(0,U.Y)("workspace-drop-zone:upload",p);let x=(0,eo.x)(i),{data:h}=(0,W.UL)(i),g=null!=(t=null==h?void 0:h.assets)?t:[],f=(0,n.useRef)(null),v=(0,n.useCallback)(e=>{if(null==a||a(),g.length+e.length>el.aD){x(),d("ws_max_files_alert",void 0,{location:"workspace-file-drop"});return}e.forEach(e=>(d("upload_file",e.name,{location:"workspace-file-drop",mimeType:e.type}),u(e)))},[g.length,a,x,d,u]),b=(0,eA.t)({ref:f,onDrop:v});return l?null:(0,r.jsx)(eA.u,{ref:f,dragState:b,title:c("workspace-dropzone.title","Attach to project"),subtitle:c("workspace-dropzone.description","Drop here to add files to project"),className:s})}function eR(e){var t,a;let{workspace:s}=e,{t:i}=(0,m.Bd)("chat"),l=(0,o._)(),d=(0,h.h)(),u=null!=(t=s.workspaceId)?t:"",p=null!=(a=s.isReadonly)&&a,x=(0,$.o)(),g=function(){let e=(0,o._)();return t=>e("create_workspace_convo",t,{location:"workspace-page-content:useLogCreation"})}(),{route:f,replace:v}=(0,c.wK)(),b="workspace"===f.page&&f.tab||"conversations",{mutate:j,error:y}=(0,W.tX)({onSuccess:g});(0,U.Y)("workspace",y);let w=(0,n.useCallback)(e=>{j({conversationId:e.conversationId,workspaceId:u}),x.routeToConversation(e.conversationId),l("ws_start_convo","",{location:"workspace-page-content:onCreateConversationSuccess"})},[j,x,l,u]),k=function(e,t){let a=(0,Y.aP)(X.A("establishNewConversation")),s=(0,V.C$)(X.A("isIncognito")),r=(0,h.h)();return(0,n.useCallback)(async(n,i,l,o,c,d,u)=>{let m;if(!n)return!1;r.WORKSPACE_AGENT&&(m={agenticWorkspace:{workspaceId:e}});let p=await a({message:n,fileAttachmentIds:l,webpageUrls:o,toolOverrides:c,temporary:s,isPreset:d,persona:u,enableRetries:r.ENABLE_AUTO_STREAM_RETRY,workspaceIds:[e],responseMetadata:m,ff:r}).catch(e=>{(0,G.vV)("workspace:establishNewConversation",e)});return!!p&&(t(p),!0)},[r,s,a,e,t])}(u,w);if(!u)return;let N=()=>{v({page:"workspace",workspaceId:u,tab:"attachments"})};return(0,r.jsxs)("div",{className:"flex-1 flex gap-6 h-full flex-col justify-between items-stretch overflow-hidden",children:[(0,r.jsx)(eT,{workspace:s}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto flex gap-5 flex-col @sm:flex-col-reverse",children:[(0,r.jsxs)(H.tU,{value:b,className:"flex-1 overflow-hidden flex flex-col relative pt-1",children:[d.WORKSPACE_INSTRUCTION_SIDE_PANEL?(0,r.jsx)(ek,{workspace:s,className:"mb-5"}):(0,r.jsx)(eS,{workspace:s,className:"mb-5"}),(0,r.jsxs)("div",{className:"flex justify-between sm:ms-1",children:[(0,r.jsxs)(H.j7,{className:"place-self-start !bg-transparent bg-none border-none",children:[(0,r.jsx)(H.Xi,{variant:"underline",value:"attachments",asChild:!0,children:(0,r.jsx)(c.N_,{route:{page:"workspace",workspaceId:u,tab:"attachments"},children:i("workspace-tab.attachments","Attachments")})}),(0,r.jsx)(H.Xi,{variant:"underline",value:"conversations",children:(0,r.jsx)(c.N_,{route:{page:"workspace",workspaceId:u,tab:"conversations"},children:i("workspace-tab.conversations","Conversations")})})]}),(0,r.jsx)(ec,{workspaceId:u,onFileAddStarted:N,isReadonly:p})]}),(0,r.jsx)(H.av,{value:"conversations",className:"overflow-auto pb-5",children:(0,r.jsx)(eh,{workspace:s})}),(0,r.jsx)(H.av,{value:"attachments",className:"overflow-hidden flex-1 pb-5",children:(0,r.jsx)(ea,{workspace:s})}),(0,r.jsx)(eD,{workspaceId:u,onDrop:N,disabled:p})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(F.s,{className:"",textAreaClassName:"min-h-14 pt-5 my-0 mb-5",placeholder:i("workspace-query-placeholder","Start a conversation in this project"),onQuery:k,isIncognito:!1,onFrontPage:!1,expandable:!1},"query-bar"),(0,r.jsx)(eP,{className:"z-20"})]})]})]})}function eK(e){let{workspaceId:t}=e,{t:a}=(0,m.Bd)("chat"),i=(0,j.M)(e=>e.loadWorkspace),l=(0,j.M)(e=>e.byId[t]),o=null==l?void 0:l.data;(0,K.r)(null==o?void 0:o.name),(0,n.useEffect)(()=>{l||i(t)},[l,i,t]);let[,c]=function(){let[e,t]=(0,s.Mj)("recent-workspaces",[]);return[e,(0,n.useCallback)(e=>{t(t=>t[0]===e?t:[e,...t.filter(t=>t!==e)].slice(0,4))},[t])]}();return((0,n.useEffect)(()=>{(null==o?void 0:o.workspaceId)&&c(null==o?void 0:o.workspaceId)},[o]),l&&(null==l?void 0:l.status)!=="loading")?(null==l?void 0:l.error)||!o?(0,r.jsx)(O,{children:(0,r.jsx)(D.J,{title:a("workspace-error.title","Error"),description:a("workspace-error.description","There was an issue finding ID {{workspaceId}}",{workspaceId:t}),cta:a("workspace-error.cta","Go Home")})}):(0,r.jsx)(O,{children:(0,r.jsxs)(T.t,{fallbackRender:()=>(0,r.jsx)(D.J,{title:a("workspace-error.title","Error"),description:a("workspace-unexpected-error.description","Something went wrong"),cta:a("workspace-error.cta","Go Home")}),children:[(0,r.jsx)(eR,{workspace:o}),";"]})}):(0,r.jsx)(O,{children:(0,r.jsx)(z.P,{children:(0,r.jsxs)("div",{className:"gap-2 flex flex-col",children:[(0,r.jsx)(R.E,{className:"h-10 w-full"}),(0,r.jsx)(R.E,{className:"h-10 w-full"}),(0,r.jsx)(R.E,{className:"h-10 w-full"})]})})})}var eL=a(35021),eB=a(19717),eO=a(3209);function eF(e){let{variant:t,onClick:a,className:s}=e,{t:n}=(0,m.Bd)("workspace"),{add:l,isPending:o}=(0,eO.O)(),c="square"===t,u=(0,d.cn)(s);return(0,r.jsxs)(i.$n,{variant:"outline",size:c?"iconMd":"md",className:u,onClick:()=>{null==a||a(),l()},"aria-busy":o,"aria-label":o?n("add-workspace-button.pending","Creating project"):n("add-workspace-button.description","Add new project"),children:[o?(0,r.jsx)(eL.A,{className:"animate-spin",size:16,"aria-hidden":!0}):(0,r.jsx)(eB.A,{size:16,"aria-hidden":!0}),(0,r.jsx)("span",{className:"hidden sm:block",children:c||n("add-workspace-button.label","Add")})]})}var eH=a(40938);function e$(e){let{className:t}=e,a=(0,o._)(),{t:s}=(0,m.Bd)("workspace"),i=(0,j._)(),c=(0,j.M)(e=>e.loadFirstPage),u=(0,j.M)(e=>e.listPageToken);(0,n.useEffect)(()=>{0===i.length&&c()},[c,i.length]);let p=(0,j.M)(e=>e.listStatus),x=(0,j.M)(e=>e.loadNextPage),h=(0,n.useCallback)(()=>{u&&"loading"!==p&&x()},[u,p,x]),g=(0,ed.B)(h);if("loading"===p&&0===i.length)return(0,r.jsx)(eW,{});if("error"===p)return(0,r.jsx)(eU,{onRetry:c});let f=(0,d.cn)("pb-8",t);if(0===i.length)return(0,r.jsxs)(l.Zp,{variant:"ghost",className:"p-6 flex flex-col items-center",children:[(0,r.jsx)(P.XR,{size:16,className:"text-secondary"}),(0,r.jsx)("div",{children:s("workspace-list-empty.title","No projects yet")}),(0,r.jsx)("div",{className:"text-secondary",children:s("workspace-list-empty.subtitle","Create a new project")})]});let v=()=>{a("ws_nav_click",void 0,{location:"workspaces"})};return(0,r.jsxs)("div",{"data-testid":"workspaces-list",className:f,children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:i.map(e=>(0,r.jsx)(E,{workspace:e,onClick:v},e.workspaceId))}),u&&(0,r.jsx)("div",{ref:g,className:"text-center mt-8",children:"loading"===p?s("workspaces-loading.label","Loading more…"):s("workspaces-scrollto.label","Scroll to load more")})]})}function eU(e){let{onRetry:t}=e,{t:a}=(0,m.Bd)("workspace");return(0,r.jsxs)(l.Zp,{variant:"ghost",className:"p-8 flex flex-col gap-4 items-center text-center",children:[(0,r.jsx)(eH.A,{className:"size-4"}),a("workspaces-error.description","An issue occurred when loading your projects"),(0,r.jsx)(i.$n,{variant:"outline",className:"shadow-none",onClick:t,children:a("workspaces-error.cta","Try again")})]})}function eW(){return(0,r.jsx)(z.P,{children:(0,r.jsxs)("div",{className:"flex flex-col @sm:flex-row gap-3",children:[(0,r.jsx)(eG,{}),(0,r.jsx)(eG,{}),(0,r.jsx)(eG,{})]})})}function eG(){return(0,r.jsxs)(l.Zp,{variant:"ghost",className:"flex-1 rounded-xl p-4 flex @sm:flex-col items-center  @sm:items-start gap-4",children:[(0,r.jsx)(R.E,{className:"bg-surface-l1 w-8 h-8 rounded-full"}),(0,r.jsx)(R.E,{className:"bg-surface-l1 w-32 h-4"})]})}function eV(){let e=(0,o._)(),{t}=(0,m.Bd)("workspace");return(0,K.r)(t("workspaces-page-title","Projects")),(0,r.jsx)(O,{children:(0,r.jsxs)("main",{className:"w-full h-full flex flex-col",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex justify-between align-center my-6 min-h-[42px]",children:[(0,r.jsx)("h1",{className:"text-2xl flex gap-2 items-center font-semibold",children:t("workspaces-page.title","Projects")}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(eF,{onClick:()=>{e("ws_create_click",void 0,{location:"workspaces"})}})})]})}),(0,r.jsx)(Q.D,{children:(0,r.jsx)(e$,{})})]})})}},10986:(e,t,a)=>{a.d(t,{Ry:()=>g,SidePanelProvider:()=>u,UT:()=>x,ex:()=>p,ps:()=>h,wv:()=>m});var s=a(79342),n=a(88844),r=a(56691),i=a(61312),l=a(42283),o=a(88382),c=a(65146);let d=(0,o.createContext)(null);function u(e){let{children:t}=e,[a,r]=(0,o.useState)(null),i=(0,o.useCallback)(e=>{r(t=>(t&&t.id!==e.id&&t.onOpenChange(!1),e))},[]),l=(0,o.useCallback)(e=>{r(t=>t&&t.id===e?null:t)},[]);return(0,s.jsxs)(d.Provider,{value:{openPanel:i,closePanel:l,activeEntry:a},children:[t,(0,s.jsx)(n.w,{isVisible:null!==a,minWidth:200,maxWidth:800,initialWidth:400,className:"bg-background max-w-[40%] xl:max-w-none",children:null==a?void 0:a.children})]})}function m(e){let{open:t,onOpenChange:a,children:s}=e,n=(0,o.useContext)(d);if(!n)throw Error("SidePanel must be used within a SidePanelProvider");let{openPanel:r,closePanel:i}=n,l=(0,o.useId)();return(0,o.useEffect)(()=>()=>{i(l)},[l,i]),(0,o.useEffect)(()=>{t?r({id:l,children:s,onOpenChange:a}):i(l)},[t,l,s,a,r,i]),null}function p(e){let{className:t,children:a}=e,n=(0,i.cn)("flex-1 truncate text-base font-semibold",t);return(0,s.jsx)("div",{className:n,children:a})}function x(e){let{children:t,onClick:a,...n}=e,{t:i}=(0,c.Bd)("base"),u=(0,o.useContext)(d);if(!u)throw Error("SidePanelCloseButton must be used within a SidePanelProvider");let{activeEntry:m,closePanel:p}=u;return(0,s.jsx)(r.$n,{variant:"ghost",size:"icon","aria-label":i("side-panel-close-button.label","Close side panel"),onClick:e=>{m&&(m.onOpenChange(!1),p(m.id),null==a||a(e))},...n,children:t||(0,s.jsx)(l.A,{className:"h-5 w-5"})})}function h(e){let{children:t,className:a}=e,n=(0,i.cn)("flex z-10 flex-row items-center justify-between flex-shrink-0 w-full px-2 md:px-5 sticky top-0 h-12 md:h-16 via-80%",a);return(0,s.jsx)("div",{className:n,children:t})}function g(e){let{children:t}=e;return(0,s.jsx)("div",{className:"px-4 pb-2",children:t})}},12001:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(79342),n=a(72712);let r=e=>(0,s.jsx)(n.I,{viewBox:"-0.5 -0.5 15 15",...e,children:(0,s.jsx)("path",{d:"M7.23047 1.26183C7.86569 0.082389 9.45799 -0.151271 10.4053 0.796012L13.2041 3.59484C14.1514 4.54211 13.9177 6.1344 12.7383 6.76964L11.1338 7.6339C10.5893 7.9271 10.2112 8.45562 10.1094 9.06554L9.62207 11.9874L8.33301 13.2765L5 9.9425L2.1377 12.8019L1 13.0001L1.19824 11.8614L4.05664 9.00011L0.723633 5.66711L2.0127 4.37804L4.93359 3.89074C5.54368 3.78906 6.07294 3.41087 6.36621 2.86632L7.23047 1.26183Z",fill:"currentColor"})})},12065:(e,t,a)=>{a.d(t,{c:()=>l});var s=a(23232),n=a(24734),r=a(49972),i=a(88382);function l(){let e=(0,n.K)(),t=(0,s._)();return{handlePinConversation:(0,i.useCallback)((a,s,n)=>{let{fetchUpdateConversation:i}=r.w.getState();i(a,{starred:s}).catch(t=>{e("app-sidebar:handlePinConversation",t)}),t("update_conversation_pinned",a,{location:n})},[e,t])}}},16454:(e,t,a)=>{a.d(t,{_:()=>g});var s=a(79342),n=a(60065),r=a(23232),i=a(61312),l=a(58711),o=a(33846),c=a(74995),d=a(88382),u=a(65146),m=a(42557),p=a(5790),x=a(56691),h=a(38997);let g=e=>{let{className:t}=e,{t:a}=(0,u.Bd)("upsell"),g=(0,l.e)(c.A("setIsUpselling")),f=(0,p.iV)(c.A("setOpen")),v=(0,m.wV)(),b=(0,r._)(),j=d.useCallback(()=>{b("upsell_card_clicked",v.countryCode,{location:"upsell-card",countryCode:v.countryCode||""}),g(!0),f(!1)},[b,v.countryCode,g,f]);return(0,s.jsxs)(o.P.div,{role:"button",className:(0,i.cn)("relative px-4 py-3.5 w-full items-center bg-black text-xs text-white border cursor-pointer","border-card rounded-3xl group text-left flex gap-4 dark -mb-10 sm:-mb-4 transition-all","duration-300 ease-in-out","hover:scale-[1.01] will-change-transform",t),onClick:j,children:[(0,s.jsx)(n.I,{starDensity:.001,className:"rounded-[23px]"}),(0,s.jsx)("div",{className:"absolute inset-0 flex justify-center top-0 overflow-hidden rounded-[23px]",children:(0,s.jsx)("div",{className:"size-80 bg-red-500 bg-gradient-to-r from-sunset via-breeze to-cobalt aspect-square opacity-10 absolute bottom-4 blur-[32px] rounded-full"})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 sm:items-center z-10 mb-0.5",children:[(0,s.jsx)(h.jI,{}),(0,s.jsx)("p",{className:"text-muted-foreground ms-1 sm:ms-0 ",children:a("Fewer rate limits, more capabilities","Fewer rate limits, more capabilities")})]}),(0,s.jsx)(x.$n,{variant:"filled",rounded:!0,className:"ms-auto z-10",children:a("Go Super","Go Super")})]})}},19841:(e,t,a)=>{a.d(t,{w:()=>w});var s=a(79342),n=a(39945),r=a(18585),i=a(56691),l=a(75500),o=a(41320),c=a(2376),d=a(87206),u=a(5862),m=a(61312),p=a(83123),x=a(61683),h=a(91807),g=a(82263),f=a(32171),v=a.n(f),b=a(88382),j=a(65146);function y(e){let{conversation:t,onEditStart:a,onDeleteStart:r}=e,{t:l}=(0,j.Bd)("base"),c=(0,o.Di)(),d=(0,b.useCallback)(e=>{e.stopPropagation(),window.open("/chat/".concat(t.conversationId),"_blank")},[t.conversationId]),u=(0,b.useCallback)(e=>{e.stopPropagation(),a(t.conversationId)},[a,t.conversationId]),m=(0,b.useCallback)(e=>{e.stopPropagation(),r(t.conversationId)},[r,t.conversationId]);return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[!c&&(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:d,tooltipContent:l("New Tab","New Tab"),"aria-label":l("New Tab","New Tab"),children:(0,s.jsx)(n.TC,{size:16,className:"text-primary"})}),(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:u,tooltipContent:l("Rename","Rename"),"aria-label":l("Rename","Rename"),children:(0,s.jsx)(n.rZ,{size:16,className:"text-primary"})}),(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm","aria-label":l("Delete","Delete"),onClick:m,tooltipContent:l("Delete","Delete"),children:(0,s.jsx)(n.uc,{size:16,className:"text-primary"})})]})}let w=(0,b.memo)(e=>{var t;let{conversation:a,highlight:n,matchType:i,matchedWords:d,isEditing:u,isDeleting:p,isSelected:x,isCurrent:g,isHovered:f,newTitle:w,onNewTitleChange:A,onSelect:P,onEditStart:_,onDeleteStart:M,onToggleFavorite:E,onEditSave:z,onDeleteConfirm:T,onCancel:D,className:R}=e,{t:K}=(0,j.Bd)("base"),L=(0,l.h)(),B=(0,o.Di)(),O=(0,b.useMemo)(()=>a.title?a.title:a.createTime?K("conversation-missing-title","Chat on {{date}}",{date:new Date(a.createTime).toLocaleDateString()}):K("Untitled Chat","Untitled Chat"),[a,K]),F=(0,b.useMemo)(()=>"MATCH_MESSAGE"===i&&!!n,[i,n]),H=(0,b.useCallback)(()=>{z(a.conversationId)},[z,a.conversationId]),$=(0,b.useCallback)(e=>{e.stopPropagation(),"Enter"===e.key?H():"Escape"===e.key&&D()},[H,D]),U=(0,b.useCallback)(()=>{T(a.conversationId)},[T,a.conversationId]),{personaById:W}=(0,c.v5)(),G=(0,b.useMemo)(()=>{if(!(0,c.sS)(a.personaId))return;let e=W[a.personaId];if(e)return{...e,...(0,r.e8)(e.personaId)}},[a.personaId,W]),V=(0,b.useCallback)(e=>{P&&(1===e.button||e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),P(a.conversationId)))},[P,a.conversationId]);return(0,s.jsxs)(s.Fragment,{children:[!u&&(0,s.jsx)(v(),{href:"/chat/".concat(a.conversationId),className:"col-start-1 col-end-2 row-start-1 row-end-2 block z-10",onClick:V}),(0,s.jsxs)("div",{className:(0,m.cn)("flex cursor-pointer items-center gap-2 px-3 col-start-1 col-end-2 row-start-1 row-end-2",R),children:[u?(0,s.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:w,onKeyDown:$,autoFocus:!0,onChange:e=>{A(e.target.value)}}):(0,s.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[G?(0,s.jsx)("span",{className:(0,m.cn)("[&>svg]:h-4 [&>svg]:w-4",G.colorClassName),children:G.icon}):!!((null==(t=a.mediaTypes)?void 0:t.includes("audio"))&&L.ENABLE_VOICE_MODE)&&(0,s.jsx)(h.A,{className:"text-secondary h-4 w-4 shrink-0"}),(0,s.jsx)("div",{className:"truncate text-primary",children:"MATCH_TITLE"===i?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||0===t.length||"string"!=typeof e)return e;let a=t.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),n=RegExp("(".concat(a,")"),"gi"),r=e.split(n);return 1===r.length?e:r.map((e,t)=>t%2==1?(0,s.jsx)("span",{className:"text-primary font-extrabold",children:e},t):e)}(O,d):O}),g&&(0,s.jsx)(k,{children:K("Current","Current")})]}),F&&(0,s.jsx)(I,{text:n,matchedWords:d||[],className:"text-xs text-secondary mt-0.5 truncate"})]}),(0,s.jsx)("div",{className:"z-20",children:(x&&f||B)&&!u&&!p?(0,s.jsx)(y,{conversation:a,onEditStart:_,onDeleteStart:M,onToggleFavorite:E}):u?(0,s.jsx)(N,{onCancel:D,onSave:H}):p?(0,s.jsx)(C,{onCancel:D,onConfirm:U}):(0,s.jsx)(S,{conversation:a})})]})]})});function k(e){let{children:t}=e;return(0,s.jsx)("span",{className:(0,m.cn)("border border-border-l2 px-2 rounded-full","text-sm text-secondary flex flex-row items-center gap-1 text-nowrap"),children:t})}function N(e){let{onCancel:t,onSave:a}=e,{t:r}=(0,j.Bd)("base");return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:e=>{e.stopPropagation(),t()},tooltipContent:r("Cancel","Cancel"),"aria-label":r("Cancel","Cancel"),children:(0,s.jsx)(n.uv,{size:16,className:"text-fg-primary"})}),(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:e=>{e.stopPropagation(),a()},tooltipContent:r("Save","Save"),"aria-label":r("Save","Save"),children:(0,s.jsx)(g.A,{size:16,className:"text-primary"})})]})}function C(e){let{onCancel:t,onConfirm:a}=e,{t:r}=(0,j.Bd)("base");return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:e=>{e.stopPropagation(),t()},tooltipContent:r("Cancel","Cancel"),"aria-label":r("Cancel","Cancel"),children:(0,s.jsx)(n.uv,{size:16,className:"text-fg-primary"})}),(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:e=>{e.stopPropagation(),a()},tooltipContent:r("Delete","Delete"),"aria-label":r("Delete","Delete"),children:(0,s.jsx)(n.uc,{size:16,className:"text-red-400"})})]})}function S(e){let{conversation:t}=e,a=(0,b.useMemo)(()=>(0,u.JU)(t.modifyTime),[t.modifyTime]),n=(0,b.useMemo)(()=>{if(t.modifyTime||t.createTime)return function(e,t){let a=new Date(e);if("this-year"===t)return a.toLocaleDateString(x.Ay.language,{day:"numeric",month:"short"});{if("older"===t)return a.toLocaleDateString(x.Ay.language,{day:"numeric",month:"short",year:"numeric"});let s=(0,p.a)(e,new Date,{unit:"day",locale:"en"}),n="day";return"today"===s&&(n=void 0),"yesterday"===s&&(n="hour"),(0,d.B)((0,p.a)(e,new Date,{unit:n,locale:x.Ay.language}))}}(t.modifyTime||t.createTime,a||"older")},[t.modifyTime,t.createTime,a]);return n?(0,s.jsx)("span",{className:(0,m.cn)("text-secondary whitespace-nowrap ml-2 hidden text-sm","md:inline md:group-hover/item:hidden","md:group-focus/item:hidden md:group-active/item:hidden"),children:n}):null}function I(e){let{text:t,matchedWords:a,className:n}=e;if(!t||!(null==a?void 0:a.length))return(0,s.jsx)(s.Fragment,{children:t});let r=a.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),i=RegExp("(".concat(r,")"),"gi"),l=t.split(i);return(0,s.jsx)("div",{className:n,children:l.map((e,t)=>a.some(t=>t.toLowerCase()===e.toLowerCase())?(0,s.jsx)("span",{className:(0,m.cn)("text-primary font-bold"),children:e},t):(0,s.jsx)(b.Fragment,{children:e},t))})}},26676:(e,t,a)=>{a.d(t,{n:()=>g});var s=a(79342),n=a(3547),r=a(39945),i=a(56691),l=a(34500),o=a(1826),c=a(41320),d=a(61312),u=a(42283),m=a(88382),p=a(65146),x=a(31651),h=a(47095);let g=(0,m.memo)(e=>{let{icon:t,sizeClass:a="size-6",rounded:g=!1,buttonSize:f="iconMd",onChange:v,disabled:b=!1}=e,{t:j}=(0,p.Bd)("workspace"),[y,w]=(0,m.useState)(!1),k=(0,c.Di)();(0,m.useEffect)(()=>{w(!1)},[t]);let N=(0,m.useCallback)(e=>{w(!1),null==v||v((0,x.K)(e))},[v]),C=(0,s.jsx)(i.$n,{variant:"ghost",size:f,rounded:g,overideIconStyle:!0,className:"text-2xl","aria-label":j("workspace-icon.change","Change icon"),children:(0,s.jsx)(h.O,{icon:t,className:a})});return b?(0,s.jsx)("div",{className:(0,d.cn)((0,i.ru)({size:f,rounded:g}),"cursor-default"),children:(0,s.jsx)(h.O,{icon:t,className:a})}):k?(0,s.jsxs)(l._s,{open:y,onOpenChange:w,children:[(0,s.jsx)(l.Uz,{asChild:!0,children:C}),(0,s.jsxs)(l.zj,{className:"p-1 max-h-[70dvh]",children:[(0,s.jsxs)(l.BE,{className:"text-left flex justify-between items-center ",children:[(0,s.jsxs)(l.gk,{className:"flex gap-2",children:[(0,s.jsx)(r.XR,{size:16,className:"text-secondary"}),j("workspace-icon-drawer.title","Pick new icon")]}),(0,s.jsx)(i.$n,{variant:"ghostSecondary","aria-label":j("close","Close"),onClick:()=>w(!1),children:(0,s.jsx)(u.A,{size:16})})]}),(0,s.jsx)(n.ar,{onSelect:N})]})]}):(0,s.jsxs)(o.AM,{open:y,onOpenChange:w,children:[(0,s.jsx)(o.Wv,{asChild:!0,children:C}),(0,s.jsx)(o.hl,{className:"p-0 border",align:"start",children:(0,s.jsx)(n.ar,{onSelect:N})})]})})},31651:(e,t,a)=>{a.d(t,{K:()=>n,c:()=>r});var s=a(3547);function n(e){return"l:".concat(e.icon,":").concat(e.color)}function r(e){let t=RegExp("^l:(?<icon>[^:]+):(?<color>[^:]+)$"),a=e.match(t);if(null==a?void 0:a.groups){let{color:e,icon:t}=a.groups;if(s.Tj.includes(e)&&s.Pt[t])return{color:e,icon:t}}return null}},35692:(e,t,a)=>{a.d(t,{x:()=>r});var s=a(79342),n=a(61312);function r(e){let{className:t,variant:a="reg"}=e;return(0,s.jsx)("div",{className:(0,n.cn)("h-2 w-2 rounded-full bg-blue-400",{"h-1.5 w-1.5":"sm"===a},t)})}},40873:(e,t,a)=>{function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";throw Error(e)}function n(e){return null!=e}a.d(t,{O:()=>n,Z:()=>s})},41284:(e,t,a)=>{a.d(t,{e:()=>d});var s=a(79342),n=a(61312),r=a(61389),i=a(88382);let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(r.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full border border-border hover:opacity-75 transition-[opacity,width,height] duration-150",a),...i})});l.displayName=r.bL.displayName;let o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(r._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",a),...i})});o.displayName=r._V.displayName;let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(r.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full",a),...i})});c.displayName=r.H4.displayName;let d=e=>{let{className:t,textClassName:a,user:r}=e,d=(0,i.useMemo)(()=>[null==r?void 0:r.givenName,null==r?void 0:r.familyName].map(e=>null==e?void 0:e[0]).join("").substring(0,2),[r]);return(0,s.jsxs)(l,{className:t,children:[(0,s.jsx)(o,{src:null==r?void 0:r.profileImageUrl,alt:"pfp"}),(0,s.jsx)(c,{className:(0,n.cn)("bg-surface-l4 text-fg-primary shadow-sm dark:shadow-none border-border-l1",a),children:d})]})}},44566:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(23232),n=a(70526),r=a(65146),i=a(14908);function l(e){let{t}=(0,r.Bd)("workspace"),a=(0,s._)();return()=>{i.oR.error(t("files-limit-error","Max number of files allowed is {{maxNumberOfFiles}}",{maxNumberOfFiles:n.aD})),a("workspace_file_limit_exceeded",e,{location:"workspace-page-content:assets-section:useMaxFilesError",maxFiles:n.aD.toString(10)})}}},46748:(e,t,a)=>{a.d(t,{r:()=>r});var s=a(88382),n=a(65146);function r(e){let{t}=(0,n.Bd)("base");(0,s.useEffect)(()=>{document.title=e?t("browser-page-title",{defaultValue:"{{pageTitle}} - Grok",pageTitle:e}):"Grok"},[e,t])}},47095:(e,t,a)=>{a.d(t,{O:()=>l});var s=a(79342),n=a(3547),r=a(39945),i=a(31651);function l(e){let{icon:t,className:a,size:l}=e;if(!t)return(0,s.jsx)(r.XR,{className:a,size:l});let o=(0,i.c)(t);return o?(0,s.jsx)(n.Ln,{value:o,className:a,size:l}):(0,s.jsx)(r.XR,{className:a,size:l})}},51789:(e,t,a)=>{a.d(t,{q:()=>em,C:()=>ef});var s=a(79342),n=a(38614),r=a(63209),i=a(1826),l=a(97225),o=a(80354),c=a(84969),d=a(33846),u=a(88382);let m=(0,u.createContext)({collapsed:!1,setCollapsed:e=>{}}),p=()=>(0,u.useContext)(m);function x(e){let{trigger:t,content:a,hasContent:n,onClick:r}=e,{open:p}=(0,l.cL)(),[x,h]=(0,u.useState)(!1);(0,u.useEffect)(()=>{h(!1)},[n]);let g=u.cloneElement(t,{onClick:e=>{r&&r(),e.stopPropagation()}}),f=(0,u.useCallback)(()=>{h(!0)},[]);return(0,s.jsxs)(m.Provider,{value:{collapsed:x,setCollapsed:h},children:[!p&&(0,s.jsxs)(i.AM,{children:[g,(0,s.jsx)(i.hl,{className:"p-1.5 rounded-2xl flex flex-col gap-0.5 w-60 z-[50]",side:"right",align:"start",hoverOpen:!0,sideOffset:3,closeOnClick:!0,onClick:o.Y,children:a})]}),p&&g,(0,s.jsx)(c.N,{children:p&&!x&&n&&(0,s.jsx)(d.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.1,ease:"easeInOut"},style:{overflow:"hidden"},children:(0,s.jsx)(l.G,{onClickIndent:f,children:a})},"drawer-content")})]})}var h=a(39945),g=a(56691),f=a(4295),v=a(61312);function b(e){let{Icon:t}=e,{open:a}=(0,l.cL)(),{collapsed:n,setCollapsed:r}=p(),i=(0,f.c)(),o=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),a?r(!n):r(!1)},[a,n,r]);return a?(0,s.jsxs)(g.$n,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:o,"aria-label":"Toggle Menu",children:[(0,s.jsx)(t,{className:(0,v.cn)("group-hover/menu-item:hidden",i&&"hidden"),size:18}),(0,s.jsx)(h.vK,{className:(0,v.cn)("hidden group-hover/menu-item:block transition-[transform] duration-100",i&&"block",!n&&"rotate-90"),size:14})]}):(0,s.jsx)(t,{size:18})}var j=a(41320),y=a(84499);function w(e){let{icon:t,text:a,tooltip:n,route:r,onClick:o,children:c,action:m,canPopover:p,highlighted:x}=e,{open:h,setOpen:g}=(0,l.cL)(),f=(0,j.Di)(),b=(0,u.useCallback)(e=>{e.stopPropagation(),null==o||o(e),r&&f&&g(!1)},[o,f,g,r]),w=r?(0,s.jsxs)(y.N_,{className:(0,v.cn)("w-full flex flex-row gap-1",l.jy,"text-sm text-secondary",x?"bg-button-ghost-hover":"border-transparent"),route:r,onClick:b,children:[(0,s.jsx)(l.CP,{children:t}),h&&(0,s.jsx)(d.P.span,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeInOut"},children:a}),c]}):(0,s.jsxs)("div",{role:"button",tabIndex:0,"aria-label":a,className:(0,v.cn)("w-full flex flex-row justify-start gap-1 bg-background text-secondary text-sm rounded-xl",l.jy),onClick:o,children:[(0,s.jsx)(l.CP,{children:t}),h&&(0,s.jsx)(d.P.span,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeInOut"},children:a}),c]}),k=!h&&p?(0,s.jsx)(i.Wv,{asChild:!0,hoverOpen:!0,tabIndex:-1,children:w}):w;return(0,s.jsxs)(l.FX,{className:"relative",children:[(0,s.jsx)(l.Uj,{className:(0,v.cn)(r||!h?"":"hover:bg-transparent active:bg-transparent cursor-default hover:text-fg-secondary"),tooltip:n,safeArea:!0,asChild:!0,children:k}),h&&m&&(0,s.jsx)("span",{className:"absolute top-1/2 right-1.5 -translate-y-1/2",children:m})]})}var k=a(65258);class N{constructor(e,t){this.set=e,this.get=t,this.setCurrentAction=(0,k.kp)(this.set,"currentAction")}}let C=(0,k.y$)(N,"useAppSidebarStore");var S=a(92207),I=a(72712);let A=e=>(0,s.jsx)(I.I,{...e,children:(0,s.jsx)("path",{d:"M4 20L8.5 15.5M14 20L4 10L5 9L9.06551 8.32242C10.2858 8.11904 11.3433 7.36248 11.9298 6.27324L13.2256 3.86676C13.8608 2.68717 15.4534 2.45342 16.4007 3.40075L20.5993 7.59926C21.5466 8.54658 21.3128 10.1392 20.1332 10.7744L17.7268 12.0702C16.6375 12.6567 15.881 13.7142 15.6776 14.9345L15 19L14 20Z",stroke:"currentColor",strokeLinecap:"square"})});var P=a(12001),_=a(42557),M=a(35692),E=a(73772),z=a(3209),T=a(26676),D=a(75500),R=a(91102),K=a(12065),L=a(35181),B=a(24734),O=a(2280),F=a(27636),H=a(17703),$=a(40873),U=a(13027),W=a(49972),G=a(87891),V=a(73304),X=a(23232),Y=a(44347),Q=a(3683),q=a(28205),Z=a(80864),J=a(51234),ee=a(21185),et=a(84810),ea=a(38541),es=a.n(ea),en=a(91807),er=a(19717),ei=a(82263),el=a(66347),eo=a(74995),ec=a(65146),ed=a(51182),eu=a(48795);function em(){let{t:e}=(0,ec.Bd)("base"),{open:t,setOpen:a,toggleSidebar:i}=(0,l.cL)(),m=(0,D.h)(),p=(0,X._)(),f=!!(0,_.wV)().user,{handleVoiceModeEnter:k,handleVoiceModeExit:N}=(0,eu.F)({location:"app-sidebar"}),{commandPrefix:C}=(0,R.c)(),I=(0,j.Di)();(0,u.useEffect)(()=>{I&&a(!1)},[I]);let A=(0,Y.C$)(eo.A("isIncognito")),P=(0,n.aP)(e=>e.conversationMode),M=(0,W.w)(e=>e.fetchListConversations);(0,L.v)(M()),(0,L.v)(M({filterIsStarred:!0}));let E=(0,W.w)(e=>e.byId),T=(0,u.useMemo)(()=>Object.values(E).map(e=>e.conversationId),[E]),K=(0,W.w)(e=>e.fetchGetManyConversations),B=(0,u.useMemo)(()=>K(T),[T]),{data:F}=(0,L.v)(B,{preserveValue:!0}),U=(0,u.useMemo)(()=>{if(!F)return[];let e=F.filter(e=>!e.temporary).filter(e=>0===e.workspaces.length).filter(e=>!e.taskResultId);return es().sortBy(e,e=>-new Date(e.modifyTime).getTime())},[F]),{sortedBuckets:V,bucketedConversations:ea}=(0,u.useMemo)(()=>{let e=es().groupBy(U,e=>{let t=e.modifyTime;return e.starred?"Pinned":(0,q.c)(t)?"Today":(0,Z.P)(t)?"Yesterday":(0,J.x)(t)?"This Week":(0,ee.e)(t)?(0,et.GP)(t,"MMMM"):(0,et.GP)(t,"yyyy")}),t={Pinned:0,Today:1,Yesterday:2,"This Week":3,"This Month":4},a=es().sortBy(Object.keys(e),a=>{var s,n;let r=t[a];return null!=r?r:new Date(null==(n=e[a])||null==(s=n[0])?void 0:s.modifyTime).getTime()}),s=10,n=a.reduce((t,a)=>{var n,r,i;if(s<=0)return t;let l=null!=(r=null==(n=e[a])?void 0:n.length)?r:0;return l&&("Pinned"!==a&&(s-=l),s<=0?t[a]=null==(i=e[a])?void 0:i.slice(0,l+s):t[a]=e[a]),t},{});return{sortedBuckets:a,bucketedConversations:n}},[U]),{push:ei}=(0,y.wK)(),el=(0,Q.M)(e=>e.loadFirstPage);(0,u.useEffect)(()=>{el().catch((0,H.HX)("app-sidebar:load-workspaces"))},[el]);let em=(0,Q.M)((0,ed.k)(e=>e.list.map(t=>{var a;return null==(a=e.byId[t])?void 0:a.data}).filter($.O))),{route:ex}=(0,y.wK)(),ev=(0,u.useCallback)(e=>{if("chat"===ex.page){let{setOptimisticConversationId:e,setConversationId:t,setSidePanelContent:a}=n.aP.getState();e(void 0),t(void 0),a(void 0)}},[ex.page]),eb=(0,u.useCallback)(async e=>{if(("chat"===ex.page&&!ex.conversationId||"main"===ex.page)&&"voice"===P)return;let{setOptimisticConversationId:t,setConversationId:s,setSidePanelContent:r}=n.aP.getState();return t(void 0),s(void 0),r(void 0),I&&a(!1),ei({page:"chat",conversationId:null,temporary:!1}),"voice"===P&&await N(),k()},[ex,k,P,ei,N,I,a]),ej=(0,n.aP)(e=>e.conversationId),ey=(0,W.w)(e=>{var t;return!!ej&&(null==(t=e.byId[ej])?void 0:t.temporary)}),ew=(0,u.useMemo)(()=>"chat"===ex.page||"files"===ex.page?{page:"main"}:{page:"chat",conversationId:null!=ej?ej:null,temporary:ey},[ej,ey,ex.page]),ek=(0,u.useCallback)(()=>{let{setSidePanelContent:e}=n.aP.getState();e(void 0)},[]),eN=(0,u.useRef)(null),eC=(0,O.tg)({ref:eN}),{add:eS}=(0,z.O)(),eI=(0,u.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),eS().catch((0,H.HX)("app-sidebar:create-workspace"))},[eS]),eA=(0,u.useCallback)(e=>{I&&a(!1),(0,o.Y)(e)},[I,a]),eP=(0,u.useCallback)(()=>a(!0),[a]),[e_,eM]=(0,u.useState)(null);(0,u.useEffect)(()=>{if("files"===ex.page){var e;eM(null!=(e=ex.fileId)?e:null)}},[ex]);let eE=(0,G.R)(e=>{var t,a,s;if(!e_||"files"===ex.page&&ex.fileId)return null;let n=e.currentVersion[e_];return null!=(s=null==(a=e.assetsById[n])||null==(t=a.data)?void 0:t.assetId)?s:null});return(0,s.jsxs)(l.Bx,{className:(0,v.cn)("z-20 bg-surface-base border-r border-border-l1",t?"cursor-w-resize":"cursor-e-resize"),collapsible:I?"offcanvas":"icon",variant:I?"floating":"sidebar",onClick:i,children:[(0,s.jsx)(l.Gh,{className:(0,v.cn)("h-header-height flex flex-row justify-between items-center gap-0 shrink-0",l.y$),children:(0,s.jsx)(r.C9,{alwaysSmall:!0,className:"relative z-10 block w-fit p-1 mx-0.5 shrink-0 hover:bg-button-ghost-hover rounded-xl",onClick:eA})}),(0,s.jsxs)(l.Yv,{ref:eN,className:(0,v.cn)("relative overflow-x-hidden",t&&"scrollbar-gutter-stable-single"),style:{...eC},children:[(0,s.jsx)(l.Cn,{className:"h-subheader-height flex justify-center py-1",children:(0,s.jsxs)(l.Uj,{"aria-label":e("sidebar-search","Search"),className:(0,v.cn)(t&&"flex-1","ps-[10px] pe-[10px]","rounded-full border border-border-l1","bg-surface-l1 justify-start","text-secondary",l.b,l.hV),onClick:e=>{e.preventDefault(),e.stopPropagation(),S.H0.getState().openMenu(),p("opened_command_menu",void 0,{location:"app-sidebar:search"})},children:[(0,s.jsx)(h.WI,{size:18}),(0,s.jsx)(c.N,{children:t&&(0,s.jsxs)(d.P.span,{className:"space-x-1 align-baseline",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,easing:"easeInOut"},children:[(0,s.jsx)("span",{children:e("sidebar-search","Search")}),!I&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:C?"".concat(C,"K"):""})]})})]})}),(0,s.jsx)(l.Cn,{children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(w,{icon:(0,s.jsx)(h.cJ,{size:18}),text:e("sidebar-chat-nav","Chat"),route:ew,onClick:ev,tooltip:e("sidebar-chat-nav","Chat"),action:m.ENABLE_VOICE_MODE&&!A&&(0,s.jsx)(g.$n,{className:"ms-auto opacity-0 group-hover/menu-item:opacity-100 transition-opacity duration-100",variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:eb,"aria-label":e("sidebar-enter-voice-mode-button","Enter voice mode"),children:(0,s.jsx)(en.A,{size:14})}),highlighted:"chat"===ex.page&&!ex.conversationId||"main"===ex.page})})}),m.ENABLE_FILES_PAGE&&(0,s.jsx)(l.Cn,{children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(w,{icon:(0,s.jsx)(h.py,{size:18}),text:e("sidebar-files-nav","Files"),route:{page:"files",fileId:eE},onClick:ek,tooltip:e("sidebar-files-nav","Files"),highlighted:"files"===ex.page})})}),m.ENABLE_GROK_TASKS&&f&&(0,s.jsx)(l.Cn,{className:(0,v.cn)(""),children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(ep,{open:t,highlighted:"tasks"===ex.page})})}),m.ENABLE_IMAGE_TAB&&(0,s.jsx)(l.Cn,{children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(w,{icon:(0,s.jsx)(h.xf,{size:18}),text:e("sidebar-images-nav","Images"),route:{page:"images",tab:"explore"},tooltip:e("sidebar-images-nav","Images"),highlighted:"images"===ex.page})})}),(0,s.jsx)(l.Cn,{className:(0,v.cn)(""),children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(x,{trigger:(0,s.jsx)(w,{icon:(null==em?void 0:em.length)?(0,s.jsx)(b,{Icon:h.XR}):(0,s.jsx)(h.XR,{size:18}),action:(0,s.jsx)(g.$n,{className:"ms-auto opacity-0 group-hover/menu-item:opacity-100 transition-opacity duration-100",variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:eI,"aria-label":e("sidebar-create-workspace-button.label","Create new project"),children:(0,s.jsx)(er.A,{size:14})}),text:e("sidebar-workspaces-nav","Projects"),route:{page:"workspaces"},canPopover:!0,highlighted:"workspaces"===ex.page}),hasContent:!!(null==em?void 0:em.length),content:(0,s.jsxs)(s.Fragment,{children:[!t&&(0,s.jsxs)("div",{className:"w-full flex justify-between items-center gap-1 pl-3 pr-1.5 py-1 text-sm text-secondary font-semibold sticky top-0",children:[(0,s.jsx)("div",{className:(0,v.cn)(""),children:e("sidebar-workspaces-nav","Projects")}),(0,s.jsx)(g.$n,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:eI,"aria-label":e("Create Project","Create Project"),children:(0,s.jsx)(er.A,{size:14})})]}),!t&&!(null==em?void 0:em.length)&&(0,s.jsx)(ef,{content:e("No projects yet","No projects yet"),ctaText:e("Create Project","Create Project"),onClickCta:eI},"no-workspaces"),!!(null==em?void 0:em.length)&&em.slice(0,5).map(e=>(0,s.jsx)(eg,{workspaceId:e.workspaceId,showActions:t},e.workspaceId)),em.length>0&&(0,s.jsx)(g.$n,{tabIndex:-1,variant:"textSecondary",size:"none",className:"w-full justify-start px-3 text-xs font-semibold no-wrap pb-2 mt-1",onClick:()=>{ei({page:"workspaces"}),p("opened_command_menu",void 0,{location:"app-sidebar:recent-chats"})},children:e("See all","See all")})]}),collapsible:!0})})}),(0,s.jsx)(l.Cn,{className:(0,v.cn)(""),children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(x,{hasContent:!!V.length,trigger:(0,s.jsx)(w,{icon:(null==V?void 0:V.length)?(0,s.jsx)(b,{Icon:h.HG}):(0,s.jsx)(h.HG,{size:18}),text:e("History","History"),canPopover:!0}),content:(0,s.jsxs)(s.Fragment,{children:[!t&&(0,s.jsx)("div",{className:(0,v.cn)("py-1 pl-3 text-sm text-secondary font-semibold sticky top-0"),children:e("History","History")}),!t&&0===V.length&&(0,s.jsx)(ef,{content:e("No chats","No chats")},"no-recent-chats"),V.length>0&&V.map(e=>{let a=ea[e]||[];if(0===a.length)return null;let n=es().orderBy(a,[e=>e.createTime],["desc"]);return(0,s.jsxs)(u.Fragment,{children:[(0,s.jsx)("div",{className:(0,v.cn)("py-1 pl-3 text-xs text-fg-primary sticky top-0 z-20 text-nowrap"),children:e}),n.map(e=>(0,s.jsx)(eh,{conversation:e,showActions:t},e.conversationId))]},e)}),V.length>0&&(0,s.jsx)(g.$n,{tabIndex:-1,variant:"textSecondary",size:"none",className:"w-full justify-start px-3 text-xs font-semibold no-wrap pb-2 mt-1",onClick:()=>{S.H0.getState().openMenu(),p("opened_command_menu",void 0,{location:"app-sidebar:recent-chats"})},children:e("See all","See all")})]}),collapsible:!0,onClick:t?void 0:eP})})})]}),(0,s.jsxs)(l.CG,{className:(0,v.cn)("relative shrink-0",t?"h-[56px]":"h-[96px]"),children:[(0,s.jsx)("div",{className:(0,v.cn)("absolute bottom-3",l.vd),style:{transform:t?"translateY(0)":"translateY(-44px)",transitionProperty:"transform",transitionDuration:"300ms"},children:(0,s.jsx)(r.IO,{})}),(0,s.jsx)(l.x2,{className:(0,v.cn)("absolute end-2 bottom-3"),iconSize:18})]})]})}function ep(e){var t,a;let{open:n,highlighted:r}=e,{t:i}=(0,ec.Bd)("base"),l=(0,D.h)(),o=(0,V.d)(eo.A("setCreateDialogIsOpen")),c=(0,X._)(),{push:m}=(0,y.wK)(),{getUserTasksQuery:p}=(0,F.y$)({fetchActive:!0}),{data:f}=p,j=(0,u.useMemo)(()=>{var e,t;return null!=(t=null==f||null==(e=f.unreadResults)?void 0:e.filter(e=>!e.isRead&&e.status===U.cn.TaskResultSuccess).slice(0,3))?t:[]},[null==f?void 0:f.unreadResults]),k=(null==f||null==(a=f.unreadResults)||null==(t=a.at(0))?void 0:t.isRead)===!1&&f.unreadResults.length>0,N=(0,u.useCallback)(()=>{c("clicked_add_new_task",void 0,{location:"tasks-nav-button"}),o(!0)},[o,c]);return(0,s.jsx)(x,{collapsible:!0,trigger:(0,s.jsx)(w,{icon:j.length&&l.SHOW_SIDEBAR_TASK_CHATS?(0,s.jsx)(b,{Icon:h.HE}):(0,s.jsx)(h.HE,{size:18}),text:i("sidebar-tasks-label","Tasks"),route:{page:"tasks",taskId:null,tab:null},action:(0,s.jsx)(g.$n,{className:"ms-auto opacity-0 group-hover/menu-item:opacity-100 transition-opacity duration-100",variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:N,"aria-label":i("create-task","Create task"),children:(0,s.jsx)(er.A,{size:14})}),canPopover:!0,highlighted:r,children:k&&(0,s.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.2},children:(0,s.jsx)(M.x,{variant:"sm",className:(0,v.cn)("absolute",n?"top-[50%] -translate-y-1/2":"right-[6px] top-[6px]")})})}),hasContent:j.length>0&&l.SHOW_SIDEBAR_TASK_CHATS,content:(0,s.jsxs)(s.Fragment,{children:[!n&&(0,s.jsxs)("div",{className:"w-full flex justify-between items-center gap-1 pl-3 pr-1.5 py-1 text-sm text-secondary font-semibold sticky top-0",children:[(0,s.jsx)("div",{className:(0,v.cn)(""),children:i("sidebar-tasks-nav","Tasks")}),(0,s.jsx)(g.$n,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:N,"aria-label":i("create-task","Create task"),children:(0,s.jsx)(er.A,{size:14})})]}),!n&&!(null==j?void 0:j.length)&&(0,s.jsx)(ef,{content:i("No unread task results","No unread task results")},"no-workspaces"),(0,s.jsx)("div",{className:"w-full flex flex-col gap-1",children:(null==j?void 0:j.length)>0&&j.map(e=>(0,s.jsx)(ex,{taskResult:e},e.taskResultId))}),n&&(null==f?void 0:f.tasks)&&f.tasks.length>0&&(0,s.jsx)(g.$n,{tabIndex:-1,variant:"textSecondary",size:"none",className:"w-full justify-start px-3 text-xs font-semibold no-wrap pb-2 mt-1",onClick:()=>{m({page:"tasks",taskId:null,tab:null})},children:i("See all","See all")})]})})}function ex(e){var t;let{taskResult:a}=e,{t:n}=(0,ec.Bd)("base"),r=(0,X._)(),i=(0,u.useCallback)(()=>{r("clicked_task_result",void 0,{location:"tasks-nav-button"})},[r]),c=(0,j.Di)(),{setOpen:d}=(0,l.cL)(),m=(0,u.useCallback)(e=>{c&&d(!1),(0,o.Y)(e)},[c,d]),p=(0,u.useMemo)(()=>a.title?a.title:a.createTime?n("Task result on date","Task result on {{date}}",{date:new Date(a.createTime).toLocaleDateString()}):n("New task result","New task result"),[a.createTime,a.title,n]);return(0,s.jsx)(l.Uj,{asChild:!0,heightClassName:l.Zr,onClick:i,children:(0,s.jsxs)(y.N_,{className:(0,v.cn)("group/task-item pl-3 pr-4 py-1 text-sm","w-full flex  gap-3 text-fg-primary"),route:{page:"chat",conversationId:null!=(t=a.conversationId)?t:null,temporary:!1},onClick:m,tooltip:p,tooltipContentProps:{side:"right",sideOffset:8},children:[(0,s.jsx)("span",{className:(0,v.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block"),style:{maskImage:O.uU,WebkitMaskImage:O.uU},children:p}),(0,s.jsx)(M.x,{variant:"sm"})]})})}function eh(e){let{conversation:t,showActions:a=!0}=e,{t:r}=(0,ec.Bd)("base"),i=(0,X._)(),{handlePinConversation:m}=(0,K.c)(),p=(0,B.K)(),x=(0,u.useMemo)(()=>t.title?t.title:t.createTime?r("Chat on date","Chat on {{date}}",{date:new Date(t.createTime).toLocaleDateString()}):r("Untitled Chat","Untitled Chat"),[t.createTime,t.title,r]),[f,b]=(0,u.useState)(x),w=C(e=>e.currentAction),k=(null==w?void 0:w.type)==="edit-conversation"&&w.conversationId===t.conversationId,N=(0,u.useCallback)(()=>{let{setCurrentAction:e}=C.getState();e(void 0)},[]),S=(0,u.useCallback)((e,t,a)=>{let{fetchUpdateConversation:s}=W.w.getState();s(e,{title:t,starred:a}).catch(e=>{p("app-sidebar:handleUpdateConversation",e)})},[p]),{route:I,push:_}=(0,y.wK)(),M=(0,n.aP)(eo.A("conversationId")),z="chat"===I.page&&M===t.conversationId,T=(0,u.useCallback)(()=>{let{fetchSoftDeleteConversation:e}=W.w.getState();e(t.conversationId).catch(e=>{p("app-sidebar:handleDeleteConversation",e)}),z&&_({page:"main"})},[t.conversationId,p,z,_]),D=(0,u.useCallback)(()=>{let{setCurrentAction:e}=C.getState();e({type:"edit-conversation",conversationId:t.conversationId}),G(!1)},[t.conversationId]),R=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),("click"===e.type||e instanceof KeyboardEvent&&"Enter"===e.key)&&S(t.conversationId,f.trim(),t.starred);let{setCurrentAction:a}=C.getState();a(void 0),i("update_conversation_name",t.conversationId,{location:"app-sidebar"})},[S,t.conversationId,f,t.starred,i]),L=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),b(e.target.value)},[]),F=(0,u.useCallback)(e=>{if("Enter"===e.key){let{setCurrentAction:e}=C.getState();S(t.conversationId,f.trim(),t.starred),e(void 0),i("update_conversation_name",t.conversationId,{location:"app-sidebar"})}else"Escape"===e.key&&N()},[N,S,t.conversationId,f,t.starred,i]),H=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),N()},[N]),$=(0,u.useCallback)(()=>{m(t.conversationId,!t.starred,"app-sidebar")},[t.conversationId,t.starred,m]),[U,G]=(0,u.useState)(!1),V=(0,j.Di)(),{setOpen:Y}=(0,l.cL)(),Q=(0,u.useCallback)(e=>{V&&Y(!1),(0,o.Y)(e)},[V,Y]),q=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault()},[]),Z=(0,u.useCallback)(e=>{k&&(e.stopPropagation(),e.preventDefault())},[k]),J=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),N()},[N]);return(0,s.jsx)(c.N,{children:(0,s.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:(0,s.jsx)(l.Uj,{asChild:!0,highlighted:z,allowActive:!k,heightClassName:l.Zr,children:(0,s.jsxs)(y.N_,{className:(0,v.cn)("group/conversation-item pl-3 pr-1.5 py-1 text-sm","w-full flex flex-row gap-2 text-secondary"),route:{page:"chat",conversationId:t.conversationId,temporary:t.temporary},onClick:Q,tooltip:x,tooltipContentProps:{side:"right",sideOffset:8},showTooltip:!k&&!U,onDragStart:Z,children:[k?(0,s.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:f,onKeyDown:F,onChange:L,onClick:q,onBlur:J,autoFocus:!0}):(0,s.jsx)("span",{className:(0,v.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block"),style:{maskImage:O.uU,WebkitMaskImage:O.uU},children:x}),a&&(k?(0,s.jsxs)("div",{className:(0,v.cn)("flex","items-center justify-end gap-0.5"),children:[(0,s.jsx)(g.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:H,tooltipContent:r("Cancel","Cancel"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(h.uv,{size:14,className:"text-fg-primary"})}),(0,s.jsx)(g.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:R,tooltipContent:r("Save","Save"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(ei.A,{size:14,className:"text-fg-primary"})})]}):(0,s.jsxs)(E.rI,{onOpenChange:G,children:[(0,s.jsx)(E.ty,{asChild:!0,children:(0,s.jsx)(g.$n,{variant:"ghost",size:"iconXs",className:(0,v.cn)("hidden group-hover/conversation-item:flex text-fg-secondary",U&&"flex"),rounded:!0,children:(0,s.jsx)(el.A,{size:14})})}),(0,s.jsxs)(E.SQ,{side:"right",align:"start",sideOffset:6,alignOffset:-8,className:"min-w-36 space-y-0.5",onClick:o.Y,children:[(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:D,children:[(0,s.jsx)(h.rZ,{size:16,className:"me-2"}),r("Rename","Rename")]}),(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:$,children:[t.starred?(0,s.jsx)(P.A,{size:16,className:"me-2"}):(0,s.jsx)(A,{size:16,className:"me-2"}),t.starred?r("Unpin","Unpin"):r("Pin","Pin")]}),(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:T,children:[(0,s.jsx)(h.uc,{size:16,className:"me-2"}),r("Delete","Delete")]})]})]}))]})})},t.conversationId)})}function eg(e){let{workspaceId:t,showActions:a=!0}=e,{route:n,push:r}=(0,y.wK)(),{t:i}=(0,ec.Bd)("base"),c=(0,X._)(),d=(0,Q.M)(e=>{var a;return null==(a=e.byId[t])?void 0:a.data}),[m,p]=(0,u.useState)((null==d?void 0:d.name)||"");(0,u.useEffect)(()=>{var e;p(null!=(e=null==d?void 0:d.name)?e:"")},[null==d?void 0:d.name]);let x=C(e=>e.currentAction),f=(null==x?void 0:x.type)==="edit-workspace"&&x.workspaceId===t,b="workspace"===n.page&&n.workspaceId===t,w=(0,u.useCallback)(()=>{let{setCurrentAction:e}=C.getState();e(void 0);let a=m.trim();if(""===a)return;c("update_workspace_name",t,{location:"app-sidebar"});let{updateWorkspace:s}=Q.M.getState();s(t,{name:a})},[m,c,t]),k=(0,u.useCallback)(()=>{let{setCurrentAction:e}=C.getState();e(void 0)},[]),N=(0,u.useCallback)(()=>{let{setCurrentAction:e}=C.getState();e({type:"edit-workspace",workspaceId:t}),D(!1)},[t]),S=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),("click"===e.type||e instanceof KeyboardEvent&&"Enter"===e.key)&&w()},[w]),I=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),p(e.target.value)},[]),A=(0,u.useCallback)(e=>{"Enter"===e.key?w():"Escape"===e.key&&k()},[k,w]),P=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),k()},[k]),_=(0,u.useCallback)(e=>{let{updateWorkspace:a}=Q.M.getState();a(t,{icon:e})},[t]),M=(0,u.useCallback)(()=>{t&&(Q.M.getState().deleteWorkspace(t),"workspace"===n.page&&n.workspaceId===t&&r({page:"workspaces"}))},[t,n,r]),[z,D]=(0,u.useState)(!1),R=(0,j.Di)(),{setOpen:K}=(0,l.cL)(),L=(0,u.useCallback)(e=>{R&&K(!1),(0,o.Y)(e)},[R,K]),B=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault()},[]),F=(0,u.useCallback)(e=>{f&&(e.stopPropagation(),e.preventDefault())},[f]),H=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),k()},[k]);return(0,s.jsx)(l.Uj,{asChild:!0,highlighted:b,allowActive:!f,heightClassName:l.Zr,children:(0,s.jsxs)(y.N_,{className:(0,v.cn)("group/conversation-item pl-2 pr-1.5 py-1 text-sm","w-full flex flex-row !gap-1 text-primary"),route:{page:"workspace",workspaceId:t,tab:"conversations"},onClick:L,onDragStart:F,children:[(0,s.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,s.jsx)(T.n,{icon:null==d?void 0:d.icon,sizeClass:"size-4",onChange:_,rounded:!0,buttonSize:"iconXs",disabled:!a})}),f?(0,s.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:m,onKeyDown:A,onChange:I,onClick:B,onBlur:H,autoFocus:!0}):(0,s.jsx)("span",{className:(0,v.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block"),style:{maskImage:O.uU,WebkitMaskImage:O.uU},children:m}),a&&(f?(0,s.jsxs)("div",{className:(0,v.cn)("flex","items-center justify-end gap-0.5"),children:[(0,s.jsx)(g.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:P,tooltipContent:i("Cancel","Cancel"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(h.uv,{size:14,className:"text-fg-primary"})}),(0,s.jsx)(g.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:S,tooltipContent:i("Save","Save"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(ei.A,{size:14,className:"text-fg-primary"})})]}):(0,s.jsxs)(E.rI,{onOpenChange:D,children:[(0,s.jsx)(E.ty,{asChild:!0,children:(0,s.jsx)(g.$n,{variant:"ghost",size:"iconXs",rounded:!0,"aria-label":i("sidebar-workspace-menu-open.label","Show project menu"),className:(0,v.cn)("hidden group-hover/conversation-item:flex",z&&"flex"),children:(0,s.jsx)(el.A,{size:14})})}),(0,s.jsxs)(E.SQ,{side:"right",align:"start",sideOffset:6,alignOffset:-8,className:"min-w-36 space-y-0.5",onClick:o.Y,children:[(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:N,children:[(0,s.jsx)(h.rZ,{size:16,className:"me-2"}),i("Rename","Rename")]}),(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:M,children:[(0,s.jsx)(h.uc,{size:14,className:"me-2"}),i("Delete","Delete")]})]})]}))]})})}function ef(e){let{content:t,ctaText:a,onClickCta:n}=e;return(0,s.jsxs)("div",{className:(0,v.cn)("h-[140px] flex flex-col gap-2 items-center justify-center","-mt-8"),children:[(0,s.jsx)("span",{className:"text-xs text-secondary",children:t}),a&&n&&(0,s.jsx)(g.$n,{variant:"outline",size:"sm",className:"rounded-xl",onClick:n,children:a})]})}},54344:(e,t,a)=>{a.d(t,{D:()=>r});var s=a(79342),n=a(61312);function r(e){let{children:t,className:a="",fadeSize:r="sm",role:i}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex-1 flex flex-col gap-1 h-full overflow-y-auto py-1",{sm:"[mask-image:linear-gradient(to_bottom,transparent,black_4px,black_calc(100%_-_4px),transparent)] [-webkit-mask-image:linear-gradient(to_bottom,transparent,black_4px,black_calc(100%_-_4px),transparent)]",md:"[mask-image:linear-gradient(to_bottom,transparent,black_8px,black_calc(100%_-_8px),transparent)] [-webkit-mask-image:linear-gradient(to_bottom,transparent,black_8px,black_calc(100%_-_8px),transparent)]",lg:"[mask-image:linear-gradient(to_bottom,transparent,black_16px,black_calc(100%_-_16px),transparent)] [-webkit-mask-image:linear-gradient(to_bottom,transparent,black_16px,black_calc(100%_-_16px),transparent)]"}[r],a),tabIndex:-1,role:i,children:t})}},58655:(e,t,a)=>{a.d(t,{C:()=>p});var s=a(79342),n=a(41320),r=a(61312),i=a(65146),l=a(24994),o=a(74366),c=a(26067),d=a(82263);function u(e){let{locale:t,onChange:a}=e,{t:n}=(0,i.Bd)();return(0,s.jsxs)(o.uB,{children:[(0,s.jsx)(o.G7,{placeholder:n("Search language","Search language")}),(0,s.jsx)(o.oI,{children:c.O4.map(e=>(0,s.jsx)(m,{locale:e,selected:t===e,onSelect:a},e))})]})}function m(e){let{locale:t,selected:a,onSelect:n}=e,{name:r,nativeName:i}=c.IB[t];return(0,s.jsxs)(o.h_,{value:t,keywords:[i,r],onSelect:()=>n(t),className:"justify-between cursor-pointer",children:[i,a?(0,s.jsx)(d.A,{className:"size-4","data-testid":"check-icon"}):(0,s.jsx)("span",{className:"text-muted-foreground",children:r})]})}function p(e){let{open:t,onOpenChange:a,locale:o,onLocaleChange:c}=e,{t:d}=(0,i.Bd)(),m=(0,n.Di)(),p=(0,r.cn)("bg-background rounded-2xl outline-none h-[calc(100dvh-64px-128px)] w-full md:w-[400px] max-w-3xl flex flex-col md:h-[min(500px,90dvh)]",{"rounded-b-none":m});return(0,s.jsx)(l.R,{open:t,setOpen:a,contentClassName:p,"aria-labelledby":"language-selector-title",titleClassName:"sr-only",title:d("Language Selector","Language Selector"),children:(0,s.jsx)(u,{locale:o,onChange:c})})}},63209:(e,t,a)=>{a.d(t,{IO:()=>eS,hx:()=>eC,C9:()=>e_,oE:()=>eN});var s=a(79342),n=a(10953),r=a(42557),i=a(41284),l=a(56691),o=a(51789),c=a(92207),d=a(39489),u=a(39945),m=a(12001),p=a(72712);let x=e=>(0,s.jsxs)(p.I,{viewBox:"2 2 21 21",...e,children:[(0,s.jsx)("path",{d:"M3 5L19 5",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M3 12H7",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"}),(0,s.jsx)("circle",{cx:"16",cy:"15",r:"4",stroke:"currentColor"}),(0,s.jsx)("path",{d:"M19 18L21 20",stroke:"currentColor",strokeLinecap:"square"}),(0,s.jsx)("path",{d:"M3 19H7",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"})]});var h=a(58655),g=a(18585),f=a(67153),v=a(92618),b=a(5790),j=a(35692),y=a(88119),w=a(34500),k=a(73772),N=a(47127),C=a(97225),S=a(3209),I=a(26676),A=a(5663),P=a(68332),_=a(21782),M=a(75500),E=a(33231),z=a(23232),T=a(41320),D=a(91102),R=a(2376),K=a(12065),L=a(35181),B=a(24734),O=a(2280),F=a(24429),H=a(27636),$=a(7658),U=a(83626),W=a(17703),G=a(84499),V=a(61312),X=a(56173),Y=a(49972),Q=a(93436),q=a(44347),Z=a(58711),J=a(3683),ee=a(17014),et=a(7036),ea=a(22406),es=a(10684),en=a(23827),er=a(35021),ei=a(8512),el=a(30590),eo=a(603),ec=a(33846),ed=a(32171),eu=a.n(ed),em=a(39116),ep=a(74995),ex=a(88382),eh=a(65146),eg=a(17517),ef=a(14908),ev=a(38614),eb=a(23856),ej=a(5443);let ey=(0,ex.memo)(e=>{let{conversation:t}=e,a=(0,z._)(),{conversationId:n}=t,{data:r,error:i}=(0,$.$1)(n);(0,B.Y)("conversation-workspace-pill",i);let l=null==r?void 0:r[0];if(!l)return null;let{name:o,icon:c,workspaceId:d}=l;return(0,s.jsx)(eu(),{className:"overflow-hidden",href:"/workspace/".concat(d),onClick:()=>{a("ws_pill_click",void 0,{location:"conversation-workspace-pill:handleClick"})},children:(0,s.jsxs)(ec.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:(0,V.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-secondary flex flex-row items-center gap-1","ml-2 mt-0.5"),children:[(0,s.jsx)("span",{className:(0,V.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5"),children:(0,s.jsx)(ej.Oh,{icon:c})}),(0,s.jsx)("span",{className:(0,V.cn)("max-w-[0px] @[340px]/nav:max-w-[75px] @[375px]/nav:max-w-[100px] @[430px]/nav:max-w-[150px] @[500px]/nav:max-w-[200px] truncate"),children:o})]})})}),ew={size:20,strokeWidth:2};function ek(e){let{hash:t,isIncognito:a,showLabel:n,onLinkClick:r}=e,{t:i}=(0,eh.Bd)("chat"),{commandPrefix:o}=(0,D.c)(),c=a?i("Switch to Default Chat","Switch to Default Chat"):i("Switch to Private Chat","Switch to Private Chat"),d=a?"".concat(o,"J"):"".concat(o,"⇧J");return(0,s.jsx)(l.gx,{rounded:!0,variant:"ghost",size:n?"md":"iconMd",overideIconStyle:!0,"aria-label":c,stayOpenOnClick:!0,tooltipAsChild:!0,tooltipContent:(0,s.jsxs)("div",{className:"flex flex-row gap-1",children:[c,o&&(0,s.jsx)("span",{className:"text-secondary",children:d})]}),tooltipContentProps:{side:"bottom"},asChild:!0,className:a?"text-purple-400 dark:text-purple-300":"text-secondary",children:(0,s.jsxs)(eu(),{href:"/chat".concat(a?"":t),onClick:r,children:[a?(0,s.jsx)(u.fz,{...ew,"data-testid":"pi-ghost-fill"}):(0,s.jsx)(u.FE,{...ew,"data-testid":"pi-ghost"}),n&&(0,s.jsx)("span",{className:"font-semibold",children:i("private","Private")})]})})}let eN="#private";function eC(e){var t;let{title:a,conversationIsLoading:n,conversation:i,label:o,shared:d,isOptimisticConversation:p,hideIncognito:h,showTasks:v}=e,{t:b}=(0,eh.Bd)("base"),{routeToConversation:y}=(0,P.o)(),[w,C]=(0,eg.Q)(),S=(0,r.wV)(),I=S.user,{push:_}=(0,G.wK)(),{commandPrefix:L,os:O}=(0,D.c)(),F=(0,z._)(),U=(0,ex.useRef)(null),X=(0,ev.aP)(ep.A("setReasoningMode")),Q=(0,ev.aP)(ep.A("establishNewConversation")),Z=(0,ev.aP)(ep.A("conversationMode")),J=(0,q.C$)(ep.A("isIncognito")),ee=(0,q.C$)(ep.A("setIsIncognito")),{handlePinConversation:en}=(0,K.c)(),{fetchDeleteConversation:er}=(0,Y.w)(),ei=(0,B.K)(),el=(0,T.Di)(),eo=(0,M.h)(),ec=(0,f.L)(),ed=(0,ev.aP)(ep.A("lastMessageId"));(0,ex.useEffect)(()=>{w===eN&&(ee(!0),C(""))},[w]);let{data:eu}=(0,$.$1)(null!=(t=null==i?void 0:i.conversationId)?t:""),em=null==eu?void 0:eu[0],ef=null==em?void 0:em.workspaceId,ej=(0,ex.useCallback)(()=>{F("new_chat_action",void 0,{location:"chat-top-nav:pivotNewChat",insideWorkspace:"false"});let{setOptimisticConversationId:e,setSidePanelContent:t}=ev.aP.getState();e(void 0),t(void 0),ee(!1),y(void 0)},[F,ee,y]),ey=(0,ex.useCallback)(e=>{e.ctrlKey||e.metaKey||ej()},[ej]);(0,E.v)(A.Ib,e=>{e.preventDefault(),e.stopPropagation(),F("pressed_cmd_j",void 0,{location:"chat-top-nav:useHotkeys",insideWorkspace:String(!!em)}),ej()},[ej,F]);let ew=(0,ex.useCallback)(()=>{ee(!0),y(void 0)},[ee,y]),eC=!!S.user&&!h;(0,E.v)(A.Xo,e=>{eC&&(e.preventDefault(),e.stopPropagation(),F("pressed_cmd_shift_j",void 0,{location:"chat-top-nav:useHotkeys"}),ew())},[eC,ew,F]);let eI=(0,ex.useCallback)(e=>{if(!e.ctrlKey&&!e.metaKey){e.preventDefault();let t=!J;ee(t),F("toggle_incognito",String(t),{location:"chat-top-nav"})}},[J,ee,F]),eA=(0,c.H0)(ep.A("openMenu")),e_=p?J:i?!!I&&i.temporary:J,{getPersonaForConversation:eM}=(0,R.v5)(),eT=eM(i),eD=(0,ex.useCallback)(()=>{F("clicked_tasks",void 0,{location:"chat-top-nav"}),_({page:"tasks",taskId:null,tab:"active"})},[_,F]),eR=(0,ex.useCallback)(async()=>{if(!eT)return;X("none");let{initialQuery:e,toolOverrides:t}=(0,g.pL)(eT.personaId,b);F("click_persona",eT.personaId,{location:"chat-top-nav"}),F("new_persona_chat",e,{location:"chat-top-nav",toolOverrides:JSON.stringify(t)}),await ec(),await Q({message:e,toolOverrides:t,persona:eT,enableRetries:eo.ENABLE_AUTO_STREAM_RETRY,ff:eo}).catch((0,W.HX)("chat-top-nav:establishNewConversation"))},[eT,X,b,F,ec,Q,eo]),eK=(0,ex.useCallback)(()=>{i&&en(i.conversationId,!i.starred,"chat-top-nav")},[i,en]),eL=(0,ex.useCallback)(()=>{i&&er(i.conversationId).then(()=>{_({page:"main"})}).catch(e=>ei("chat-top-nav:handleDeleteClick",e))},[i,er,_,ei]),eB=function(){var e,t;let{getUserTasksQuery:a}=(0,H.y$)({fetchActive:!0}),{data:s}=a;return(null==s||null==(t=s.unreadResults)||null==(e=t.at(0))?void 0:e.isRead)===!1&&s.unreadResults.length>0}(),eO=eo.ENABLE_EXPANDED_SHARE_BUTTON&&!el,[eF,eH]=(0,ex.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{ref:U,className:(0,V.cn)("w-full relative @container/nav z-[25] flex-shrink-0","print:hidden"),children:[a&&(0,s.jsx)("div",{className:"h-full",children:a}),(0,s.jsxs)("div",{className:(0,V.cn)("h-16 top-0 @[80rem]/nav:h-0 @[80rem]/nav:top-8","absolute z-10 flex flex-row items-center justify-center w-full bg-gradient-to-b","from-background via-background via-80% to-transparent @[80rem]/nav:from-transparent @[80rem]/nav:via-transparent"),children:[(0,s.jsx)("div",{className:"absolute start-1",children:(0,s.jsx)(eP,{shared:d})}),(0,s.jsx)("div",{className:(0,V.cn)("grow justify-center hidden max-w-[50%] @[640px]/nav:flex"),children:o?(0,s.jsx)("div",{className:"text-muted-foreground",children:o}):null}),(0,s.jsxs)("div",{className:"absolute flex flex-row items-center gap-0.5 ms-auto end-3",children:[eT&&!n&&i&&(0,s.jsx)(N.p,{children:(0,s.jsx)(l.gx,{className:(0,V.cn)("rounded-full",(0,g.e8)(eT.personaId).colorClassName),variant:"ghost",size:"icon",tooltipContent:(0,s.jsxs)("p",{children:[b("New Persona Chat","New Persona Chat",{ns:"chat"}),L&&(0,s.jsxs)("span",{className:"ms-1 text-secondary",children:[L,"J"]})]}),tooltipContentProps:{side:"bottom"},onClick:eR,asChild:!0,children:(0,s.jsx)("div",{onClick:eR,children:(0,s.jsx)(u.cJ,{size:20,strokeWidth:2})})})},"new-persona-chat-button"),!eT&&(!n&&i||d)&&(0,s.jsx)(N.p,{children:(0,s.jsx)(l.gx,{className:"rounded-full",variant:"ghost",size:"icon",tooltipContent:(0,s.jsxs)("p",{children:[em?b("top-nav-new-chat.tooltip","New chat in project",{ns:"chat"}):b("start new chat","New Chat",{ns:"chat"}),L&&(0,s.jsxs)("span",{className:"ms-1 text-secondary",children:[L,"J"]})]}),tooltipContentProps:{side:"bottom"},asChild:!0,children:ef?(0,s.jsx)(G.N_,{route:{page:"workspace",workspaceId:ef,tab:"attachments"},onClick:()=>{F("new_chat_action",void 0,{location:"chat-top-nav:handleClickNewChatWorkspace",insideWorkspace:"true"})},children:(0,s.jsx)(u.cJ,{size:20,strokeWidth:2})}):(0,s.jsx)(G.N_,{route:{page:"main"},onClick:ey,children:(0,s.jsx)(u.cJ,{size:20,strokeWidth:2})})})},"new-chat-button"),eo.USE_APP_SIDEBAR_V2&&i&&!n&&!d&&!e_&&(0,s.jsx)(l.gx,{className:"rounded-full",variant:"ghost",size:"icon","aria-label":i.starred?b("Unpin","Unpin"):b("Pin","Pin"),onClick:eK,tooltipContent:i.starred?b("Unpin","Unpin"):b("Pin","Pin"),children:(0,s.jsx)(N.p,{children:i.starred?(0,s.jsx)(m.A,{size:18}):(0,s.jsx)(et.A,{size:18})},i.starred?"pinned":"unpinned")}),!eO&&i&&ed&&!d&&!e_&&(0,s.jsx)(eb.w,{variant:"ghost",size:"icon",conversationId:i.conversationId,responseId:ed,iconProps:{size:20,strokeWidth:2}}),eo.USE_APP_SIDEBAR_V2&&eo.ENABLE_CONVERSATION_PAGE_ACTIONS&&i&&!n&&!d&&!e_&&(0,s.jsxs)(k.rI,{children:[(0,s.jsx)(k.ty,{asChild:!0,children:(0,s.jsx)(l.gx,{className:"rounded-full",variant:"ghost",size:"icon","aria-label":b("chat-top-nav.more","More"),onClick:eK,tooltipContent:b("chat-top-nav.more","More"),children:(0,s.jsx)(ea.A,{size:20})})}),(0,s.jsxs)(k.SQ,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,s.jsx)(ez,{conversation:i,setDrawerOpen:eH}),(0,s.jsxs)(k._2,{onClick:eL,children:[(0,s.jsx)(u.uc,{className:"size-4 me-2"}),b("chat-top-nav.delete-chat","Delete Chat")]})]})]}),eo.USE_APP_SIDEBAR_V2?null:eo.ENABLE_GROK_TASKS&&!!I&&v&&(0,s.jsx)(N.p,{children:(0,s.jsx)(l.gx,{variant:"ghost",size:"icon",className:"rounded-full","aria-label":b("Top-nav-tasks-label","Tasks",{ns:"tasks"}),onClick:eD,tooltipContent:(0,s.jsx)("div",{className:"flex flex-row gap-1",children:b("Top-nav-tasks-label","Tasks",{ns:"tasks"})}),children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(es.A,{size:20}),eB&&(0,s.jsx)(j.x,{variant:"sm",className:"absolute top-[50%] translate-y-[-50%] -left-2"})]})})},"tasks-nav-button"),eC&&!n&&!i&&!d&&"voice"!==Z&&(0,s.jsx)(N.p,{children:(0,s.jsx)(ek,{hash:eN,isIncognito:J,onLinkClick:eI,showLabel:!el})},"incognito-nav-button"),eo.USE_APP_SIDEBAR_V2?null:(0,s.jsx)(l.gx,{variant:"ghost",size:"icon",className:"rounded-full","aria-label":b("History","History",{ns:"chat"}),onClick:()=>{F("opened_command_menu",void 0,{location:"chat-top-nav:button"}),eA()},tooltipContent:(0,s.jsxs)("div",{className:"flex flex-row gap-1",children:[b("History","History",{ns:"chat"}),L&&(0,s.jsxs)("span",{className:"text-secondary",children:["macos"===O?L:"".concat(L,"⇧"),"K"]})]}),children:(0,s.jsx)(x,{size:20})}),eO&&i&&ed&&!d&&!e_&&(0,s.jsx)(eb.w,{variant:"outline",size:"md",rounded:!0,showLabel:!0,conversationId:i.conversationId,responseId:ed,iconProps:{size:20,strokeWidth:2}}),eo.USE_APP_SIDEBAR_V2?null:(0,s.jsx)(eS,{})]})]})]}),i&&(0,s.jsx)(eE,{conversation:i,drawerOpen:eF,setDrawerOpen:eH})]})}function eS(){let{t:e}=(0,eh.Bd)("base"),{SUPPORT_URL:t}=(0,d.v)(),a=(0,em.useRouter)(),n=(0,r.wV)(),o=(0,b.iV)(ep.A("toggleOpen")),c=(0,ex.useCallback)(e=>{e.stopPropagation(),(0,Q.P.getState().openReportDialog)()},[]),{isEnterpriseUser:m,isSuperGrokUser:p,isSuperGrokProUser:x,activeSubscriptions:h}=(0,F.Q2)(),g=(0,Z.e)(ep.A("setIsUpselling")),f=(0,ex.useCallback)(e=>{e.stopPropagation(),a.push("/sign-out")},[a]),v=(0,_.f)(),j=(0,ex.useCallback)(e=>{e.stopPropagation(),o()},[o]),y=(0,ex.useCallback)(e=>{e.stopPropagation(),g(!0)},[g]);return n.user?(0,s.jsxs)(k.rI,{children:[(0,s.jsx)(k.ty,{asChild:!0,children:(0,s.jsx)(l.$n,{variant:"ghost",size:"icon",className:"p-1 rounded-full",children:(0,s.jsx)(i.e,{className:"w-8 h-8",user:n.user})})}),(0,s.jsxs)(k.SQ,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,s.jsxs)(k._2,{onClick:j,children:[(0,s.jsx)(u.DP,{className:"size-4 me-2"}),e("user-dropdown.settings","Settings")]}),(0,s.jsxs)(k._2,{onClick:c,children:[(0,s.jsx)(ee.VAL,{className:"size-4 me-2"}),e("user-dropdown.report-issue","Report Issue")]}),(0,s.jsx)(k._2,{asChild:!0,children:(0,s.jsxs)(eu(),{href:t,target:"_blank",children:[(0,s.jsx)(en.A,{height:16,width:16,className:"text-neutral-400 me-2"}),e("user-dropdown.community","Community")]})}),p||x?(0,s.jsx)(eI,{subscriptions:h}):m?null:(0,s.jsxs)(k._2,{onClick:y,children:[(0,s.jsx)(ee.Qtr,{className:"size-4 me-2"}),e("user-dropdown.upgrade","Upgrade plan")]}),(0,s.jsxs)(k._2,{onClick:f,children:[(0,s.jsx)(u.Jm,{className:"size-4 me-2"}),e("user-dropdown.sign-out","Sign Out")]})]})]}):(0,s.jsx)(eA,{currentLanguage:v})}function eI(e){let{subscriptions:t}=e,{t:a}=(0,eh.Bd)("base"),[n,r]=(0,ex.useState)(!1),i=null==t?void 0:t[0];return i?(0,s.jsxs)(k._2,{onClick:e=>{e.preventDefault(),e.stopPropagation(),i.stripe?(r(!0),X.$W.subscriptionsCreateBillingPortalSession({body:{returnUrl:window.location.href}}).then(e=>{window.open(e.url,"_blank")}).catch((0,W.HX)("chat-top-nav:manage-subscription")).finally(()=>{r(!1)})):window.open((0,v.M)(i),"_blank")},children:[n?(0,s.jsx)(er.A,{height:16,width:16,className:"text-neutral-400 animate-spin !duration-1000 me-2"}):(0,s.jsx)(ei.A,{height:16,width:16,className:"text-neutral-400 me-2"}),a("user-dropdown.manage-subscription","Manage Subscription")]}):null}function eA(e){let{currentLanguage:t}=e,a=(0,em.useRouter)(),{t:n,i18n:r}=(0,eh.Bd)("base"),i=(0,z._)(),[o,c]=(0,ex.useState)(!1),d=(0,ex.useCallback)(()=>{i("sign_in_redirect",void 0,{location:"chat-top-nav"}),a.push("/sign-in")},[a,i]),m=(0,ex.useCallback)(()=>{i("sign_up_redirect",void 0,{location:"chat-top-nav"}),a.push("/sign-up")},[a,i]),p=(0,ex.useCallback)(e=>{r.changeLanguage(e).then(()=>{q.C$.getState().setSelectedLanguage(e),c(!1)}).catch((0,W.HX)("settings-account"))},[r]);return(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsxs)(k.rI,{children:[(0,s.jsx)(k.ty,{asChild:!0,children:(0,s.jsx)(l.gx,{variant:"ghost",size:"icon",className:"rounded-full hidden @sm:flex",tooltipContent:n("Settings","Settings"),children:(0,s.jsx)(u.DP,{size:20})})}),(0,s.jsxs)(k.SQ,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,s.jsx)(y.Uk,{}),(0,s.jsx)(k._2,{onClick:()=>c(!0),children:n("Language","Language")})]})]}),(0,s.jsxs)(l.$n,{size:"pill",variant:"primary",className:"h-8 px-3 text-sm",onClick:m,children:[(0,s.jsx)(el.A,{size:16,strokeWidth:2}),(0,s.jsx)("div",{children:n("Sign up","Sign up")})]}),(0,s.jsx)(l.$n,{size:"pill",variant:"none",className:(0,V.cn)("hidden @sm:flex","h-8 px-3 text-sm text-primary bg-transparent ring-1 ring-inset ring-toggle-border","hover:bg-button-secondary-hover hover:border-text-secondary"),onClick:d,children:(0,s.jsx)("div",{children:n("Sign in","Sign in")})}),(0,s.jsx)(h.C,{locale:t,open:o,onLocaleChange:p,onOpenChange:c})]})}function eP(e){let{shared:t}=e,a=(0,M.h)(),n=(0,Y.w)(ep.A("fetchGetConversation")),r=(0,ev.aP)(ep.A("conversationId")),{data:i}=(0,L.v)((0,U.F)(r,n)),{toggleSidebar:o}=(0,C.cL)(),{t:c}=(0,eh.Bd)("base"),d=(0,T.Di)(),{route:u}=(0,G.wK)();return(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[a.USE_APP_SIDEBAR_V2?d&&(0,s.jsx)(l.$n,{"aria-label":c("side-nav-toggle-button","Toggle sidebar"),className:"ms-2",variant:"ghost",size:"iconMd",rounded:!0,onClick:o,children:(0,s.jsx)(eo.A,{})}):(0,s.jsx)(e_,{}),(0,s.jsx)(eM,{conversation:i}),!t&&i&&["main","chat"].includes(u.page)&&(0,s.jsx)(ey,{conversation:i})]})}function e_(e){var t;let{alwaysSmall:a,className:r,onClick:i}=e,{t:l}=(0,eh.Bd)("base"),o=(0,z._)(),c=(0,_.f)(),{isSuperGrokUser:d,isEnterpriseUser:u,isSuperGrokProUser:m}=(0,F.Q2)(),p=a?n.$r:(0,n.a8)({isSuperGrokPro:m,isSuperGrok:d,isEnterprise:u,language:c}),x=(0,em.usePathname)(),{route:h}=(0,G.wK)(),g=(0,Y.w)(ep.A("fetchGetConversation")),f=(0,ev.aP)(ep.A("conversationId")),{data:v}=(0,L.v)((0,U.F)(f,g)),{data:b}=(0,$.$1)(null!=(t=null==v?void 0:v.conversationId)?t:""),j=null==b?void 0:b[0],y=(0,ex.useCallback)(e=>{o("clicked_logo",void 0,{location:"chat-top-nav:TopLeftButton",insideWorkspace:String(!!j),fromRoute:h.page}),e.stopPropagation(),null==i||i(e)},[o,j,h.page,i]);return(0,s.jsx)(G.N_,{route:{page:"main"},"aria-label":l("Home page","Home page",{ns:"chat"}),onClick:y,className:(0,V.cn)("rounded-lg focus:outline-none focus-visible:ring-1 focus-visible:ring-ring",a?"":"ms-2 me-[0.5]",r),children:(0,s.jsx)(p,{className:(0,V.cn)("opacity-90 hover:opacity-100 fill-black dark:fill-white max-w-full","[&>path]:hidden sm:[&>path]:block [&>#mark]:block [&>#furigana]:opacity-60 [&>#subtitle]:opacity-60","/"===x&&!f&&"sm:[&>path]:hidden",a&&C.vu)})})}function eM(e){let{conversation:t}=e,{getPersonaFromId:a}=(0,R.v5)();if(!t)return null;let n=a(t.personaId);if(!n)return null;let{icon:r,colorClassName:i}=(0,g.e8)(n.personaId);return(0,s.jsxs)(ec.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:(0,V.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-secondary flex flex-row items-center gap-1","ml-2 mt-0.5","overflow-hidden"),children:[(0,s.jsx)("span",{className:(0,V.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5",i),children:r}),(0,s.jsx)("span",{className:(0,V.cn)("max-w-[0px] @[340px]/nav:max-w-[75px] @[375px]/nav:max-w-[100px]","@[430px]/nav:max-w-[150px] truncate"),children:n.name})]})}function eE(e){let{conversation:t,drawerOpen:a,setDrawerOpen:n}=e,{t:r}=(0,eh.Bd)("base"),i=(0,J.M)(e=>e.listStatus),l=(0,J.M)(e=>e.loadFirstPage);(0,ex.useEffect)(()=>{"ready"!==i&&l()},[i,l]);let c=(0,J._)(),d=(0,J.M)(e=>e.createWorkspace),u=(0,ex.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d({name:r("chat-top-nav.new-project","New Project"),icon:(0,S.I)()}).catch((0,W.HX)("conversation-actions:create-project"))},[d,r]);return(0,s.jsx)(w._s,{open:a,onOpenChange:n,children:(0,s.jsxs)(w.zj,{className:"max-h-[80%]",children:[(0,s.jsx)(w.gk,{className:"px-5 pt-4",children:r("chat-top-nav.move-to-project","Move to Project")}),(0,s.jsx)("div",{className:"overflow-auto p-4",children:(null==c?void 0:c.length)?(0,s.jsx)("div",{className:"flex flex-col gap-2",children:c.map(e=>(0,s.jsx)("div",{className:"py-2 cursor-pointer hover:bg-button-secondary-hover rounded-lg",children:(0,s.jsx)(eT,{projectId:e.workspaceId,conversation:t,onClick:()=>n(!1)})},e.workspaceId))}):(0,s.jsx)(o.C,{content:r("chat-top-nav.no-projects","No projects yet"),ctaText:r("chat-top-nav.create-project","Create Project"),onClickCta:u},"no-projects")})]})})}function ez(e){let{conversation:t,setDrawerOpen:a}=e,{t:n}=(0,eh.Bd)("base"),r=(0,J.M)(e=>e.listStatus),i=(0,J.M)(e=>e.loadFirstPage),l=(0,T.Di)();(0,ex.useEffect)(()=>{"ready"!==r&&i()},[r,i]);let c=(0,J._)(),d=(0,J.M)(e=>e.createWorkspace),m=(0,ex.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d({name:n("chat-top-nav.new-project","New Project"),icon:(0,S.I)()}).catch((0,W.HX)("conversation-actions:create-project"))},[d,n]);return l?(0,s.jsx)(k._2,{onClick:()=>a(!0),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.XR,{size:17}),n("chat-top-nav.move-to-project","Move to Project")]})}):(0,s.jsxs)(k.lv,{children:[(0,s.jsx)(k.nV,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.XR,{size:17}),n("chat-top-nav.move-to-project","Move to Project")]})}),(0,s.jsx)(k.dc,{children:(0,s.jsx)(k.M5,{className:"w-[250px]",children:(null==c?void 0:c.length)?(0,s.jsx)(s.Fragment,{children:c.map(e=>(0,s.jsx)(k._2,{children:(0,s.jsx)(eT,{projectId:e.workspaceId,conversation:t},e.workspaceId)},e.workspaceId))}):(0,s.jsx)(o.C,{content:n("chat-top-nav.no-projects","No projects yet"),ctaText:n("chat-top-nav.create-project","Create Project"),onClickCta:m},"no-projects")})})]},"add-to-workspace-button")}let eT=e=>{var t;let{projectId:a,conversation:n,onClick:r}=e,{t:i}=(0,eh.Bd)("base"),l=(0,J.M)(e=>{var t;return null==(t=e.byId[a])?void 0:t.data}),{mutate:o,error:c}=(0,$.tX)({onSuccess:()=>{ef.oR.success(i("chat-top-nav.moved-chat-to-project","Moved chat to project"))}});(0,B.Y)("chat-top-nav:workspace-item",c);let d=(0,ex.useCallback)(()=>{null==r||r(),o({conversationId:n.conversationId,workspaceId:a})},[o,n.conversationId,a,r]);return(0,s.jsxs)("div",{className:(0,V.cn)("w-full flex flex-row items-center gap-2"),onClick:d,children:[(0,s.jsx)(I.n,{icon:null==l?void 0:l.icon,sizeClass:"size-4",rounded:!0,buttonSize:"iconXs",disabled:!0}),(0,s.jsxs)("span",{className:(0,V.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden text-left"),style:{maskImage:O.uU,WebkitMaskImage:O.uU},children:[null!=(t=null==l?void 0:l.name)?t:"Unnamed Project"," "]})]})}},74933:(e,t,a)=>{a.d(t,{p:()=>i});var s=a(79342),n=a(88382),r=a(61312);let i=n.forwardRef((e,t)=>{let{className:a,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input-border bg-transparent px-3 py-1 text-sm shadow-sm file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},80295:(e,t,a)=>{a.d(t,{s:()=>r});var s=a(88382),n=a(10731);function r(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,[r,i]=(0,s.useState)(e);return(0,s.useEffect)(()=>{i(e)},[e]),(0,n.A)(()=>t(r),a,[r]),[r,i]}},81745:(e,t,a)=>{a.d(t,{CommandMenu:()=>eV});var s=a(79342),n=a(39551),r=a(88382),i=a(38614),l=a(5663),o=a(68332),c=a(80295),d=a(75500),u=a(33231),m=a(23232),p=a(41320),x=a(98100),h=a(91102),g=a(24734),f=a(7658),v=a(17703),b=a(77232),j=a(84499),y=a(61312),w=a(49972),k=a(44347),N=a(17014),C=a(97377),S=a(40938),I=a(71766),A=a(43724),P=a(84969),_=a(33846),M=a(16506),E=a(39116),z=a(74995),T=a(65146),D=a(42557),R=a(56691),K=a(24994),L=a(43086),B=a(92207);let O=e=>{let{name:t,value:a,keywords:i,icon:l,children:o,onTrigger:c}=e,d=(0,r.useMemo)(()=>(0,B.Jo)({type:"action",value:a}),[a]);return(0,s.jsx)(n.uB.Item,{keywords:i,value:d,onSelect:c,className:(0,y.cn)("flex cursor-pointer h-[48px] items-center gap-2 rounded-2xl px-3","data-[selected=true]:bg-button-ghost-hover"),children:o||(0,s.jsx)("div",{className:"flex flex-grow items-center justify-between gap-2 min-w-0",children:(0,s.jsxs)("div",{className:"flex flex-grow items-center gap-2 min-w-0",children:[l&&r.createElement(l,{size:16,className:"text-subtle flex-shrink-0 h-4 w-4"}),(0,s.jsx)("div",{className:"truncate",children:t})]})})})};var F=a(17338);let H=e=>{let{heading:t,className:a,children:r}=e;return(0,s.jsx)(n.L$,{heading:(0,s.jsx)("div",{className:(0,F.cx)("text-secondary px-3 pb-1.5 pt-2 text-sm",a),children:t}),children:r})};var $=a(19841);let U=(0,r.memo)(e=>{let{conversation:t,highlight:a,matchType:l}=e,o=(0,i.aP)(z.A("conversationId")),[c,d]=(0,r.useState)(!1),u=(0,r.useMemo)(()=>"MATCH_MESSAGE"===l&&a,[l,a]),m=(0,r.useMemo)(()=>o===t.conversationId,[o,t.conversationId]),p=(0,r.useMemo)(()=>(0,B.Jo)({type:"conversation",conversationId:t.conversationId}),[t.conversationId]);return(0,s.jsx)(n.uB.Item,{value:p,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:(0,y.cn)("h-[48px] rounded-2xl grid grid-cols-1 grid-rows-1","data-[selected=true]:bg-button-ghost-hover",u&&"h-[64px]"),children:(0,s.jsx)($.w,{...e,isHovered:c,isCurrent:m})})});var W=a(35181),G=a(48992),V=a(43893),X=a(10505),Y=a(87906),Q=a(30653),q=a(57416),Z=a(98008),J=a(39945),ee=a(37469),et=a(86822),ea=a(53915),es=a(46815);let en=(0,r.forwardRef)((e,t)=>{var a,n;let{response:i,showMarkdown:l,matchedWords:o}=e,{t:c}=(0,T.Bd)("chat"),d=(0,et.d)(z.A("fetchGetAsset")),u=(0,k.C$)(e=>e.userSettings.preferences.displayUserMessageMarkdown),{sender:m,message:p,cardAttachmentsJson:x,fileAttachments:h,responseId:g}=i,[f,v]=(0,r.useState)({}),b=(0,r.useMemo)(()=>Object.values(f),[f]),j=(0,r.useMemo)(()=>b.filter(e=>!e.isModelGenerated),[b]),w=(0,r.useMemo)(()=>"human"===i.sender,[i.sender]),N=(0,r.useMemo)(()=>!w||(null!=l?l:u),[w,l,u]),C=(0,r.useMemo)(()=>{var e,t;return(null==(e=i.generatedImageUrls)?void 0:e.length)||Object.keys(null!=(t=i.streamingImageById)?t:{}).length},[null==(a=i.generatedImageUrls)?void 0:a.length,i.streamingImageById]),S=(0,r.useMemo)(()=>!w&&!!C,[w,C]),[I,A]=(0,r.useMemo)(()=>{let{webSearchResults:e,xposts:t,steps:a}=i,s=[...t||[],...(a||[]).flatMap(e=>e.xposts||[])],n=[...e||[],...(a||[]).flatMap(e=>e.webSearchResults||[])],r=new Set,l=s.filter(e=>!(!(null==e?void 0:e.postId)||r.has(e.postId))&&(r.add(e.postId),!0)),o=new Set;return[l,n.filter(e=>!(!(null==e?void 0:e.url)||o.has(e.url))&&(o.add(e.url),!0))]},[i]),P=(0,r.useMemo)(()=>p?(0,X.V)(p):p,[p]);return(0,r.useEffect)(()=>{null==h||h.forEach(e=>{d({assetId:e}).then(t=>{v(ea.A(es.A(e),t))}).catch(()=>{})})},[h,d,v]),(0,s.jsxs)("div",{ref:t,className:(0,y.cn)("relative group flex flex-col justify-center px-4 pb-2 gap-2",w?"items-end":"items-start"),children:[(0,s.jsxs)(Q.s,{isUser:w,children:[(null==(n=i.steps)?void 0:n.length)?(0,s.jsxs)("div",{className:"text-secondary h-auto flex items-center justify-start gap-1 rounded-xl border-divider py-1",children:[(0,s.jsx)(J.WI,{size:18,className:"text-secondary text-nowrap shrink-0"}),(0,s.jsx)("span",{children:"deeper"===i.deepsearchPreset?c("DeeperSearch Performed","DeeperSearch Performed"):c("DeepSearch Performed","DeepSearch Performed")})]}):i.thinkingTrace?(0,s.jsxs)("div",{className:"text-secondary h-auto flex items-center justify-start gap-1 rounded-xl border-divider py-1",children:[(0,s.jsx)(J.xm,{size:18,className:"text-secondary text-nowrap shrink-0"}),(0,s.jsx)("span",{children:c("Thinking Performed","Thinking Performed")})]}):null,x&&x.length>0&&(0,s.jsx)("div",{className:"flex flex-col space-y-3",children:x.map((e,t)=>(0,s.jsx)(Z._,{cardAttachmentJson:e},"".concat(g,"-card-").concat(t)))}),(0,s.jsx)(Y.m,{response:i,isStreaming:!1,numImages:C||0,readOnly:!0,disableImageClick:!0}),S?null:N?(0,s.jsx)(q.Ad,{sender:m||"",webSearchResults:A||er,xposts:I||er,hideCitations:(null!=I?I:[]).length+(null!=A?A:[]).length===0,matchedWords:o,cardAttachmentsJson:x,shouldRenderHtml:!0,children:P||""}):(0,s.jsx)("span",{className:"whitespace-pre-wrap",children:(0,q.Sw)(P||"",o)})]}),j.length>0&&(0,s.jsx)("div",{className:"flex flex-row flex-wrap justify-end gap-2 mt-2",children:j.map(e=>(0,s.jsx)(ee.u,{asset:e,isPrivate:!1,isDisabled:!0,allowCompact:!0},e.assetId))})]},null==o?void 0:o.join(""))}),er=[],ei=e=>{let{conversationResults:t}=e,{t:a}=(0,T.Bd)("base"),n=(0,V.A3)(z.A("loadPreviewResponses")),i=(0,B.H0)(z.A("selectedItem")),l=(0,r.useMemo)(()=>{if((null==i?void 0:i.type)==="conversation")return i.conversationId},[i]),o=(0,r.useMemo)(()=>l?t.find(e=>e.conversation.conversationId===l):void 0,[l,t]),c=(0,r.useMemo)(()=>{if(l)return n(l,null==o?void 0:o.matchedResponseId)},[l,null==o?void 0:o.matchedResponseId,n]),{data:d={responses:[],hasOlderResponses:!1,hasNewerResponses:!1},isLoading:u,error:m}=(0,W.v)(c),p=(0,r.useMemo)(()=>{var e;return null==(e=d.responses)?void 0:e.filter(e=>!e.responseId.startsWith("streaming_in_progress")&&(!e.state||"closed"===e.state))},[d.responses]),x=(0,r.useMemo)(()=>{let e=(0,G.Mb)(p),t=(0,G.d7)((null==e?void 0:e.responseId)||"",d.responses);return p.filter(e=>!!t.find(t=>t.responseId===e.responseId))},[p,d.responses]),h=(0,k.C$)(e=>e.userSettings.preferences.displayUserMessageMarkdown);return(0,s.jsxs)("div",{className:"col-span-1 xl:col-span-3 flex items-center justify-center overflow-auto h-full relative py-0.5 @container/preview",children:[(0,s.jsx)("div",{className:"absolute z-10 inset-x-0 bottom-0 h-6 bg-gradient-to-t from-background to-transparent"}),(0,s.jsx)("div",{className:"absolute z-10 inset-x-0 top-0 h-6 bg-gradient-to-b from-background to-transparent"}),(0,s.jsx)(P.N,{mode:"wait",children:l?m?(0,s.jsxs)(_.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1},transition:{duration:.1,ease:"easeIn"},className:"text-secondary flex items-center gap-3",children:[(0,s.jsx)(S.A,{}),a("Error Loading Messages","Error Loading Messages")]},"error"):u?(0,s.jsxs)(_.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1,transition:{duration:.05}},transition:{duration:.1,ease:"easeIn"},className:"text-secondary flex justify-center items-center gap-3",children:[a("Loading Messages","Loading Messages"),(0,s.jsx)(L.y,{size:"sm"})]},"loading"):(0,s.jsx)(el,{hasOlderResponses:d.hasOlderResponses,hasNewerResponses:d.hasNewerResponses,messages:x,showMarkdown:h,matchedResponseId:null==o?void 0:o.matchedResponseId,matchedWords:null==o?void 0:o.matchedWords},l):(0,s.jsx)(_.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1},transition:{duration:.1,ease:"easeIn"},className:"text-secondary flex items-center gap-3",children:a("Select a conversation to preview","Select a conversation to preview")},"no-conversation")})]})},el=e=>{let{messages:t,hasOlderResponses:a,hasNewerResponses:n,showMarkdown:i,matchedResponseId:l,matchedWords:o}=e,c=(0,r.useRef)(null),d=(0,r.useRef)(null),{t:u}=(0,T.Bd)("base");return(0,r.useEffect)(()=>{if(c.current)if(l&&d.current){var e;null==(e=d.current)||e.scrollIntoView({behavior:"smooth",block:"center"})}else c.current.scrollTop=c.current.scrollHeight},[l,t]),(0,s.jsxs)(_.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1,transition:{duration:.05}},transition:{duration:.1,ease:"easeIn"},className:"h-full w-full overflow-auto flex flex-col gap-3 py-6 px-3",ref:c,children:[a&&(0,s.jsx)("div",{className:"text-secondary text-center mb-4",children:u("Open the conversation to see older messages","Open the conversation to see older messages")}),t.sort((e,t)=>null===e.parentResponseId||e.parentResponseId===t.responseId?1:-1).map(e=>(0,s.jsx)(en,{ref:l===e.responseId?d:void 0,response:e,matchedWords:l===e.responseId?o:void 0,showMarkdown:"human"===e.sender?i:void 0},e.responseId)),n&&(0,s.jsx)("div",{className:"text-secondary text-center mt-4",children:u("Open the conversation to see newer messages","Open the conversation to see newer messages")})]})},eo=e=>{let{label:t,variant:a,shortcut:n,onTrigger:r}=e;return(0,s.jsxs)(R.$n,{variant:"ghost",size:"sm",className:"pr-1.5 last-of-type:rounded-br-2xl group",onClick:r,children:[(0,s.jsx)("span",{className:(0,y.cn)("whitespace-nowrap",{"text-red-400":"destructive"===a,"text-primary":"default"===a}),children:t}),n&&(0,s.jsx)("span",{className:"text-secondary border border-border px-1.5 rounded-md group-last-of-type:group-hover:rounded-br-xl group-last-of-type:group-focus:rounded-br-xl",children:n})]})};var ec=a(26067),ed=a(58020),eu=a(82263);let em=e=>{let{actions:t}=e,{t:a,i18n:n}=(0,T.Bd)("base"),i=(0,k.C$)(z.A("selectedLanguage")),l=(0,r.useMemo)(()=>i||n.languages.find(e=>e in ec.IV)||ec.GG,[n.languages,i]);return(0,s.jsx)(H,{heading:a("Language","Language"),children:t.map(e=>{var t;return(0,s.jsx)(O,{...e,children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full min-w-0",children:[(0,s.jsx)(ed.A,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-secondary whitespace-nowrap truncate",children:(0,s.jsx)(T.x6,{t:a,ns:"base",i18nKey:"Change to",defaults:"Change to <primary>{{name}}</primary>",values:{name:e.name},components:{primary:(0,s.jsx)("span",{className:"text-primary"})}})})]}),l===e.value?(0,s.jsx)(eu.A,{className:"w-4 h-4 text-secondary"}):(0,s.jsx)("span",{className:"text-secondary whitespace-nowrap",children:null==(t=ec.IB[e.value])?void 0:t.nativeName})]})},e.value)})})};var ep=a(68746);let ex=e=>{let{actions:t}=e,{t:a}=(0,T.Bd)("base"),n=(0,i.aP)(z.A("activeModelId"));return(0,s.jsx)(H,{heading:a("Models","Models"),children:t.map(e=>(0,s.jsx)(O,{...e,children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,s.jsx)(ep.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-secondary whitespace-nowrap truncate",children:(0,s.jsx)(T.x6,{ns:"base",i18nKey:"Switch to",defaults:"Switch to <primary>{{name}}</primary>",values:{name:e.name},components:{primary:(0,s.jsx)("span",{className:"text-primary"})}})})]}),n===e.value&&(0,s.jsx)(eu.A,{className:"w-4 h-4 text-secondary"})]})},e.value))})};var eh=a(56173),eg=a(86639),ef=a(13511),ev=a(74933);function eb(e){let{isCopied:t,setIsCopied:a,lastMessageId:n,conversationId:i,onShareLinkChange:l,onShareLinkCopy:o}=e,{t:c}=(0,T.Bd)("base"),{mutate:d,data:u,isPending:m,isIdle:p,isError:x}=(0,ef.n_)({mutationKey:["share-conversation",i,n],mutationFn:()=>eh.chatApi.chatShareConversation({conversationId:i,body:{responseId:n}}),onSuccess:e=>{let{shareLinkId:t}=e;t&&l(t)}});(0,r.useEffect)(()=>{p&&d()},[]),(0,r.useEffect)(()=>()=>{a(!1),l(null)},[]);let h=u?window.location.origin+"/share/"+u.shareLinkId:null;return(0,s.jsxs)("div",{className:"flex flex-col gap-6 py-12",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,s.jsx)("div",{className:"text-lg text-center",children:c("Share this conversation","Share this conversation")}),(0,s.jsx)("div",{className:"text-secondary text-center",children:c("Share this conversation.description","This conversation will be visible to anyone with the shared link.")})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 w-[min(100%,460px)] mx-auto",children:[m&&!x||h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative border border-border-l1 rounded-2xl py-1",children:[(0,s.jsx)(ev.p,{type:"text",value:h||"".concat(c("Loading","Loading"),"..."),disabled:!0,className:"flex-1 w-full rounded-xl pl-3 pr-24 py-5 text-sm text-primary border-none shadow-none"}),m?(0,s.jsx)("div",{className:"absolute inset-y-0 end-0 pr-2 flex items-center",children:(0,s.jsx)(L.y,{size:"xs"})}):(0,s.jsx)("div",{className:"absolute inset-y-0 end-0 pr-1 flex items-center",children:(0,s.jsx)(R.$n,{variant:"ghostSecondary",onClick:o,className:"text-primary",autoFocus:!0,children:t?c("Copied!","Copied!"):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.Td,{className:"size-4"}),c("Copy","Copy")]})})})]}),(0,s.jsx)("div",{className:"!w-fit mx-auto",children:(0,s.jsx)("a",{href:m?void 0:"https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(h)),target:m?void 0:"_blank",rel:m?void 0:"noopener noreferrer",children:(0,s.jsxs)(R.$n,{variant:"filled",className:"w-60 sm:min-w-24",disabled:m,children:[c("Share on","Share on"),(0,s.jsx)(eg.A,{size:14})]})})})]}),x&&(0,s.jsx)("div",{className:"text-red-500",children:c("Failed to share conversation","Failed to share conversation")})]})]})}var ej=a(88119);let ey=e=>{let{actions:t}=e,{t:a}=(0,T.Bd)("base"),{theme:n}=(0,M.D)();return(0,s.jsx)(H,{heading:a("Theme","Theme"),children:t.map(e=>(0,s.jsx)(O,{...e,children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[Object.keys(ej.zG).includes(e.value)&&ej.zG[e.value]&&r.createElement(ej.zG[e.value].icon,{size:16,className:"text-subtle flex-shrink-0 h-4 w-4"}),(0,s.jsx)("span",{className:"text-secondary whitespace-nowrap truncate",children:(0,s.jsx)(T.x6,{t:a,ns:"base",i18nKey:"Switch to",defaults:"Switch to <primary>{{name}}</primary>",values:{name:e.name},components:{primary:(0,s.jsx)("span",{className:"text-primary"})}})})]}),n===e.value&&(0,s.jsx)(eu.A,{className:"w-4 h-4 text-secondary"})]})},e.value))})};var ew=a(95366),ek=a.n(ew);let eN=(e,t)=>t.length?e.filter(e=>Math.max(ek()("string"==typeof e.name?e.name:e.value,t),e.keywords?e.keywords.reduce((e,a)=>{let s=ek()(a,t);return s>e?s:e},0):0)>.3):e,eC=e=>{let{searchQuery:t}=e,{t:a}=(0,T.Bd)("base"),s=(0,i.aP)(z.A("conversationId")),n=(0,r.useMemo)(()=>{let e=[];return s&&e.push({name:a("Share","Share"),value:"share",keywords:["share","link","x"],icon:J.li,onTrigger:()=>{let{addPage:e}=B.H0.getState();e({id:"share",isSearchEnabled:!1,searchQuery:""})}}),e},[s,a]);return{actions:(0,r.useMemo)(()=>eN(n,t),[n,t])}};var eS=a(30590),eI=a(91807),eA=a(23823),eP=a(12824),e_=a(2376),eM=a(70888),eE=a(18585),ez=a(5790),eT=a(48795);let eD=e=>{let{searchQuery:t,onClose:a}=e,{t:n}=(0,T.Bd)("base"),l=(0,B.H0)(z.A("addPage")),c=(0,B.H0)(z.A("onSearchQueryChange")),{routeToConversation:u,isChatPage:p}=(0,o.o)(),{theme:h}=(0,M.D)(),{user:g}=(0,D.wV)(),{modelById:f}=(0,x.GB)(),v=(0,d.h)(),b=(0,E.useRouter)(),j=(0,i.aP)(z.A("activeModelId")),y=(0,i.aP)(z.A("reasoningMode")),N=(0,i.aP)(z.A("setReasoningMode")),C=(0,i.aP)(z.A("conversationMode")),S=(0,i.aP)(z.A("conversationId")),I=(0,i.aP)(z.A("isDeepSearchRateLimited")),A=(0,i.aP)(z.A("isThinkingRateLimited")),P=(0,k.C$)(z.A("setIsIncognito")),_=(0,k.C$)(z.A("isIncognito")),R=(0,w.w)(e=>S?e.byId[S]:void 0),K=(0,m._)(),L=(0,ez.iV)(z.A("toggleOpen")),O=(0,ez.iV)(z.A("open")),F=(0,r.useMemo)(()=>{if(R&&(0,e_.sS)(R.personaId))return(0,eE.pL)(R.personaId,n)},[R,n]),H=(0,r.useMemo)(()=>null==f?void 0:f[j],[j,f]),$=(0,r.useMemo)(()=>{var e;return null==H||null==(e=H.tags)?void 0:e.includes("deepsearch")},[H]),U=(0,r.useMemo)(()=>{var e;return null==H||null==(e=H.tags)?void 0:e.includes("always_show_deepsearch")},[H]),W=(0,r.useMemo)(()=>{var e;return null==H||null==(e=H.tags)?void 0:e.includes("think")},[H]),G=(0,r.useMemo)(()=>{var e;return null==H||null==(e=H.tags)?void 0:e.includes("always_show_think")},[H]),{isThinkDisabled:V,isDeepsearchDisabled:X,isThinkSelected:Y,isDeepsearchSelected:Q}=(0,x.QG)(H),{handleVoiceModeEnter:q,handleVoiceModeExit:Z}=(0,eT.F)({location:"command-menu"}),ee=(0,r.useMemo)(()=>!(!H||X||F&&F.hideDeepSearch||!$&&!U||I||U&&!$),[H,X,$,U,F,I]),et=(0,r.useMemo)(()=>!(!H||V||F&&F.hideThinking||!W&&!G||A||G&&!W),[H,V,W,G,F,A]),ea=(0,r.useCallback)(()=>{c(""),P(!1),u(void 0),a()},[a,c,P,u]),es=(0,r.useCallback)(()=>{c(""),P(!0),u(void 0),a()},[a,c,P,u]),en=(0,r.useCallback)(()=>{let e=i.aP.getState(),t=eM.x.getState();return t.removeByConversationId(e.conversationId||"no_conversation_id"),t.removeAttachByConversationId(e.conversationId||"no_conversation_id"),c(""),a(),q()},[a,c,q]),er=(0,r.useCallback)(()=>(c(""),a(),Z()),[a,c,Z]),ei=(0,r.useMemo)(()=>{let e=[];return g||e.push({name:n("Sign in","Sign in"),value:"sign-in",icon:eS.A,keywords:["enter","sign","in","login"],onTrigger:()=>{K("sign_in_redirect",void 0,{location:"command-menu"}),b.push("/sign-in"),a()}}),S||!p?(e.push({name:n("Create New Chat","Create New Chat"),value:"new-chat",icon:J.cJ,keywords:["new","start","conversation"],onTrigger:ea}),g&&e.push({name:n("Create New Private Chat","Create New Private Chat"),value:"new-private-chat",icon:J.FE,keywords:["new","start","conversation","incognito","private"],onTrigger:es})):_?e.push({name:n("Create New Chat","Create New Chat"),value:"new-chat",icon:J.cJ,keywords:["new","start","conversation"],onTrigger:ea}):g&&e.push({name:n("Create New Private Chat","Create New Private Chat"),value:"new-private-chat",icon:J.FE,keywords:["new","start","conversation","incognito","private"],onTrigger:es}),v.ENABLE_VOICE_MODE&&!_&&"voice"!==C&&e.push({name:n("Enter Voice Mode","Enter Voice Mode"),value:"voice-mode",keywords:["enter","voice","mode","talk","companion"],icon:eI.A,onTrigger:en}),"voice"===C&&e.push({name:n("Exit Voice Mode","Exit Voice Mode"),value:"exit-voice-mode",keywords:["exit","voice","mode"],icon:eI.A,onTrigger:er}),S&&g&&e.push({name:n("command-menu.move-to-workspace.label","Move conversation to project"),value:"move-to-workspace",icon:J.XR,keywords:["workspace","move"],onTrigger:()=>l({id:"move-to-workspace",isSearchEnabled:!0,searchQuery:"",searchPlaceholder:n("command-menu.move-to-workspace.placeholder","Find project...")})}),e.push({name:n("Switch Model","Switch Model"),value:"switch-model",icon:ep.A,keywords:["switch","model"],onTrigger:()=>l({id:"switch-model",isSearchEnabled:!0,searchQuery:"",searchPlaceholder:n("Search models...","Search models...")})},{name:n("Switch Theme","Switch Theme"),value:"switch-theme",icon:h&&Object.keys(ej.zG).includes(h)?ej.zG[h].icon:eA.A,keywords:["switch","theme"],onTrigger:()=>l({id:"switch-theme",isSearchEnabled:!0,searchQuery:"",searchPlaceholder:n("Search themes...","Search themes...")})}),et&&(e.push({name:Y?(0,s.jsx)(T.x6,{ns:"base",i18nKey:"Disable Tool",defaults:"Disable <primary>{{name}}</primary>",values:{name:n("Think","Think")},components:{primary:(0,s.jsx)("span",{className:"font-medium"})}}):(0,s.jsx)(T.x6,{ns:"base",i18nKey:"Enable Tool",defaults:"Enable <primary>{{name}}</primary>",values:{name:n("Think","Think")},components:{primary:(0,s.jsx)("span",{className:"font-medium"})}}),value:"think",icon:J.xm,keywords:[n("Think","Think"),"think","tool","mode","reason"].concat(Y?[n("Disable","Disable")]:[n("Enable","Enable")]),onTrigger:()=>{let e="think"==y?"none":"think";K("switch_reasoning_mode",e,{location:"command-menu:useHomeActions"}),N(e),a()}}),ee&&e.push({name:Q?(0,s.jsx)(T.x6,{ns:"base",i18nKey:"Disable Tool",defaults:"Disable <primary>{{name}}</primary>",values:{name:n("DeepSearch","DeepSearch")},components:{primary:(0,s.jsx)("span",{className:"font-medium"})}}):(0,s.jsx)(T.x6,{ns:"base",i18nKey:"Enable Tool",defaults:"Enable <primary>{{name}}</primary>",values:{name:n("DeepSearch","DeepSearch")},components:{primary:(0,s.jsx)("span",{className:"font-medium"})}}),value:"deepsearch",icon:J.A,keywords:[n("DeepSearch","DeepSearch"),"deepsearch","search","research","tool","mode","reason"].concat(Q?[n("Disable","Disable")]:[n("Enable","Enable")]),onTrigger:()=>{let e="deepsearch"==y?"none":"deepsearch";K("switch_reasoning_mode",e,{location:"command-menu:useHomeActions"}),N(e),a()}}),e.push({name:n("Change Language","Change Language"),value:"change-language",icon:ed.A,keywords:["change","language","locale"],onTrigger:()=>{l({id:"change-language",isSearchEnabled:!0,searchQuery:"",searchPlaceholder:n("Search languages...","Search languages...")})}}),O||e.push({name:n("Settings","Settings"),value:"settings",icon:J.DP,keywords:["settings","preferences"],onTrigger:()=>{L(),a()}}),g&&e.push({name:n("Sign out","Sign out"),value:"sign-out",icon:eP.A,keywords:["exit","sign","out","logout"],onTrigger:()=>{b.push("/sign-out"),a()}})),e},[S,ea,es,g,_,ee,et,Y,Q,h,y,O,L,l,p,a,b,N,K,n,en,er,v,C]);return{actions:(0,r.useMemo)(()=>eN(ei,t),[ei,t])}},eR=e=>{let{searchQuery:t,onLanguageChange:a}=e,s=(0,r.useMemo)(()=>ec.O4.map(e=>({name:ec.IB[e].name,value:e,keywords:[ec.IB[e].nativeName,ec.IB[e].name],icon:ed.A,onTrigger:()=>{a(e)}})),[a]);return{actions:(0,r.useMemo)(()=>eN(s,t),[s,t])}};var eK=a(3683),eL=a(5443),eB=a(48589),eO=a(5862),eF=a(20014),eH=a(82646);let e$=e=>{let{searchQuery:t,onModelSwitch:a}=e,{models:s}=(0,x.GB)(),n=(0,r.useMemo)(()=>s.filter(e=>!!e.name).map(e=>({name:e.name,type:"action",value:e.modelId,icon:eH.dNu,onTrigger:()=>{a(e.modelId)}})),[s,a]);return{actions:(0,r.useMemo)(()=>eN(n,t),[n,t])}},eU=e=>{let{searchQuery:t,onThemeSwitch:a}=e,{t:s}=(0,T.Bd)("base"),n=(0,r.useMemo)(()=>{let e={light:s("Light","Light"),dark:s("Dark","Dark"),system:s("System","System")};return Object.entries(ej.zG).map(t=>{let[s,{icon:n}]=t;return{name:e[s],value:s,icon:n,onTrigger:()=>{a(s)}}})},[s,a]);return{actions:(0,r.useMemo)(()=>eN(n,t),[n,t])}},eW=e=>{let{searchQuery:t,onSelect:a}=e,n=(0,eK._)(),i=(0,r.useMemo)(()=>n.map(e=>{var t,n;let r=null!=(t=e.name)?t:"",i=null!=(n=e.workspaceId)?n:"";return{name:r,type:"action",value:i,keywords:[r],icon:()=>(0,s.jsx)(eL.Oh,{icon:e.icon}),onTrigger:()=>{i&&a(i)}}}),[n,a]);return{actions:(0,r.useMemo)(()=>eN(i,t),[i,t])}},eG=e=>{let{actions:t}=e,{t:a}=(0,T.Bd)("base");return(0,s.jsx)(H,{heading:a("command-menu-section.workspace","Project"),children:t.map(e=>(0,s.jsx)(O,{...e},e.value))})};function eV(e){let{trigger:t}=e,{t:a,i18n:F}=(0,T.Bd)("base"),$=(0,d.h)(),W={today:a("Today","Today"),yesterday:a("Yesterday","Yesterday"),"last-7-days":a("Last 7 Days","Last 7 Days"),"this-year":a("This Year","This Year"),older:a("Older","Older")},G=(0,r.useRef)(null),V=(0,m._)(),{routeToConversation:X,signInWithReturnTo:Y}=(0,o.o)(),Q=(0,D.wV)().user,q=(0,E.useRouter)(),{commandPrefix:Z}=(0,h.c)(),J=(0,g.K)(),{push:ee}=(0,j.wK)(),et=(0,B.H0)(z.A("open")),ea=(0,B.H0)(z.A("selectedItem")),es=(0,B.H0)(z.A("pages")),en=(0,B.H0)(z.A("goBack")),er=(0,i.aP)(z.A("lastMessageId")),el=(0,i.aP)(z.A("conversationId")),ec=(0,i.aP)(z.A("activeModelId")),ed=(0,i.aP)(z.A("reasoningMode")),eu=(0,x.$E)(),ep=(0,k.C$)(e=>e.userSettings.preferences.showConversationPreviews),eg=(0,p.Di)(),[ev,ej]=(0,r.useState)(null),[ew,ek]=(0,r.useState)(null),[eS,eI]=(0,r.useState)(""),[eA,eP]=(0,r.useState)(null),[eM,eE]=(0,r.useState)(!1),ez=(0,r.useMemo)(()=>es[es.length-1]||null,[es]),eT=(0,r.useMemo)(()=>Q&&"root"===ez.id&&!eg,[Q,ez.id,eg]),eH=(0,r.useMemo)(()=>eT&&ep,[ep,eT]),eV=(0,r.useMemo)(()=>ez.searchQuery.trim(),[ez.searchQuery]),eX=(0,r.useMemo)(()=>eM||ez.isSearchEnabled&&!!eV,[eM,ez.isSearchEnabled,eV]),{groupedConversations:eY,results:eQ,refetch:eq,loadMoreRef:eZ,historyContainerRef:eJ,isLoading:e0,isFetching:e1,isError:e2}=function(e){let{query:t}=e,a=(0,D.wV)().user,s=(0,eB.o)(t,200),n=(0,ef.jE)(),i=(0,g.K)(),l=(0,r.useRef)(null),o=(0,r.useRef)(null),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),p=(0,r.useCallback)(async e=>{let{pageParam:t}=e;if(!a)return{conversationResults:[],nextPageToken:void 0};try{var n,r,l;let e=await eh.chatApi.chatListConversations({searchQuery:s||void 0,pageToken:"string"==typeof t?t:void 0,pageSize:"60"});return{conversationResults:(null==(n=e.textSearchMatches)?void 0:n.length)?null==(r=e.textSearchMatches)?void 0:r.map(e=>{var t;return{...e,conversation:{...e.conversation,personaId:(0,e_._c)(null==(t=e.conversation)?void 0:t.systemPromptName),isNew:!1,state:"closed"}}}):(null==(l=e.conversations)?void 0:l.map(e=>({conversation:{...e,personaId:(0,e_._c)(e.systemPromptName),isNew:!1,state:"closed"}})))||[],nextPageToken:e.nextPageToken,textSearchMatches:e.textSearchMatches||[]}}catch(e){throw i("use-search-conversations",e),e}},[s,a,i]),{data:x,fetchNextPage:h,hasNextPage:f,isFetchingNextPage:b,isFetching:j,isError:y,isLoading:k,refetch:N}=(0,ef.qu)({queryKey:["conversations",s,null==a?void 0:a.userId],queryFn:p,initialPageParam:void 0,getNextPageParam:e=>e.nextPageToken,enabled:!!a,staleTime:6e5,refetchOnWindowFocus:!0}),C=(0,r.useMemo)(()=>{let e=(null==x?void 0:x.pages.flatMap(e=>e.conversationResults))||[],t=s?e:e.sort((e,t)=>new Date(t.conversation.modifyTime).getTime()-new Date(e.conversation.modifyTime).getTime());return eF.A(e=>e.conversation.conversationId,t)},[null==x?void 0:x.pages,s]),S=(0,r.useMemo)(()=>{let e=eO.YL.map(e=>{let{key:t}=e;return{timeRange:t,conversations:[]}});return C.forEach(t=>{let{conversation:a}=t,s=(0,eO.JU)(a.modifyTime);if(s){let t=e.find(e=>e.timeRange===s);t&&t.conversations.push(a)}}),e.filter(e=>e.conversations.length>0)},[C]);return(0,r.useEffect)(()=>{let e=w.w.subscribe(e=>e.byId,(e,t)=>{let a=!1;Object.values(e).forEach(e=>{let s=t[e.conversationId];(s||e.temporary)&&(e.temporary||(null==s?void 0:s.modifyTime)===e.modifyTime&&(null==s?void 0:s.title)===e.title&&(null==s?void 0:s.starred)===e.starred&&(null==s?void 0:s.state)===e.state)||(a=!0)}),Object.values(t).forEach(t=>{e[t.conversationId]||(a=!0)}),a&&n.invalidateQueries({queryKey:["conversations"]}).catch(e=>(0,v.vV)("conversation-store-update",e))});return()=>e()},[n]),(0,r.useEffect)(()=>{if(!(null==l?void 0:l.current)||!(null==o?void 0:o.current))return;let e=new IntersectionObserver(e=>{let[t]=e;d(t.isIntersecting)},{root:o.current,rootMargin:"300px 0px 300px 0px",threshold:.1}),t=l.current;if(t)return e.observe(t),()=>{e.unobserve(t)}},[l,o]),(0,r.useLayoutEffect)(()=>{c&&f&&!b&&a&&!u&&(m(!0),h().catch(e=>(0,v.vV)("intersection-load-more",e)))},[c,f,b,h,a,u]),(0,r.useEffect)(()=>{if(u){let e=setTimeout(()=>{m(!1)},300);return()=>clearTimeout(e)}},[u]),{results:C,refetch:N,loadMoreRef:l,historyContainerRef:o,groupedConversations:S,isLoading:k,isFetching:j,isError:y}}({query:eV}),e6=(0,r.useCallback)(e=>{let{goBack:t,openMenu:a}=B.H0.getState();if(e)a();else{if(ev||ew){ej(null),ek(null),eI("");return}eE(!1),t()}},[ev,ew]),{actions:e3}=eD({searchQuery:eV,onClose:(0,r.useCallback)(()=>{e6(!1)},[e6])}),{actions:e8}=eC({searchQuery:eV}),e4=(0,r.useCallback)(e=>{V("switch_model",e,{location:"comand-menu"});let{setActiveModelId:t}=i.aP.getState();t(e);let{closeMenu:a}=B.H0.getState();a()},[V]),{actions:e5}=e$({searchQuery:eV,onModelSwitch:e4}),{mutate:e7,error:e9}=(0,f.tX)();(0,g.Y)("command-menu:addToWorkspace",e9);let{actions:te}=function(e){let{searchQuery:t,onWorkspaceSelected:a,hasCurrentConversation:n}=e,i=(0,eK._)();return(0,r.useMemo)(()=>n?{actions:eN(i.map(e=>({name:e.name,value:"workspace-"+e.workspaceId,icon:t=>{let{size:a}=t;return(0,s.jsx)(eL.Oh,{icon:e.icon,size:a})},onTrigger:()=>{var t;null==a||a(null!=(t=e.workspaceId)?t:"")}})),t)}:{actions:[]},[n,i,t,a])}({searchQuery:eV,onWorkspaceSelected:(0,r.useCallback)(e=>{let{closeMenu:t}=B.H0.getState();t(),el&&(e7({conversationId:el,workspaceId:e}),V("add_conversation_to_workspace",void 0,{location:"comand-menu"}))},[e7,el,V]),hasCurrentConversation:!!el}),{setTheme:tt}=(0,M.D)(),ta=(0,r.useCallback)(e=>{tt(e);let{closeMenu:t}=B.H0.getState();t()},[tt]),{actions:ts}=eU({searchQuery:eV,onThemeSwitch:ta}),tn=(0,r.useCallback)(e=>{F.changeLanguage(e).then(()=>{let{setSelectedLanguage:t}=k.C$.getState();t(e)}).catch(e=>(0,v.vV)("cmdk-language-change",e));let{closeMenu:t}=B.H0.getState();t()},[F]),{actions:tr}=eR({searchQuery:eV,onLanguageChange:tn}),{actions:ti}=eW({searchQuery:eV,onSelect:(0,r.useCallback)(e=>{let{closeMenu:t}=B.H0.getState();t(),ee({page:"workspace",workspaceId:e,tab:"attachments"})},[ee])}),tl=(0,r.useMemo)(()=>ea?ea.type:null,[ea]),to=(0,r.useMemo)(()=>ea?"home-action"===ea.type?e3.find(e=>e.value===ea.homeActionId)||null:"item-action"===ea.type&&e8.find(e=>e.value===ea.itemActionId)||null:null,[e3,e8,ea]),tc=(0,r.useMemo)(()=>e3[0]||null,[e3]),td=(0,r.useCallback)(e=>{eE(e)},[]),tu=(0,r.useCallback)(e=>{let{fetchSetPreference:t}=k.C$.getState();t("showConversationPreviews",e).catch((0,v.HX)("command-menu:handleShowConversationPreviewsChange"))},[]),tm=(0,r.useCallback)(e=>{let{setSelectedItem:t}=B.H0.getState();ev||ew||t(e)},[ev,ew]),[tp,tx]=(0,r.useState)(""),th=tp?(0,B.kw)(tp):void 0,tg=(0,r.useCallback)(e=>{let t=(0,B.kw)(e),{setSelectedItem:a}=B.H0.getState();a(t)},[]);(0,c.s)(tp,tg,100);let tf=(0,r.useCallback)(e=>{let{onSearchQueryChange:t}=B.H0.getState();t(e),ej(null),ek(null),eE(!1)},[]),tv=(0,r.useCallback)(e=>{var t;let a=eQ.find(t=>t.conversation.conversationId===e);eI((null==a||null==(t=a.conversation)?void 0:t.title)||""),ej(e)},[eQ]),[tb,tj]=(0,r.useState)(!1),ty=(0,r.useCallback)(()=>{let e=eA?window.location.origin+"/share/"+eA:null;e&&(tj(!0),(0,b.g)(e,a("Copied share link to clipboard.","Copied share link to clipboard.")),setTimeout(()=>tj(!1),1e3),V("clicked-share-copy",e,{location:"share-form",conversationId:el||"",responseId:er||"",shareUrl:e}))},[eA,a,V,el,er]),tw=(0,r.useCallback)(e=>{var t;let a,s=Array.from((null==(t=G.current)?void 0:t.querySelectorAll("[cmdk-item][data-value]:not([hidden])"))||[]);if(0===s.length)return;let n=ea?(0,B.kX)(ea):void 0,r=s.findIndex(e=>e.getAttribute("data-value")===n&&"true"===e.getAttribute("data-selected"));if(!G.current)return;a=-1!==r&&ea?"PageUp"===e?Math.max(0,r-8):Math.min(s.length-1,r+8):"PageDown"===e?0:s.length-1;let i=s[a];if(!i)return;let l=i.getAttribute("data-value"),o=i.getAttribute("data-type");l&&o&&(tm((0,B.P1)(o,l)),i.scrollIntoView({behavior:"instant",block:"PageUp"===e?"start":"end"}))},[ea,tm,G]),tk=(0,r.useCallback)(e=>{if(ev||ew)return;X(e,!1,!0);let t=w.w.getState().byId[e];V("select_conversation",e,{conversationCreateTime:(null==t?void 0:t.createTime)||"",location:"command-menu"}),e6(!1)},[ev,ew,X,V,e6]),tN=(0,r.useCallback)(async e=>{var t;if(ev!==e)return;let a=eS.trim();if(""===a)return;let s=eQ.find(t=>t.conversation.conversationId===e);V("update_conversation",e,{location:"search-dialog"}),ej(null);let{fetchUpdateConversation:n}=w.w.getState();await n(e,{title:a,starred:null==s||null==(t=s.conversation)?void 0:t.starred}).catch(e=>{J("command-menu:handleEditSave",e)}),await eq()},[eQ,J,ev,eS,eq,V]),tC=(0,r.useCallback)(async e=>{var t;let a=eQ.find(t=>t.conversation.conversationId===e);V("favorite_conversation",e,{value:(null==a?void 0:a.conversation.starred)?"true":"false",location:"search-dialog"});let{fetchUpdateConversation:s}=w.w.getState();await s(e,{starred:!(null==a||null==(t=a.conversation)?void 0:t.starred)}).catch(e=>{J("command-menu:handleToggleFavorite",e)}),await eq()},[eQ,J,eq,V]),tS=(0,r.useCallback)(async e=>{if(ew!==e)return;V("delete_conversation",e,{location:"search-dialog"}),el===ew&&X(),ek(null);let{fetchSoftDeleteConversation:t}=w.w.getState();await t(e).catch(e=>{J("command-menu:handleDeleteConfirm",e)}),await eq()},[ew,V,el,eq,X,J]),tI=(0,r.useCallback)(e=>{if(e.stopPropagation(),"Tab"===e.key&&e.preventDefault(),"PageUp"===e.key||"PageDown"===e.key){e.preventDefault(),tw(e.key);return}if("Enter"===e.key&&eV&&!e0&&0===eQ.length&&"root"===ez.id&&0===e5.length&&0===ts.length&&0===tr.length&&0===ti.length&&0===e3.length&&0===e8.length){if(e.preventDefault(),!Q&&(!$.ENABLE_ANON_USERS||eu.includes(ec))){V("sign_in","chat-new",{location:"chat-new"}),Y(eV,ed);return}let{establishNewConversation:t}=i.aP.getState();t({message:eV,enableRetries:$.ENABLE_AUTO_STREAM_RETRY,ff:$}).then(()=>{e6(!1)}).catch(e=>{J("command-menu:handleKeyDown",e)});return}if(ew&&"Enter"===e.key)return e.preventDefault(),tS(ew);if("share"===ez.id&&"Enter"===e.key)return e.preventDefault(),ty();if(!(ev||ew)&&(null==ea?void 0:ea.type)==="conversation"){if("e"===e.key.toLowerCase()&&e.shiftKey&&(e.metaKey||e.ctrlKey)){e.preventDefault(),tv(ea.conversationId);return}else if("d"===e.key.toLowerCase()&&e.shiftKey&&(e.metaKey||e.ctrlKey)){e.preventDefault(),ek(ea.conversationId);return}}if(("Backspace"===e.key&&!eV||"k"===e.key.toLowerCase()&&(e.metaKey||e.ctrlKey&&e.shiftKey))&&(e.preventDefault(),e6(!1)),eT&&"p"===e.key.toLowerCase()&&(e.metaKey||e.ctrlKey)&&e.shiftKey&&(e.preventDefault(),tu(!ep)),"Enter"===e.key&&(null==ea?void 0:ea.type)==="conversation")if(e.metaKey||e.ctrlKey)window.open("/chat/".concat(ea.conversationId),"_blank");else{let{fetchGetConversation:e}=w.w.getState();e(ea.conversationId).then(e=>tk(e.conversationId)).catch((0,v.HX)("command-menu:handleConversationSelect"))}},[eV,e0,eQ.length,ez.id,e5.length,ts.length,tr.length,ti.length,e3.length,e8.length,ew,ev,ea,eT,tw,Q,eu,ec,V,Y,ed,e6,J,tS,ty,tv,tu,ep,tk,$]),tA=(0,r.useCallback)(()=>{ej(null),ek(null),eI("")},[]),tP=(0,r.useCallback)(()=>{V("sign_in_redirect",void 0,{location:"command-menu"}),q.push("/sign-in")},[q,V]);(0,u.v)(l.VP,()=>{V("opened_command_menu",void 0,{location:"command-menu:hotkey"}),e6(!et)},[et,e6]),(0,u.v)(l._1,()=>{eT&&(et?tu(!ep):(e6(!0),tu(!0)))},[ep,tu,e6,et,eT]);let t_=(0,r.useMemo)(()=>ea?(0,B.Jo)(ea):"",[ea]);return(0,s.jsx)(K.R,{open:et,setOpen:e6,trigger:t,contentClassName:(0,y.cn)("bg-background rounded-3xl transition-all duration-150 ease-in-out outline-none w-full md:w-5/6 lg:w-3/5 max-w-3xl flex flex-col",{"rounded-b-none":eg},{"md:w-[calc(100dvw-32px)] lg:w-5/6 max-w-[1600px]":eH}),headerClassName:"sr-only",titleClassName:"sr-only",title:a("Command Menu","Command Menu"),children:(0,s.jsxs)(n.uB,{ref:G,label:"Command Menu",loop:!0,shouldFilter:!1,value:t_,defaultValue:null==tc?void 0:tc.value,onKeyDown:tI,onValueChange:tx,className:(0,y.cn)("flex flex-col w-full focus-visible:outline-none"),children:[(0,s.jsx)("div",{className:"flex items-center gap-3 px-5 border-b border-border h-14",children:(0,s.jsxs)(P.N,{mode:"popLayout",children:["root"!==ez.id&&(0,s.jsx)(_.P.div,{layout:!0,initial:{opacity:0,translateX:-10},animate:{opacity:1,translateX:0},exit:{opacity:0,translateX:-10},transition:{duration:.15},className:"flex items-center w-8 h-8 justify-center rounded-full text-fg-secondary hover:text-fg-primary hover:bg-button-ghost-hover transition-colors -ml-3",children:(0,s.jsx)(N.Oj5,{size:24,onClick:en})},"back-arrow"),ez.isSearchEnabled&&(0,s.jsx)(_.P.div,{className:"flex items-center w-full gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.uB.Input,{ref:e=>{ev||null==e||e.focus()},placeholder:ez.searchPlaceholder||"".concat(a("Search","Search"),"..."),value:ez.searchQuery,className:"flex-grow w-full bg-transparent placeholder:text-fg-secondary focus-visible:outline-none",onValueChange:tf}),(0,s.jsx)(P.N,{mode:"wait",children:e1&&"root"===ez.id?(0,s.jsx)(_.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"flex-shrink-0",children:(0,s.jsx)(L.y,{size:"sm"})},"spinner"):(0,s.jsx)(_.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"flex-shrink-0",children:(0,s.jsx)(C.A,{className:"size-5 text-fg-secondary"})},"search-icon")})]})})]})}),(0,s.jsx)(n.uB.List,{onPointerDown:e=>e.stopPropagation(),onPointerMove:e=>e.stopPropagation(),onPointerUp:e=>e.stopPropagation(),children:(0,s.jsxs)(_.P.div,{initial:{height:eg?"calc(90dvh - 64px)":eH?"80dvh":"min(460px, calc(100dvh - 56px - 48px - 32px))"},animate:{height:eg?"calc(90dvh-64px)":eH?"80dvh":"min(460px, calc(100dvh - 56px - 48px - 32px))"},transition:{duration:.15,ease:"easeInOut"},className:"w-full relative",children:[Q&&ez.isSearchEnabled&&(0,s.jsx)(n.uB.Empty,{className:"flex absolute inset-0 bg-background z-10 pt-24 md:pt-0 md:pb-32 flex-col items-center justify-center text-center grow",children:(0,s.jsx)(P.N,{mode:"wait",children:e2&&"root"===ez.id?(0,s.jsxs)(_.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-fg-secondary flex items-center gap-3",children:[(0,s.jsx)(S.A,{}),a("Error Loading Conversations","Error Loading Conversations")]},"error"):e0&&"root"===ez.id?(0,s.jsx)(_.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-fg-secondary flex items-center gap-3 animate-pulse",children:a("Loading Conversations","Loading Conversations")},"loading"):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(_.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-fg-secondary",children:[(0,s.jsx)("div",{className:"text-fg-secondary",children:a("No results found.","No results found.")}),eV.length>0&&"root"===ez.id&&(0,s.jsxs)("div",{className:"hidden mt-4 md:block",children:[(0,s.jsx)("div",{className:"text-fg-secondary",children:a("Press enter to start new chat with:","Press enter to start new chat with:")}),(0,s.jsx)("div",{className:"text-fg-primary whitespace-nowrap truncate max-w-[400px]",children:eV})]})]},"no-results")})})}),"root"===ez.id?(0,s.jsxs)("div",{className:(0,y.cn)("grid h-full relative",{"grid-cols-2 xl:grid-cols-5":eH}),children:[(0,s.jsxs)("div",{className:(0,y.cn)("col-span-1 xl:col-span-2 h-full overflow-auto space-y-3 p-3",eH&&"border-r border-border"),style:{scrollPaddingBlock:"1rem"},ref:eJ,children:[eX?(0,s.jsxs)(s.Fragment,{children:[(!!e3.length||!!e8.length)&&(0,s.jsxs)(H,{heading:(0,s.jsxs)("div",{className:"flex justify-between gap-3 items-center",children:[(0,s.jsx)("div",{children:a("Actions","Actions")}),!eV&&ez.isSearchEnabled&&(0,s.jsx)("div",{className:"text-xs hover:text-primary transition-colors cursor-pointer",onClick:()=>td(!1),children:a("Show Less","Show Less")})]}),children:[e3.map(e=>(0,s.jsx)(O,{...e},e.value)),e8.map(e=>(0,s.jsx)(O,{...e},e.value))]}),eV.length>0&&e5.length>0&&(0,s.jsx)(ex,{actions:e5}),eV.length>0&&ts.length>0&&(0,s.jsx)(ey,{actions:ts}),eV.length>0&&tr.length>0&&(0,s.jsx)(em,{actions:tr}),eV.length>0&&ti.length>0&&(0,s.jsx)(eG,{actions:ti}),eV.length>0&&te.length>0&&(0,s.jsx)(eG,{actions:te})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(H,{heading:(0,s.jsxs)("div",{className:"flex justify-between gap-3 items-center",children:[(0,s.jsx)("div",{children:a("Actions","Actions")}),(0,s.jsx)("div",{className:"text-xs hover:text-primary transition-colors cursor-pointer",onClick:()=>td(!0),children:a("Show All","Show All")})]}),children:(0,s.jsx)(O,{...tc},tc.value)})}),Q?eQ.length>0?(0,s.jsxs)(s.Fragment,{children:[eV?(0,s.jsx)(H,{heading:a("History","History"),children:null==eQ?void 0:eQ.map(e=>{let{conversation:t,matchedWords:a,matchType:n,highlight:r}=e;return(0,s.jsx)(U,{conversation:t,matchedWords:a,matchType:n,highlight:ep?void 0:r,isSelected:(null==th?void 0:th.type)==="conversation"&&th.conversationId==th.conversationId,isEditing:ev===t.conversationId,isDeleting:ew===t.conversationId,newTitle:eS,onNewTitleChange:eI,onSelect:tk,onEditStart:tv,onDeleteStart:ek,onToggleFavorite:tC,onEditSave:tN,onDeleteConfirm:tS,onCancel:tA},t.conversationId)})}):eY.map(e=>{var t;return(0,s.jsx)(H,{heading:W[e.timeRange],children:null==(t=e.conversations)?void 0:t.map(e=>(0,s.jsx)(U,{conversation:e,isSelected:(null==th?void 0:th.type)==="conversation"&&th.conversationId===e.conversationId,isEditing:ev===e.conversationId,isDeleting:ew===e.conversationId,newTitle:eS,onNewTitleChange:eI,onSelect:tk,onEditStart:tv,onDeleteStart:ek,onToggleFavorite:tC,onEditSave:tN,onDeleteConfirm:tS,onCancel:tA},e.conversationId))},e.timeRange)}),(0,s.jsx)("div",{ref:eZ,className:"h-[1px] flex justify-center !m-0 !p-0"})]}):!eV&&(0,s.jsx)(H,{heading:a("History","History"),children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-12 text-center grow md:py-24",children:(0,s.jsx)(P.N,{mode:"wait",children:e2?(0,s.jsxs)(_.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-secondary flex items-center gap-3",children:[(0,s.jsx)(S.A,{}),a("Error Loading Conversations","Error Loading Conversations")]},"error"):e0?(0,s.jsx)(_.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-secondary flex items-center gap-3 animate-pulse",children:a("Loading Conversations","Loading Conversations")},"loading"):(0,s.jsx)(_.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-secondary",children:a("History is empty","History is empty")},"empty")})})}):(0,s.jsx)(H,{heading:a("History","History"),children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-12 text-center grow md:py-24",children:(0,s.jsx)(R.$n,{variant:"outline",onClick:tP,children:a("Sign in to see your history","Sign in to see your history")})})})]}),eH&&(0,s.jsx)(ei,{conversationResults:eQ})]}):(0,s.jsxs)("div",{className:(0,y.cn)("h-full p-3 overflow-auto"),style:{scrollPaddingBlock:"1rem"},children:["share"===ez.id&&el&&er&&(0,s.jsx)(eb,{isCopied:tb,setIsCopied:tj,conversationId:el,lastMessageId:er,onShareLinkChange:eP,onShareLinkCopy:ty}),"switch-model"===ez.id&&e5.length>0&&(0,s.jsx)(ex,{actions:e5}),"switch-theme"===ez.id&&ts.length>0&&(0,s.jsx)(ey,{actions:ts}),"change-language"===ez.id&&tr.length>0&&(0,s.jsx)(em,{actions:tr}),"workspace"===ez.id&&ti.length>0&&(0,s.jsx)(eG,{actions:ti}),"move-to-workspace"===ez.id&&te.length>0&&(0,s.jsx)(eG,{actions:te})]})]})}),!eg&&(0,s.jsxs)("div",{className:(0,y.cn)("flex items-center justify-end w-full h-12 gap-2 px-2 py-1 border-t border-border-l1",eT&&"justify-between"),children:[eT&&(0,s.jsx)(R.gx,{"aria-label":ep?a("Hide Conversation Previews","Hide Conversation Previews"):a("Show Conversation Previews","Show Conversation Previews"),tooltipContent:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:ep?a("Hide Conversation Previews","Hide Conversation Previews"):a("Show Conversation Previews","Show Conversation Previews")}),(0,s.jsx)("span",{className:"text-secondary border border-card px-1.5 rounded-md -mr-1.5",children:"".concat(Z," ⇧ P")})]}),tooltipContentProps:{side:"bottom"},tooltipProps:{delayDuration:500},variant:"ghost",size:"iconSm",rounded:!0,className:"transition-colors text-secondary hover:text-primary",onClick:()=>tu(!ep),children:ep?(0,s.jsx)(I.A,{size:16}):(0,s.jsx)(A.A,{size:16})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[tl&&["home-action","item-action"].includes(tl)&&to&&(0,s.jsx)(eo,{label:to.name,shortcut:"⏎",variant:"default",onTrigger:to.onTrigger}),(null==ea?void 0:ea.type)==="model"&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eo,{label:a("Switch","Switch"),shortcut:"⏎",variant:"default",onTrigger:()=>{e4(ea.modelId)}})}),(null==ea?void 0:ea.type)==="theme"&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eo,{label:a("Switch","Switch"),shortcut:"⏎",variant:"default",onTrigger:()=>{ta(ea.themeId)}})}),(null==ea?void 0:ea.type)==="language"&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eo,{label:a("Change","Change"),shortcut:"⏎",variant:"default",onTrigger:()=>{tn(ea.languageId)}})}),(null==ea?void 0:ea.type)==="conversation"&&(0,s.jsx)(s.Fragment,{children:ev?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{label:a("Cancel","Cancel"),shortcut:"Esc",variant:"default",onTrigger:()=>{ej(null),eI("")}}),(0,s.jsx)(eo,{label:a("Confirm","Confirm"),shortcut:"⏎",variant:"default",onTrigger:()=>tN(ev)})]}):ew?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{label:a("Cancel","Cancel"),shortcut:"Esc",variant:"default",onTrigger:()=>{ek(null)}}),(0,s.jsx)(eo,{label:a("Delete","Delete"),shortcut:"⏎",variant:"destructive",onTrigger:()=>tS(ew)})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{label:a("Go","Go"),shortcut:"⏎",variant:"default",onTrigger:()=>tk(ea.conversationId)}),(0,s.jsx)(eo,{label:a("Edit","Edit"),shortcut:"".concat(Z," ⇧ E"),variant:"default",onTrigger:()=>{tv(ea.conversationId)}}),(0,s.jsx)(eo,{label:a("Delete","Delete"),shortcut:"".concat(Z," ⇧ D"),variant:"default",onTrigger:()=>{ek(ea.conversationId)}})]})}),"share"===ez.id&&eA&&(0,s.jsx)(eo,{label:a("Copy","Copy"),shortcut:"⏎",variant:"default",onTrigger:ty})]})]})]})})}},83638:(e,t,a)=>{a.d(t,{B:()=>n});var s=a(88382);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{threshold:.1},a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let s=new IntersectionObserver(t=>{t[0].isIntersecting&&e()},t);return a.current&&s.observe(a.current),()=>{a.current&&s.unobserve(a.current)}},[e,t]),a}},88119:(e,t,a)=>{a.d(t,{M:()=>h,Uk:()=>x,zG:()=>p});var s=a(79342),n=a(56691),r=a(61884),i=a(61312),l=a(40251),o=a(56297),c=a(73227),d=a(23823),u=a(16506);a(88382);var m=a(65146);let p={light:{icon:o.A,label:"Light"},dark:{icon:c.A,label:"Dark"},system:{icon:d.A,label:"System"}};function x(){let{t:e}=(0,m.Bd)("base"),{setTheme:t,theme:a}=(0,u.D)(),o={light:e("Light","Light"),dark:e("Dark","Dark"),system:e("System","System")};return(0,s.jsx)("div",{className:"w-full px-1 pt-1 pb-1",children:(0,s.jsx)("div",{className:"flex items-stretch w-full gap-2 justify-stretch",children:Object.entries(p).map(e=>{let[c,{icon:d}]=e;return(0,s.jsxs)(r.m_,{disableHoverableContent:!0,children:[(0,s.jsx)(l.k$,{asChild:!0,children:(0,s.jsx)(n.$n,{className:(0,i.cn)("w-full rounded-lg",{"bg-button-ghost-hover":a===c}),size:"icon",variant:"ghost",onClick:()=>t(c),value:c,children:(0,s.jsx)(d,{size:16})})}),(0,s.jsx)(r.ZI,{side:"bottom",children:(0,s.jsx)("p",{children:o[c]})})]},c)})})})}function h(){let{t:e}=(0,m.Bd)("base"),{setTheme:t,theme:a}=(0,u.D)(),r={light:e("Light","Light"),dark:e("Dark","Dark"),system:e("System","System")};return(0,s.jsx)("div",{className:"w-full px-1 pb-1",children:(0,s.jsx)("div",{className:"flex items-stretch w-full gap-2 justify-stretch",children:Object.entries(p).map(e=>{let[l,{icon:o}]=e;return(0,s.jsxs)(n.$n,{className:(0,i.cn)(a===l&&"bg-button-ghost-hover","w-full rounded-2xl flex-col p-3 group","ring-1 ring-inset ring-toggle-border hover:ring-card-border-focus hover:bg-card-hover text-primary"),variant:"none",size:"none",onClick:()=>t(l),value:l,children:[(0,s.jsx)(o,{className:(0,i.cn)("group-hover:text-primary",a===l?"text-primary":"text-secondary"),size:20}),(0,s.jsx)("p",{children:r[l]})]},l)})})})}},88844:(e,t,a)=>{a.d(t,{w:()=>o});var s=a(79342),n=a(61312),r=a(84969),i=a(33846),l=a(88382);function o(e){let{children:t,isVisible:a,minWidth:o,maxWidth:c,initialWidth:d,className:u}=e,[m,p]=(0,l.useState)(!1),[x,h]=(0,l.useState)(d);(0,l.useRef)(x).current=x;let g=(0,l.useRef)(null),f=(0,l.useRef)(document.body.clientWidth);(0,l.useEffect)(()=>{h(d)},[d]);let v=(0,l.useCallback)(e=>{e.preventDefault(),p(!0)},[]),b=(0,l.useCallback)(()=>{p(!1)},[]),j=(0,l.useCallback)(e=>{m&&g.current&&h(Math.max(o,Math.min(c,document.body.clientWidth-e.clientX)))},[m,o,c]),y=(0,l.useCallback)(()=>{h(Math.max(o,Math.min(c,d/f.current*document.body.clientWidth)))},[o,c,d]);return(0,l.useEffect)(()=>(window.addEventListener("mousemove",j),()=>window.removeEventListener("mousemove",j)),[j]),(0,l.useEffect)(()=>(window.addEventListener("mouseup",b),()=>window.removeEventListener("mouseup",b)),[b]),(0,l.useEffect)(()=>(window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)),[y]),(0,s.jsx)(r.N,{children:a&&(0,s.jsx)(i.P.div,{initial:{x:x,opacity:0,width:0},animate:{x:0,opacity:1,width:x},exit:{x:x,opacity:0,width:0},transition:m?{duration:0}:{type:"ease",ease:"easeInOut",duration:.3},className:(0,n.cn)("h-dvh flex-shrink-0",u),children:(0,s.jsxs)("div",{ref:g,className:"relative h-full w-full",children:[(0,s.jsx)("div",{className:(0,n.cn)("absolute start-0 top-0 bottom-0 w-2 cursor-col-resize border-l border-input-border hover:bg-card-hover z-50",m&&"bg-card-hover"),onMouseDown:v}),(0,s.jsxs)("div",{className:"h-full p-0",children:[t,m&&(0,s.jsx)("div",{className:"absolute inset-0 bg-transparent z-50"})]})]})})})}},91102:(e,t,a)=>{a.d(t,{c:()=>i});var s=a(88382);function n(e){return/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i.test(e)}function r(){let{userAgent:e}=window.navigator;return/(iPhone)|(iPad)|(iPod)/i.test(e)||n(e)&&"ontouchend"in document?"ios":n(e)?"macos":/(Win32)|(Win64)|(Windows)|(WinCE)/i.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function i(){let[e,t]=(0,s.useState)("undetermined");(0,s.useEffect)(()=>{t(r)},[]);let a=function(e){switch(e){case"macos":return"⌘";case"windows":case"linux":return"Ctrl+";default:return null}}(e);return{os:e,commandPrefix:a}}},92207:(e,t,a)=>{a.d(t,{H0:()=>c,Jo:()=>r,P1:()=>l,kX:()=>n,kw:()=>i});var s=a(65258);function n(e){switch(e.type){case"conversation":return e.conversationId;case"home-action":return e.homeActionId;case"item-action":return e.itemActionId;case"model":return e.modelId;case"theme":return e.themeId;case"language":return e.languageId;case"move-to-workspace":return e.workspaceId;case"action":return e.value}}function r(e){return"".concat(e.type,":").concat(n(e))}function i(e){if(!e)return;let[t,a]=e.split(":");return l(t,a)}function l(e,t){switch(e){case"conversation":return{type:e,conversationId:t};case"home-action":return{type:e,homeActionId:t};case"item-action":return{type:e,itemActionId:t};case"model":return{type:e,modelId:t};case"theme":return{type:e,themeId:t};case"language":return{type:e,languageId:t};case"move-to-workspace":return{type:e,workspaceId:t};case"action":return{type:e,value:t};default:throw Error("Unknown selection type: ".concat(e))}}class o{constructor(e,t){this.set=e,this.get=t,this.open=!1,this.selectedItem=void 0,this.pages=[{id:"root",isSearchEnabled:!0,searchQuery:""}],this.onSearchQueryChange=e=>{let t=this.get().pages[this.get().pages.length-1];this.set({pages:[...this.get().pages.slice(0,-1),{...t,searchQuery:e}]})},this.openMenu=()=>{this.set({open:!0})},this.goBack=()=>{if(1===this.get().pages.length){this.onSearchQueryChange(""),this.set({open:!1}),this.setSelectedItem(void 0);return}this.setSelectedItem(void 0),this.set({pages:this.get().pages.slice(0,-1)})},this.closeMenu=()=>{this.set({open:!1,selectedItem:void 0,pages:[{...this.get().pages[0],searchQuery:""}]})},this.setSelectedItem=(0,s.kp)(this.set,"selectedItem"),this.addPage=e=>{this.setSelectedItem(void 0),this.set({pages:[...this.get().pages,e]})}}}let c=(0,s.y$)(o,"useCommandMenuStore")},92618:(e,t,a)=>{a.d(t,{A:()=>k,M:()=>S});var s=a(79342),n=a(10953),r=a(39945),i=a(56691),l=a(69648),o=a(16454),c=a(24429),d=a(17703),u=a(61312),m=a(56173),p=a(58711),x=a(19717),h=a(70352),g=a(35021),f=a(1031),v=a(74995),b=a(88382),j=a(65146),y=a(82646),w=a(5790);function k(){let{t:e}=(0,j.Bd)("settings"),{isEnterpriseUser:t,isSuperGrokProUser:a,isSuperGrokUser:l,activeSubscriptions:o}=(0,c.Q2)(),d=(0,w.iV)(v.A("setOpen")),m=(0,p.e)(v.A("setIsUpselling")),g=(0,p.e)(v.A("setTargetTier"));return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,s.jsxs)("div",{className:"px-3",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-semibold text-md",children:a?(0,s.jsx)(n.dq,{className:"h-6 w-auto"}):e("SuperGrok","SuperGrok")}),(0,s.jsx)("p",{className:(0,u.cn)("text-sm text-fg-secondary font-medium mb-4"),children:l||a?e("Your plan includes:","Your plan includes:"):e("Subscribe to SuperGrok to get:","Subscribe to SuperGrok to get:")})]}),a?null:(0,s.jsx)(i.$n,{variant:"outline",size:"pill",className:"text-sm",onClick:()=>{d(!1),g(c.i.SuperGrokPro),m(!0)},children:e("settings-billing.upgrade-to-heavy","Upgrade to Heavy")})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 bg-surface-l2 rounded-2xl p-4 -mx-2",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-xs text-secondary",children:e("settings-billing.model","Model")}),a?(0,s.jsx)("div",{className:"flex flex-row justify-between w-full",children:(0,s.jsx)("div",{className:"text-sm",children:e("settings-billing.grok-4-heavy","Grok 4 Heavy")})}):null,(0,s.jsx)("div",{className:"flex flex-row justify-between w-full",children:(0,s.jsx)("div",{className:"text-sm",children:e("settings-billing.grok-4","Grok 4")})}),(0,s.jsx)("div",{className:"flex flex-row justify-between w-full",children:(0,s.jsx)("div",{className:"text-sm",children:e("settings-billing.grok-3","Grok 3")})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-xs text-secondary",children:e("settings-billing.features","Features")}),(0,s.jsx)("div",{className:"flex flex-row justify-between w-full",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"text-fg-secondary",height:14,width:14}),(0,s.jsx)("span",{className:"text-xs",children:e("settings-billing.free",a?"Everything in SuperGrok":"Everything in Basic")})]})}),a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex flex-row justify-between w-full",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"text-fg-secondary",height:14,width:14}),(0,s.jsx)("span",{className:"text-xs",children:e("settings-billing.new-features","Early access to new features")})]})}),(0,s.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Sx,{className:"text-fg-secondary",height:14,width:14}),(0,s.jsx)("span",{className:"text-xs",children:e("settings-billing.context","Larger context memory")})]}),(0,s.jsx)("div",{className:"text-xs text-secondary",children:e("settings-billing.context.tokens","{{tokens, number}} tokens",{tokens:256e3})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Sx,{className:"text-fg-secondary",height:14,width:14}),(0,s.jsx)("span",{className:"text-xs",children:e("settings-billing.context","Larger context memory")})]}),(0,s.jsx)("div",{className:"text-xs text-secondary",children:e("settings-billing.context.tokens","{{tokens, number}} tokens",{tokens:128e3})})]}),(0,s.jsx)("div",{className:"flex flex-row justify-between w-full",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(y.Q5b,{className:"text-fg-secondary",height:14,width:14}),(0,s.jsx)("span",{className:"text-xs",children:e("settings-billing.voice","Voice with vision")})]})})]})]})]})]}),!t&&(0,s.jsx)(N,{subscriptions:o})]})}function N(e){let{subscriptions:t}=e,{t:a}=(0,j.Bd)("settings"),n=(0,b.useMemo)(()=>null==t?[]:t.filter(e=>!e.enterprise&&"SUBSCRIPTION_STATUS_ACTIVE"===e.status),[t]),r=n[0];return null==t?null:r?1===n.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.w,{orientation:"horizontal",className:"my-6"}),(0,s.jsx)(C,{subscription:r,labelOverride:a("Manage your subscription","Manage your subscription")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.w,{orientation:"horizontal",className:"my-6"}),n.map((e,t)=>(0,s.jsx)(C,{subscription:e},t))]}):(0,s.jsx)(o._,{className:"mt-auto"})}function C(e){let{labelOverride:t,subscription:a}=e,{t:n}=(0,j.Bd)("settings"),[r,l]=(0,b.useState)(!1);if(a.stripe)return(0,s.jsxs)(i.$n,{className:"text-sm",variant:"outline",size:"pill",disabled:r,onClick:()=>{l(!0),m.$W.subscriptionsCreateBillingPortalSession({body:{returnUrl:window.location.href}}).then(e=>{window.open(e.url,"_blank")}).catch((0,d.HX)("settings-billing:manage-subscription")).finally(()=>{l(!1)})},children:[null!=t?t:n("Manage your subscription (Stripe)","Manage your subscription (Stripe)"),r?(0,s.jsx)(g.A,{height:16,width:16,className:"text-neutral-400 animate-spin !duration-1000"}):(0,s.jsx)(f.A,{height:16,width:16,className:"text-neutral-400"})]});if(a.x){let e=S(a);return(0,s.jsx)(i.$n,{variant:"outline",size:"pill",className:"text-sm",children:(0,s.jsxs)("a",{href:e,target:"_blank",className:"flex items-center gap-2",children:[null!=t?t:n("Manage your subscription (X)","Manage your subscription (\uD835\uDD4F)"),(0,s.jsx)(f.A,{height:16,width:16,className:"text-neutral-400"})]})})}if(a.apple){let e=S(a);return(0,s.jsx)(i.$n,{variant:"outline",size:"pill",className:"text-sm",children:(0,s.jsxs)("a",{href:e,target:"_blank",className:"flex items-center gap-2",children:[null!=t?t:n("Manage your subscription (Apple)","Manage your subscription (Apple)"),(0,s.jsx)(f.A,{height:16,width:16,className:"text-neutral-400"})]})})}if(a.google){let e=S(a);return(0,s.jsx)(i.$n,{variant:"outline",size:"pill",className:"text-sm",children:(0,s.jsxs)("a",{href:e,target:"_blank",className:"flex items-center gap-2",children:[null!=t?t:n("Manage your subscription (Google)","Manage your subscription (Google)"),(0,s.jsx)(f.A,{height:16,width:16,className:"text-neutral-400"})]})})}return null}function S(e){return e.x?"https://x.com/settings/subscription":e.apple?"https://apps.apple.com/account/subscriptions":e.google?"https://play.google.com/store/account/subscriptions?sku=grok.pro&package=ai.x.grok":void 0}},97225:(e,t,a)=>{a.d(t,{Bx:()=>_,CG:()=>T,CP:()=>O,Cn:()=>R,FX:()=>L,G:()=>F,Gh:()=>z,SidebarProvider:()=>P,Uj:()=>B,Yv:()=>D,Zr:()=>b,b:()=>w,cL:()=>A,hV:()=>k,jy:()=>C,vd:()=>S,vu:()=>j,wZ:()=>K,x2:()=>M,y$:()=>y});var s=a(79342),n=a(7287),r=a(88382),i=a(65146),l=a(56691),o=a(74933),c=a(69648),d=a(80226),u=a(61884),m=a(41320),p=a(80354),x=a(61312),h=a(72359),g=a(84618),f=a(84969),v=a(33846);let b="h-[36px]",j="w-[1.75rem] h-[1.75rem]",y="px-[0.5rem]",w="h-[2.5rem]",k="mx-[.125rem]",N="mx-1",C="p-[0.375rem]",S="start-[.5rem]",I=r.createContext(null);function A(){let e=r.useContext(I);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}let P=r.forwardRef((e,t)=>{let{defaultOpen:a=!0,open:n,onOpenChange:i,className:l,style:o,children:c,...d}=e,p=(0,m.Di)(0),[g,f]=r.useState(!1),[v,b]=(0,h.Mj)("sidebarOpen",a),j=null!=n?n:v,y=r.useCallback(e=>{if(i)return null==i?void 0:i("function"==typeof e?e(j):e);b(e)},[i,b,j]),w=r.useCallback(()=>p?f(e=>!e):y(e=>!e),[p,y,f]),k=j?"expanded":"collapsed",N=r.useMemo(()=>({state:k,open:j,setOpen:y,isMobile:p,openMobile:g,setOpenMobile:f,toggleSidebar:w,contentWidthClass:"w-[calc(100%-var(--sidebar-width))]"}),[k,j,y,p,g,f,w]);return(0,s.jsx)(I.Provider,{value:N,children:(0,s.jsx)(u.Bc,{delayDuration:0,children:(0,s.jsx)("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3.5rem",...o},className:(0,x.cn)("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",l),ref:t,...d,children:c})})})});P.displayName="SidebarProvider";let _=r.forwardRef((e,t)=>{let{side:a="left",variant:n="sidebar",collapsible:r="offcanvas",className:l,children:o,...c}=e,{state:d,openMobile:u,setOpenMobile:p,toggleSidebar:h}=A(),g=(0,m.Di)(),{t:v}=(0,i.Bd)("base");return"none"===r?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:(0,x.cn)("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground","print:hidden",l),ref:t,...c,children:o})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.N,{children:g&&"expanded"===d&&(0,s.jsx)(E,{onClick:h})}),(0,s.jsx)("div",{ref:t,className:(0,x.cn)("group peer md:block text-sidebar-foreground z-[40]","print:hidden"),"data-state":d,"data-collapsible":"collapsed"===d?r:"","data-variant":n,"data-side":a,children:(0,s.jsx)("div",{className:(0,x.cn)("duration-200 inset-y-0 z-10 h-svh w-[--sidebar-width] box-content transition-[left,right,width] ease-linear md:flex","floating"===n?"absolute":"block","floating"===n||"inset"===n?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]","left"===a?"start-0 group-data-[collapsible=offcanvas]:start-[calc(var(--sidebar-width)*-1)]":"end-0 group-data-[collapsible=offcanvas]:end-[calc(var(--sidebar-width)*-1)]",l),...c,children:(0,s.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-xl",children:o})})})]})});_.displayName="Sidebar";let M=r.forwardRef((e,t)=>{let{className:a,onClick:n,iconSize:o=20,...c}=e,{toggleSidebar:d,open:u}=A(),{t:m}=(0,i.Bd)("base"),p=(0,r.useCallback)(e=>{null==n||n(e),d()},[d]);return(0,s.jsx)("div",{className:(0,x.cn)(u?"cursor-w-resize":"cursor-e-resize","grow"),onClick:p,children:(0,s.jsxs)(l.$n,{ref:t,"data-sidebar":"trigger",variant:"ghostSecondary",size:"icon",rounded:!0,className:(0,x.cn)(a),...c,children:[(0,s.jsx)(g.A,{className:(0,x.cn)(u&&"rotate-180","transition-transform duration-200"),size:o}),(0,s.jsx)("span",{className:"sr-only",children:m("Toggle Sidebar","Toggle Sidebar")})]})})});M.displayName="SidebarTrigger",r.forwardRef((e,t)=>{let{className:a,...n}=e,{toggleSidebar:r}=A();return(0,s.jsx)("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:(0,x.cn)("absolute top-0 left-0 h-full",a),style:{width:"var(--sidebar-width-icon)"}})}).displayName="SidebarRail";let E=e=>{let{className:t,onClick:a}=e;return(0,s.jsx)(v.P.div,{className:(0,x.cn)("fixed inset-0 z-[30] bg-overlay",t),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:a},"sidebar-overlay")};E.displayName="SidebarOverlay",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("main",{ref:t,className:(0,x.cn)("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",a),...n})}).displayName="SidebarInset",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(o.p,{ref:t,"data-sidebar":"input",className:(0,x.cn)("h-8 w-full bg-background shadow-none focus-visible:ring-1 focus-visible:ring-sidebar-ring",a),...n})}).displayName="SidebarInput";let z=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"header",className:(0,x.cn)("flex flex-col gap-2",a),...n})});z.displayName="SidebarHeader";let T=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"footer",className:(0,x.cn)("flex flex-col gap-2 mt-auto",a),...n})});T.displayName="SidebarFooter",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(c.w,{ref:t,"data-sidebar":"separator",className:(0,x.cn)("mx-2 w-auto bg-sidebar-border",a),...n})}).displayName="SidebarSeparator";let D=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"content",className:(0,x.cn)("flex min-h-0 flex-col overflow-auto group-data-[collapsible=icon]:overflow-hidden grow",a),...n})});D.displayName="SidebarContent";let R=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"group",className:(0,x.cn)("relative flex w-full min-w-0 flex-col","px-1.5","py-[2px]","shrink-0","transition-[width,transform,opacity] duration-200",a),...n})});R.displayName="SidebarGroup",r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...i}=e,l=r?n.DX:"div";return(0,s.jsx)(l,{ref:t,"data-sidebar":"group-label",className:(0,x.cn)("duration-200 flex h-8 shrink-0 items-center rounded-xl px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-1  [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",a),...i})}).displayName="SidebarGroupLabel",r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...i}=e,l=r?n.DX:"button";return(0,s.jsx)(l,{ref:t,"data-sidebar":"group-action",className:(0,x.cn)("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-xl p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-1  [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",a),...i})}).displayName="SidebarGroupAction",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"group-content",className:(0,x.cn)("w-full text-sm",a),...n})}).displayName="SidebarGroupContent";let K=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("ul",{ref:t,"data-sidebar":"menu",className:(0,x.cn)("flex w-full min-w-0 flex-col cursor-default",a),onClick:p.Y,...n})});K.displayName="SidebarMenu";let L=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("li",{ref:t,"data-sidebar":"menu-item",className:(0,x.cn)("group/menu-item relative whitespace-nowrap font-semibold",N,a),...n})});L.displayName="SidebarMenuItem";let B=r.forwardRef((e,t)=>{let{asChild:a=!1,isActive:r=!1,allowActive:i=!0,tooltip:l,highlighted:o=!1,className:c,heightClassName:d=b,safeArea:m=!1,...p}=e,h=a?n.DX:"button",{isMobile:g,state:f}=A(),v="collapsed"===f,j=(0,s.jsx)(h,{ref:t,"data-sidebar":"menu-button","data-active":r,tabIndex:-1,className:(0,x.cn)("peer/menu-button flex items-center gap-2 overflow-hidden rounded-xl text-left","text-sm outline-none ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-1","group-has-[[data-sidebar=menu-action]]/menu-item:pr-8","[&>span:last-child]:truncate [&>svg]:shrink-0","hover:bg-button-ghost-hover hover:text-primary","text-sm",m&&v&&'before:content-[""] before:absolute before:-inset-x-2.5 before:-inset-y-0.5 before:rounded-xl',d,o?"bg-button-ghost-hover border-border-l1":"border-transparent","hover:bg-button-ghost-hover","data-[state=open]:hover:bg-button-ghost-hover",i&&"active:bg-button-ghost-active",i&&"data-[active=true]:bg-button-ghost-active","aria-expanded:bg-button-ghost-hover",c),...p});return l?("string"==typeof l&&(l={children:l}),(0,s.jsxs)(u.m_,{children:[(0,s.jsx)(u.k$,{asChild:!0,children:j}),(0,s.jsx)(u.ZI,{side:"right",align:"center",hidden:!v||g,container:document.getElementById("tooltip-portal"),...l})]})):j});B.displayName="SidebarMenuButton",r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,showOnHover:i=!1,...l}=e,o=r?n.DX:"button";return(0,s.jsx)(o,{ref:t,"data-sidebar":"menu-action",className:(0,x.cn)("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-xl p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-1 peer-hover/menu-button:text-sidebar-accent-foreground  [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",i&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",a),...l})}).displayName="SidebarMenuAction",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"menu-badge",className:(0,x.cn)("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-xl px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a),...n})}).displayName="SidebarMenuBadge",r.forwardRef((e,t)=>{let{className:a,showIcon:n=!1,...i}=e,l=r.useMemo(()=>"".concat(Math.floor(40*Math.random())+50,"%"),[]);return(0,s.jsxs)("div",{ref:t,"data-sidebar":"menu-skeleton",className:(0,x.cn)("rounded-xl h-8 flex gap-2 px-2 items-center",a),...i,children:[n&&(0,s.jsx)(d.E,{className:"rounded-xl size-4","data-sidebar":"menu-skeleton-icon"}),(0,s.jsx)(d.E,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":l}})]})}).displayName="SidebarMenuSkeleton",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("ul",{ref:t,"data-sidebar":"menu-sub",className:(0,x.cn)("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",a),...n})}).displayName="SidebarMenuSub",r.forwardRef((e,t)=>{let{...a}=e;return(0,s.jsx)("li",{ref:t,...a})}).displayName="SidebarMenuSubItem",r.forwardRef((e,t)=>{let{asChild:a=!1,size:r="md",isActive:i,className:l,...o}=e,c=a?n.DX:"a";return(0,s.jsx)(c,{ref:t,"data-sidebar":"menu-sub-button","data-size":r,"data-active":i,className:(0,x.cn)("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-xl px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-1 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate  [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===r&&"text-xs","md"===r&&"text-sm","group-data-[collapsible=icon]:hidden",l),...o})}).displayName="SidebarMenuSubButton";let O=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"icon",className:(0,x.cn)("size-6","flex items-center justify-center shrink-0",a),...n})});function F(e){let{children:t,onClickIndent:a}=e;return(0,s.jsxs)("div",{className:(0,x.cn)("flex flex-row mt-1 ",N),children:[(0,s.jsx)("div",{className:"cursor-pointer ms-[8px] me-[2px] py-1",onClick:a,children:(0,s.jsx)("div",{className:"border-l border-border-l1 h-full ms-[10px] me-[4px]"})}),(0,s.jsx)("div",{className:"flex flex-col gap-1 w-full min-w-0",children:t})]})}O.displayName="SidebarIcon"},99667:(e,t,a)=>{a.d(t,{q:()=>p});var s=a(79342),n=a(56691),r=a(5663),i=a(75500),l=a(33231),o=a(61312),c=a(40938),d=a(88382),u=a(65146),m=a(63174);function p(e){let{value:t,onChange:a,isDirty:p,placeholder:x,onSave:h,onReset:g,disabled:f,textareaId:v,minRows:b=4,maxRows:j=8,autoFocus:y}=e,w=(0,d.useRef)(null),{t:k}=(0,u.Bd)("settings"),N=(0,d.useCallback)(e=>{a(e.target.value)},[a]),C=(0,d.useRef)(t);C.current=t;let S=(0,d.useCallback)(()=>{h(C.current)},[h]);(0,l.v)(r.Bq,()=>{S()},[S]);let I=(0,d.useCallback)(()=>{g()},[g]);(0,d.useEffect)(()=>{w.current&&!f&&y&&w.current.focus()},[y,f]);let A=(0,i.h)(),P=(0,d.useMemo)(()=>Number(A.MAX_CUSTOM_INSTRUCTIONS_LENGTH.value.maxLength),[A]),_=(0,d.useMemo)(()=>t.length>P,[t,P]),M=(0,d.useMemo)(()=>{let e=Number(A.MAX_CUSTOM_INSTRUCTIONS_LENGTH.value.maxLength);return!!e&&t.length>Math.floor(.8*e)},[t,A]);return(0,s.jsxs)("div",{className:"relative flex flex-col gap-3",children:[(0,s.jsx)("div",{className:(0,o.cn)("w-full transition ease-in-out rounded-xl","border border-border-l2",f&&"opacity-50"),children:(0,s.jsx)(m.A,{ref:w,className:(0,o.cn)("w-full p-3 text-sm align-bottom bg-transparent focus:outline-none text-primary rounded-xl"),value:t,onChange:N,placeholder:x,style:{resize:"none"},minRows:b,maxRows:j,disabled:f,id:v})}),(0,s.jsxs)("div",{className:"flex flex-row justify-between gap-2 px-0 min-h-10",children:[(0,s.jsxs)("div",{className:(0,o.cn)("flex flex-row items-center gap-1 text-xs px-3 w-full",_?"text-fg-danger":M?"text-secondary opacity-100":"opacity-0"),children:[(0,s.jsxs)("span",{children:[t.length," / ",P]}),_&&(0,s.jsx)("span",{className:"flex flex-row items-center gap-1",children:(0,s.jsx)(c.A,{className:"size-4 shrink-0"})})]}),(0,s.jsxs)("div",{className:(0,o.cn)("flex flex-row justify-end gap-2",f&&"hidden"),children:[(0,s.jsx)(n.$n,{variant:"outline",size:"md",disabled:!p,onClick:I,children:k("Discard","Discard")}),(0,s.jsx)(n.$n,{variant:"primary",size:"md",disabled:!p,onClick:S,children:k("Save","Save")})]})]})]})}}}]);